<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>{{ "common.my_helper_points" | translate}}</ion-title>
    <ion-buttons slot="primary">
      <ion-button (click)="close()">{{"common.close" | translate}}</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<!-- class="ion-padding" -->

<ion-content>
  @if (helferPunkteList$ | async; as helferPunkteList) {
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large"
        >{{ "common.my_helper_points" | translate}}</ion-title
      >
    </ion-toolbar>
  </ion-header>
  <ion-list [inset]="true">
    <ion-item-group>
      @for (groupBy of groupArray; track groupBy) {
      <ion-item-divider color="light">
        <ion-label> {{groupBy}} </ion-label>
      </ion-item-divider>
      @for (helferPunkt of helferPunkteList; track helferPunkt) { @if
      (helferPunkt.eventDate.toDate().getFullYear()==groupBy) {
      <ion-item
        type="button"
        detail="true"
        (click)="openHelferEinsatz(helferPunkt)"
      >
        <ion-label>
          <h2>{{helferPunkt.eventName}}</h2>
          @if (helferPunkt?.schichtName) {
          <h3>{{helferPunkt?.schichtName}}</h3>
          }
          <h3>
            <ion-icon slot="icon-only" name="calendar-outline"></ion-icon>
            {{helferPunkt.eventDate.toDate() | date:'dd.MM.yyyy'}}
          </h3>
          @if (helferPunkt?.schichtTimeFrom && helferPunkt?.schichtTimeTo) {
          <h3>
            <ion-icon slot="icon-only" name="time-outline"></ion-icon>
            {{helferPunkt?.schichtTimeFrom}} Uhr -
            {{helferPunkt?.schichtTimeTo}} Uhr
          </h3>
          } @if (helferPunkt?.confirmedByFirstName &&
          helferPunkt?.confirmedByLastName) {
          <h3>
            Best√§tigt von: {{helferPunkt?.confirmedByFirstName}}
            {{helferPunkt?.confirmedByLastName}} am {{helferPunkt?.date.toDate()
            | date:'dd.MM.yyyy'}}
          </h3>
          }
        </ion-label>
        <ion-note slot="end">
          <ion-badge>{{helferPunkt?.points}}</ion-badge>
        </ion-note>
      </ion-item>
      } } }
    </ion-item-group>
  </ion-list>
  }
</ion-content>

<ng-template #loading>
  <ion-skeleton-text animated style="width: 10%"></ion-skeleton-text>
  <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
</ng-template>
