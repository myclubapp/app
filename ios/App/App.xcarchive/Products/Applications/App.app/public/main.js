import {
  bootstrapLazy as bootstrapLazy2,
  promiseResolve as promiseResolve2
} from "./chunk-SINPMRGM.js";
import {
  bootstrapLazy as bootstrapLazy3
} from "./chunk-YTBNBDIQ.js";
import {
  package_default
} from "./chunk-WJRCWONJ.js";
import {
  bootstrapLazy,
  promiseResolve
} from "./chunk-HFNYFWXL.js";
import {
  ClubSubscriptionPage
} from "./chunk-QT4RDWZQ.js";
import "./chunk-MPT66UUM.js";
import "./chunk-IHJSXIQX.js";
import {
  environment
} from "./chunk-SMELFGID.js";
import "./chunk-NVBRLDNC.js";
import "./chunk-RXUJTLR3.js";
import "./chunk-MPTMT4G6.js";
import "./chunk-VO6647VF.js";
import "./chunk-3HMFG4JN.js";
import {
  Device
} from "./chunk-54VO2CGW.js";
import "./chunk-TPIQQKTH.js";
import "./chunk-WS5FEPJJ.js";
import {
  AuthGuard,
  getAnalytics,
  getGoogleAnalyticsClientId,
  initializeAnalytics,
  isSupported,
  logEvent,
  redirectUnauthorizedTo,
  setAnalyticsCollectionEnabled,
  setConsent,
  setCurrentScreen,
  setDefaultEventParameters,
  setUserId,
  setUserProperties,
  settings
} from "./chunk-EPUNNSVT.js";
import {
  FontAwesomeModule
} from "./chunk-KAKENQW2.js";
import {
  PushNotifications
} from "./chunk-IILXOVOO.js";
import "./chunk-MS3JJYL5.js";
import "./chunk-YLSEXBCU.js";
import "./chunk-3ABWPIXG.js";
import "./chunk-REWK7CTI.js";
import {
  UserProfileService,
  getStorage,
  provideStorage
} from "./chunk-7XMQNZXL.js";
import {
  FirebaseService
} from "./chunk-RMTOAZGR.js";
import {
  Auth,
  AuthService,
  Component,
  ErrorFactory,
  FirebaseApp,
  FirebaseApps,
  VERSION,
  _getProvider,
  _registerComponent,
  areCookiesEnabled,
  authState,
  deleteDB,
  getApp,
  getApp2,
  getAuth,
  getFirestore,
  getModularInstance,
  indexedDBLocalPersistence,
  initializeApp,
  initializeAuth,
  isIndexedDBAvailable,
  onAuthStateChanged,
  openDB,
  provideAuth,
  provideFirebaseApp,
  provideFirestore,
  registerVersion,
  validateIndexedDBOpenable,
  ɵAngularFireSchedulers,
  ɵgetAllInstancesOf,
  ɵgetDefaultInstanceOf,
  ɵzoneWrap
} from "./chunk-AMO7VPPH.js";
import {
  APP_INITIALIZER,
  ActivationEnd,
  AlertController,
  ApplicationRef,
  AsyncPipe,
  BrowserModule,
  ComponentFactoryResolver$1,
  FormsModule,
  HttpClient,
  Inject,
  Injectable,
  InjectionToken,
  Injector,
  IonAccordion,
  IonAccordionGroup,
  IonApp,
  IonButton,
  IonContent,
  IonHeader,
  IonIcon,
  IonItem,
  IonLabel,
  IonList,
  IonMenu,
  IonMenuToggle,
  IonNote,
  IonRouterOutlet,
  IonSplitPane,
  IonThumbnail,
  IonTitle,
  IonToolbar,
  IonicModule,
  IonicRouteStrategy,
  LOCATION_INITIALIZED,
  MenuController,
  MissingTranslationHandler,
  ModalController,
  NEVER,
  NgIf,
  NgModule,
  NgZone,
  Observable,
  Optional,
  PLATFORM_ID,
  Platform,
  PreloadAllModules,
  RouteReuseStrategy,
  Router,
  RouterLink,
  RouterLinkActive,
  RouterLinkDelegateDirective,
  RouterModule,
  Subject,
  Title,
  ToastController,
  TranslateLoader,
  TranslateModule,
  TranslatePipe,
  TranslateService,
  concatMap,
  distinct,
  distinctUntilChanged,
  enableProdMode,
  filter,
  from,
  groupBy,
  inject,
  isPlatformBrowser,
  isPlatformServer,
  makeEnvironmentProviders,
  map,
  mergeMap,
  of,
  pairwise,
  platformBrowser,
  provideAppInitializer,
  provideHttpClient,
  setClassMetadata,
  startWith,
  switchMap,
  take,
  tap,
  timer,
  withInterceptorsFromDi,
  ɵEmptyOutletComponent,
  ɵsetClassDebugInfo,
  ɵɵadvance,
  ɵɵdefineComponent,
  ɵɵdefineInjectable,
  ɵɵdefineInjector,
  ɵɵdefineNgModule,
  ɵɵdirectiveInject,
  ɵɵelement,
  ɵɵelementContainerEnd,
  ɵɵelementContainerStart,
  ɵɵelementEnd,
  ɵɵelementStart,
  ɵɵinject,
  ɵɵlistener,
  ɵɵnextContext,
  ɵɵpipe,
  ɵɵpipeBind1,
  ɵɵproperty,
  ɵɵpureFunction0,
  ɵɵtemplate,
  ɵɵtext,
  ɵɵtextInterpolate,
  ɵɵtextInterpolate1,
  ɵɵtextInterpolate3
} from "./chunk-PZUQX53K.js";
import "./chunk-BK6XZVAH.js";
import "./chunk-JFBLR2DD.js";
import {
  Capacitor,
  registerPlugin
} from "./chunk-YB7CDXXA.js";
import "./chunk-BMLGNNEE.js";
import "./chunk-R3N6CFPK.js";
import "./chunk-HHPBBMWP.js";
import "./chunk-P46UNXAG.js";
import "./chunk-6NM256MY.js";
import "./chunk-AWRGIDDG.js";
import "./chunk-55OVODAE.js";
import "./chunk-HIKKWWV7.js";
import "./chunk-HYGHPGGJ.js";
import "./chunk-BKPN4S4N.js";
import "./chunk-U6MFTC2E.js";
import "./chunk-QQMTNXUN.js";
import "./chunk-5HIO5JVM.js";
import "./chunk-RRWPYKYY.js";
import "./chunk-2HS7YJ5A.js";
import "./chunk-F4BDZKIT.js";
import "./chunk-QVGABGEB.js";
import "./chunk-JYOJD2RE.js";
import {
  isPlatform
} from "./chunk-5IJ3YEPD.js";
import "./chunk-T7BCX42A.js";
import {
  __async,
  __spreadProps,
  __spreadValues
} from "./chunk-LQ2EECYJ.js";

// node_modules/@capacitor/status-bar/dist/esm/definitions.js
var Style;
(function(Style2) {
  Style2["Dark"] = "DARK";
  Style2["Light"] = "LIGHT";
  Style2["Default"] = "DEFAULT";
})(Style || (Style = {}));
var Animation;
(function(Animation2) {
  Animation2["None"] = "NONE";
  Animation2["Slide"] = "SLIDE";
  Animation2["Fade"] = "FADE";
})(Animation || (Animation = {}));

// node_modules/@capacitor/status-bar/dist/esm/index.js
var StatusBar = registerPlugin("StatusBar");

// node_modules/@capacitor/app/dist/esm/index.js
var App = registerPlugin("App", {
  web: () => import("./web-IMXFODV4.js").then((m) => new m.AppWeb())
});

// node_modules/@capacitor/dialog/dist/esm/index.js
var Dialog = registerPlugin("Dialog", {
  web: () => import("./web-K4BONWFW.js").then((m) => new m.DialogWeb())
});

// node_modules/@capacitor/splash-screen/dist/esm/index.js
var SplashScreen = registerPlugin("SplashScreen", {
  web: () => import("./web-QXZZKKZL.js").then((m) => new m.SplashScreenWeb())
});

// node_modules/@capacitor/network/dist/esm/index.js
var Network = registerPlugin("Network", {
  web: () => import("./web-2UYFXQDS.js").then((m) => new m.NetworkWeb())
});

// node_modules/@angular/service-worker/fesm2022/service-worker.mjs
var ERR_SW_NOT_SUPPORTED = "Service workers are disabled or not supported by this browser";
var NgswCommChannel = class {
  serviceWorker;
  worker;
  registration;
  events;
  constructor(serviceWorker, injector) {
    this.serviceWorker = serviceWorker;
    if (!serviceWorker) {
      this.worker = this.events = this.registration = new Observable((subscriber) => subscriber.error(new Error(ERR_SW_NOT_SUPPORTED)));
    } else {
      let currentWorker = null;
      const workerSubject = new Subject();
      this.worker = new Observable((subscriber) => {
        if (currentWorker !== null) {
          subscriber.next(currentWorker);
        }
        return workerSubject.subscribe((v) => subscriber.next(v));
      });
      const updateController = () => {
        const {
          controller
        } = serviceWorker;
        if (controller === null) {
          return;
        }
        currentWorker = controller;
        workerSubject.next(currentWorker);
      };
      serviceWorker.addEventListener("controllerchange", updateController);
      updateController();
      this.registration = this.worker.pipe(switchMap(() => serviceWorker.getRegistration()));
      const _events = new Subject();
      this.events = _events.asObservable();
      const messageListener = (event) => {
        const {
          data
        } = event;
        if (data == null ? void 0 : data.type) {
          _events.next(data);
        }
      };
      serviceWorker.addEventListener("message", messageListener);
      const appRef = injector == null ? void 0 : injector.get(ApplicationRef, null, {
        optional: true
      });
      appRef == null ? void 0 : appRef.onDestroy(() => {
        serviceWorker.removeEventListener("controllerchange", updateController);
        serviceWorker.removeEventListener("message", messageListener);
      });
    }
  }
  postMessage(action, payload) {
    return new Promise((resolve) => {
      this.worker.pipe(take(1)).subscribe((sw) => {
        sw.postMessage(__spreadValues({
          action
        }, payload));
        resolve();
      });
    });
  }
  postMessageWithOperation(type, payload, operationNonce) {
    const waitForOperationCompleted = this.waitForOperationCompleted(operationNonce);
    const postMessage = this.postMessage(type, payload);
    return Promise.all([postMessage, waitForOperationCompleted]).then(([, result]) => result);
  }
  generateNonce() {
    return Math.round(Math.random() * 1e7);
  }
  eventsOfType(type) {
    let filterFn;
    if (typeof type === "string") {
      filterFn = (event) => event.type === type;
    } else {
      filterFn = (event) => type.includes(event.type);
    }
    return this.events.pipe(filter(filterFn));
  }
  nextEventOfType(type) {
    return this.eventsOfType(type).pipe(take(1));
  }
  waitForOperationCompleted(nonce) {
    return new Promise((resolve, reject) => {
      this.eventsOfType("OPERATION_COMPLETED").pipe(filter((event) => event.nonce === nonce), take(1), map((event) => {
        if (event.result !== void 0) {
          return event.result;
        }
        throw new Error(event.error);
      })).subscribe({
        next: resolve,
        error: reject
      });
    });
  }
  get isEnabled() {
    return !!this.serviceWorker;
  }
};
var SwPush = class _SwPush {
  sw;
  /**
   * Emits the payloads of the received push notification messages.
   */
  messages;
  /**
   * Emits the payloads of the received push notification messages as well as the action the user
   * interacted with. If no action was used the `action` property contains an empty string `''`.
   *
   * Note that the `notification` property does **not** contain a
   * [Notification][Mozilla Notification] object but rather a
   * [NotificationOptions](https://notifications.spec.whatwg.org/#dictdef-notificationoptions)
   * object that also includes the `title` of the [Notification][Mozilla Notification] object.
   *
   * [Mozilla Notification]: https://developer.mozilla.org/en-US/docs/Web/API/Notification
   */
  notificationClicks;
  /**
   * Emits the currently active
   * [PushSubscription](https://developer.mozilla.org/en-US/docs/Web/API/PushSubscription)
   * associated to the Service Worker registration or `null` if there is no subscription.
   */
  subscription;
  /**
   * True if the Service Worker is enabled (supported by the browser and enabled via
   * `ServiceWorkerModule`).
   */
  get isEnabled() {
    return this.sw.isEnabled;
  }
  pushManager = null;
  subscriptionChanges = new Subject();
  constructor(sw) {
    this.sw = sw;
    if (!sw.isEnabled) {
      this.messages = NEVER;
      this.notificationClicks = NEVER;
      this.subscription = NEVER;
      return;
    }
    this.messages = this.sw.eventsOfType("PUSH").pipe(map((message) => message.data));
    this.notificationClicks = this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(map((message) => message.data));
    this.pushManager = this.sw.registration.pipe(map((registration) => registration.pushManager));
    const workerDrivenSubscriptions = this.pushManager.pipe(switchMap((pm) => pm.getSubscription()));
    this.subscription = new Observable((subscriber) => {
      const workerDrivenSubscription = workerDrivenSubscriptions.subscribe(subscriber);
      const subscriptionChanges = this.subscriptionChanges.subscribe(subscriber);
      return () => {
        workerDrivenSubscription.unsubscribe();
        subscriptionChanges.unsubscribe();
      };
    });
  }
  /**
   * Subscribes to Web Push Notifications,
   * after requesting and receiving user permission.
   *
   * @param options An object containing the `serverPublicKey` string.
   * @returns A Promise that resolves to the new subscription object.
   */
  requestSubscription(options) {
    if (!this.sw.isEnabled || this.pushManager === null) {
      return Promise.reject(new Error(ERR_SW_NOT_SUPPORTED));
    }
    const pushOptions = {
      userVisibleOnly: true
    };
    let key = this.decodeBase64(options.serverPublicKey.replace(/_/g, "/").replace(/-/g, "+"));
    let applicationServerKey = new Uint8Array(new ArrayBuffer(key.length));
    for (let i = 0; i < key.length; i++) {
      applicationServerKey[i] = key.charCodeAt(i);
    }
    pushOptions.applicationServerKey = applicationServerKey;
    return new Promise((resolve, reject) => {
      this.pushManager.pipe(switchMap((pm) => pm.subscribe(pushOptions)), take(1)).subscribe({
        next: (sub) => {
          this.subscriptionChanges.next(sub);
          resolve(sub);
        },
        error: reject
      });
    });
  }
  /**
   * Unsubscribes from Service Worker push notifications.
   *
   * @returns A Promise that is resolved when the operation succeeds, or is rejected if there is no
   *          active subscription or the unsubscribe operation fails.
   */
  unsubscribe() {
    if (!this.sw.isEnabled) {
      return Promise.reject(new Error(ERR_SW_NOT_SUPPORTED));
    }
    const doUnsubscribe = (sub) => {
      if (sub === null) {
        throw new Error("Not subscribed to push notifications.");
      }
      return sub.unsubscribe().then((success) => {
        if (!success) {
          throw new Error("Unsubscribe failed!");
        }
        this.subscriptionChanges.next(null);
      });
    };
    return new Promise((resolve, reject) => {
      this.subscription.pipe(take(1), switchMap(doUnsubscribe)).subscribe({
        next: resolve,
        error: reject
      });
    });
  }
  decodeBase64(input) {
    return atob(input);
  }
  static \u0275fac = function SwPush_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _SwPush)(\u0275\u0275inject(NgswCommChannel));
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({
    token: _SwPush,
    factory: _SwPush.\u0275fac
  });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(SwPush, [{
    type: Injectable
  }], () => [{
    type: NgswCommChannel
  }], null);
})();
var SwUpdate = class _SwUpdate {
  sw;
  /**
   * Emits a `VersionDetectedEvent` event whenever a new version is detected on the server.
   *
   * Emits a `VersionInstallationFailedEvent` event whenever checking for or downloading a new
   * version fails.
   *
   * Emits a `VersionReadyEvent` event whenever a new version has been downloaded and is ready for
   * activation.
   */
  versionUpdates;
  /**
   * Emits an `UnrecoverableStateEvent` event whenever the version of the app used by the service
   * worker to serve this client is in a broken state that cannot be recovered from without a full
   * page reload.
   */
  unrecoverable;
  /**
   * True if the Service Worker is enabled (supported by the browser and enabled via
   * `ServiceWorkerModule`).
   */
  get isEnabled() {
    return this.sw.isEnabled;
  }
  constructor(sw) {
    this.sw = sw;
    if (!sw.isEnabled) {
      this.versionUpdates = NEVER;
      this.unrecoverable = NEVER;
      return;
    }
    this.versionUpdates = this.sw.eventsOfType(["VERSION_DETECTED", "VERSION_INSTALLATION_FAILED", "VERSION_READY", "NO_NEW_VERSION_DETECTED"]);
    this.unrecoverable = this.sw.eventsOfType("UNRECOVERABLE_STATE");
  }
  /**
   * Checks for an update and waits until the new version is downloaded from the server and ready
   * for activation.
   *
   * @returns a promise that
   * - resolves to `true` if a new version was found and is ready to be activated.
   * - resolves to `false` if no new version was found
   * - rejects if any error occurs
   */
  checkForUpdate() {
    if (!this.sw.isEnabled) {
      return Promise.reject(new Error(ERR_SW_NOT_SUPPORTED));
    }
    const nonce = this.sw.generateNonce();
    return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES", {
      nonce
    }, nonce);
  }
  /**
   * Updates the current client (i.e. browser tab) to the latest version that is ready for
   * activation.
   *
   * In most cases, you should not use this method and instead should update a client by reloading
   * the page.
   *
   * <div class="docs-alert docs-alert-important">
   *
   * Updating a client without reloading can easily result in a broken application due to a version
   * mismatch between the application shell and other page resources,
   * such as lazy-loaded chunks, whose filenames may change between
   * versions.
   *
   * Only use this method, if you are certain it is safe for your specific use case.
   *
   * </div>
   *
   * @returns a promise that
   *  - resolves to `true` if an update was activated successfully
   *  - resolves to `false` if no update was available (for example, the client was already on the
   *    latest version).
   *  - rejects if any error occurs
   */
  activateUpdate() {
    if (!this.sw.isEnabled) {
      return Promise.reject(new Error(ERR_SW_NOT_SUPPORTED));
    }
    const nonce = this.sw.generateNonce();
    return this.sw.postMessageWithOperation("ACTIVATE_UPDATE", {
      nonce
    }, nonce);
  }
  static \u0275fac = function SwUpdate_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _SwUpdate)(\u0275\u0275inject(NgswCommChannel));
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({
    token: _SwUpdate,
    factory: _SwUpdate.\u0275fac
  });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(SwUpdate, [{
    type: Injectable
  }], () => [{
    type: NgswCommChannel
  }], null);
})();
var SCRIPT = new InjectionToken(ngDevMode ? "NGSW_REGISTER_SCRIPT" : "");
function ngswAppInitializer() {
  if (false) {
    return;
  }
  const options = inject(SwRegistrationOptions);
  if (!("serviceWorker" in navigator && options.enabled !== false)) {
    return;
  }
  const script = inject(SCRIPT);
  const ngZone = inject(NgZone);
  const appRef = inject(ApplicationRef);
  ngZone.runOutsideAngular(() => {
    const sw = navigator.serviceWorker;
    const onControllerChange = () => {
      var _a;
      return (_a = sw.controller) == null ? void 0 : _a.postMessage({
        action: "INITIALIZE"
      });
    };
    sw.addEventListener("controllerchange", onControllerChange);
    appRef.onDestroy(() => {
      sw.removeEventListener("controllerchange", onControllerChange);
    });
  });
  ngZone.runOutsideAngular(() => {
    let readyToRegister;
    const {
      registrationStrategy
    } = options;
    if (typeof registrationStrategy === "function") {
      readyToRegister = new Promise((resolve) => registrationStrategy().subscribe(() => resolve()));
    } else {
      const [strategy, ...args] = (registrationStrategy || "registerWhenStable:30000").split(":");
      switch (strategy) {
        case "registerImmediately":
          readyToRegister = Promise.resolve();
          break;
        case "registerWithDelay":
          readyToRegister = delayWithTimeout(+args[0] || 0);
          break;
        case "registerWhenStable":
          readyToRegister = Promise.race([appRef.whenStable(), delayWithTimeout(+args[0])]);
          break;
        default:
          throw new Error(`Unknown ServiceWorker registration strategy: ${options.registrationStrategy}`);
      }
    }
    readyToRegister.then(() => navigator.serviceWorker.register(script, {
      scope: options.scope
    }).catch((err) => console.error("Service worker registration failed with:", err)));
  });
}
function delayWithTimeout(timeout) {
  return new Promise((resolve) => setTimeout(resolve, timeout));
}
function ngswCommChannelFactory(opts, injector) {
  const isBrowser = true;
  return new NgswCommChannel(isBrowser && opts.enabled !== false ? navigator.serviceWorker : void 0, injector);
}
var SwRegistrationOptions = class {
  /**
   * Whether the ServiceWorker will be registered and the related services (such as `SwPush` and
   * `SwUpdate`) will attempt to communicate and interact with it.
   *
   * Default: true
   */
  enabled;
  /**
   * A URL that defines the ServiceWorker's registration scope; that is, what range of URLs it can
   * control. It will be used when calling
   * [ServiceWorkerContainer#register()](https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register).
   */
  scope;
  /**
   * Defines the ServiceWorker registration strategy, which determines when it will be registered
   * with the browser.
   *
   * The default behavior of registering once the application stabilizes (i.e. as soon as there are
   * no pending micro- and macro-tasks) is designed to register the ServiceWorker as soon as
   * possible but without affecting the application's first time load.
   *
   * Still, there might be cases where you want more control over when the ServiceWorker is
   * registered (for example, there might be a long-running timeout or polling interval, preventing
   * the app from stabilizing). The available option are:
   *
   * - `registerWhenStable:<timeout>`: Register as soon as the application stabilizes (no pending
   *     micro-/macro-tasks) but no later than `<timeout>` milliseconds. If the app hasn't
   *     stabilized after `<timeout>` milliseconds (for example, due to a recurrent asynchronous
   *     task), the ServiceWorker will be registered anyway.
   *     If `<timeout>` is omitted, the ServiceWorker will only be registered once the app
   *     stabilizes.
   * - `registerImmediately`: Register immediately.
   * - `registerWithDelay:<timeout>`: Register with a delay of `<timeout>` milliseconds. For
   *     example, use `registerWithDelay:5000` to register the ServiceWorker after 5 seconds. If
   *     `<timeout>` is omitted, is defaults to `0`, which will register the ServiceWorker as soon
   *     as possible but still asynchronously, once all pending micro-tasks are completed.
   * - An Observable factory function: A function that returns an `Observable`.
   *     The function will be used at runtime to obtain and subscribe to the `Observable` and the
   *     ServiceWorker will be registered as soon as the first value is emitted.
   *
   * Default: 'registerWhenStable:30000'
   */
  registrationStrategy;
};
function provideServiceWorker(script, options = {}) {
  return makeEnvironmentProviders([SwPush, SwUpdate, {
    provide: SCRIPT,
    useValue: script
  }, {
    provide: SwRegistrationOptions,
    useValue: options
  }, {
    provide: NgswCommChannel,
    useFactory: ngswCommChannelFactory,
    deps: [SwRegistrationOptions, Injector]
  }, provideAppInitializer(ngswAppInitializer)]);
}
var ServiceWorkerModule = class _ServiceWorkerModule {
  /**
   * Register the given Angular Service Worker script.
   *
   * If `enabled` is set to `false` in the given options, the module will behave as if service
   * workers are not supported by the browser, and the service worker will not be registered.
   */
  static register(script, options = {}) {
    return {
      ngModule: _ServiceWorkerModule,
      providers: [provideServiceWorker(script, options)]
    };
  }
  static \u0275fac = function ServiceWorkerModule_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _ServiceWorkerModule)();
  };
  static \u0275mod = /* @__PURE__ */ \u0275\u0275defineNgModule({
    type: _ServiceWorkerModule
  });
  static \u0275inj = /* @__PURE__ */ \u0275\u0275defineInjector({
    providers: [SwPush, SwUpdate]
  });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(ServiceWorkerModule, [{
    type: NgModule,
    args: [{
      providers: [SwPush, SwUpdate]
    }]
  }], null, null);
})();

// src/app/app.component.ts
var _c0 = () => ["/t/news"];
var _c1 = () => ["/t/training"];
var _c2 = () => ["/t/events"];
var _c3 = () => ["/profile"];
var _c4 = () => ["/info"];
var _c5 = () => ["/club-list"];
var _c6 = () => ["/team-list"];
var _c7 = () => ["/t/championship"];
var _c8 = () => ["/t/helfer"];
function AppComponent_ng_container_25_ion_item_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "ion-item", 8);
    \u0275\u0275element(1, "ion-icon", 22);
    \u0275\u0275elementStart(2, "ion-label");
    \u0275\u0275text(3);
    \u0275\u0275pipe(4, "translate");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    \u0275\u0275property("routerLink", \u0275\u0275pureFunction0(4, _c7));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(4, 2, "common.championship"));
  }
}
function AppComponent_ng_container_25_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementContainerStart(0);
    \u0275\u0275template(1, AppComponent_ng_container_25_ion_item_1_Template, 5, 5, "ion-item", 21);
    \u0275\u0275elementContainerEnd();
  }
  if (rf & 2) {
    const clubList_r1 = ctx.ngIf;
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r1.enableChampionship(clubList_r1));
  }
}
function AppComponent_ng_container_32_ion_item_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "ion-item", 8);
    \u0275\u0275element(1, "ion-icon", 23);
    \u0275\u0275elementStart(2, "ion-label");
    \u0275\u0275text(3);
    \u0275\u0275pipe(4, "translate");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    \u0275\u0275property("routerLink", \u0275\u0275pureFunction0(4, _c8));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(4, 2, "common.helper"));
  }
}
function AppComponent_ng_container_32_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementContainerStart(0);
    \u0275\u0275template(1, AppComponent_ng_container_32_ion_item_1_Template, 5, 5, "ion-item", 21);
    \u0275\u0275elementContainerEnd();
  }
  if (rf & 2) {
    const clubList_r3 = ctx.ngIf;
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r1.enableHelferEvents(clubList_r3));
  }
}
var _AppComponent = class _AppComponent {
  constructor(platform, swUpdate, modalCtrl, alertController, authService, fbService, profileService, router, menuCtrl, translate, toastController, ngZone) {
    this.platform = platform;
    this.swUpdate = swUpdate;
    this.modalCtrl = modalCtrl;
    this.alertController = alertController;
    this.authService = authService;
    this.fbService = fbService;
    this.profileService = profileService;
    this.router = router;
    this.menuCtrl = menuCtrl;
    this.translate = translate;
    this.toastController = toastController;
    this.ngZone = ngZone;
    this.appVersion = package_default.version;
    this.buildNumber = package_default.buildNumber;
    this.userHasTeam = false;
    this.userHasClub = false;
    this.initializeApp();
    onAuthStateChanged(this.authService.auth, (user) => __async(this, null, function* () {
      if (user) {
        this.email = user.email;
        this.user = user;
        if (!user.emailVerified) {
          const navOnboardingEmail = yield this.router.navigateByUrl("/onboarding-email");
          if (navOnboardingEmail) {
            console.log("Navigation success to onboarding Email Page");
          } else {
            console.error("Navigation ERROR to onboarding Email Page");
          }
        } else {
          console.log("E-Mail IS verified. Go ahead..");
          console.log(user.email, user.displayName, user.emailVerified);
          this.clubListSub = this.clubList$.pipe(take(1), tap((clubList) => __async(this, null, function* () {
            if (clubList.length == 0) {
              console.log("NO! Club Data received. > Call Club Onboarding");
              try {
                const navOnboardingClub = yield this.router.navigateByUrl("/onboarding-club");
                if (navOnboardingClub) {
                  console.log("Navigation success to onboarding Club Page");
                } else {
                  console.error("Navigation ERROR to onboarding Club Page");
                }
              } catch (error) {
                console.error("Navigation Exception:", error);
                window.location.reload();
              }
            } else {
              if (clubList.find((club) => club.subscriptionActive == false)) {
                console.log("NO SUBSCRIPTION FOUND");
                const modal = yield this.modalCtrl.create({
                  component: ClubSubscriptionPage,
                  presentingElement: yield this.modalCtrl.getTop(),
                  canDismiss: true,
                  showBackdrop: true,
                  componentProps: {
                    clubId: clubList.find((club) => club.subscriptionActive == false).id
                  }
                });
                modal.present();
                const { role } = yield modal.onWillDismiss();
                console.log(role);
                if (role === "close" || role == "backdrop") {
                  this.authService.logout();
                }
              } else {
                console.log("Club is active");
              }
            }
          }))).subscribe();
        }
        this.deviceInfo = yield Device.getInfo();
        this.deviceId = yield Device.getId();
        console.log(this.deviceInfo);
        if (this.deviceInfo.platform == "android" || this.deviceInfo.platform == "ios") {
          this.registerNotifications();
        } else {
        }
      } else {
        console.log("User is signed out");
        this.menuCtrl.enable(false, "menu");
        this.email = "";
        const navLogout = yield this.router.navigateByUrl("/login");
        if (navLogout) {
          console.log("Navigation SUCCESS to Logout Page");
        } else {
          console.error("Navigation ERROR to Logout Page");
        }
      }
    }));
  }
  ngOnInit() {
    App.removeAllListeners().then(() => {
      this.registerBackButton();
    });
    this.clubList$ = this.fbService.getClubList();
    Network.addListener("networkStatusChange", (status) => __async(this, null, function* () {
      if (!status.connected) {
      } else {
      }
    }));
  }
  ngOnDestroy() {
    Network.removeAllListeners();
    App.removeAllListeners();
    if (this.clubListSub) {
      this.clubListSub.unsubscribe();
    }
  }
  initializeApp() {
    this.setStatusBar();
    this.showSplashScreen();
    this.setDefaultLanguage();
    this.swUpdate.versionUpdates.subscribe((event) => {
      if (event.type === "VERSION_READY") {
        this.presentAlertUpdateVersion();
      }
    });
  }
  setStatusBar() {
    StatusBar.setOverlaysWebView({
      overlay: false
    });
    const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
    if (prefersDark) {
      StatusBar.setStyle({ style: Style.Dark });
      StatusBar.setBackgroundColor({ color: "#795deb" });
    } else {
      StatusBar.setStyle({ style: Style.Light });
      StatusBar.setBackgroundColor({ color: "#339bde" });
    }
    window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", (e) => {
      const newColorScheme = e.matches ? "dark" : "light";
      console.log("System theme changed to:", newColorScheme);
      if (newColorScheme == "dark") {
        StatusBar.setStyle({ style: Style.Dark });
        StatusBar.setBackgroundColor({ color: "#795deb" });
      } else {
        StatusBar.setStyle({ style: Style.Light });
        StatusBar.setBackgroundColor({ color: "#339bde" });
      }
    });
  }
  registerBackButton() {
    App.addListener("backButton", (_0) => __async(this, [_0], function* ({ canGoBack }) {
      const modal = yield this.modalCtrl.getTop();
      if (modal) {
        modal.dismiss();
        return;
      } else if (canGoBack) {
        window.history.back();
      } else {
        App.exitApp();
      }
    }));
  }
  /*async doOnboardingEmail(user) {
      // const presentingElement = await this.modalCtrl.getTop();
      const modal = await this.modalCtrl.create({
        component: OnboardingPage,
        presentingElement: await this.modalCtrl.getTop(), //  this.routerOutlet.nativeEl,
        canDismiss: false,
        showBackdrop: true,
        componentProps: {
          data: user,
        },
      });
      modal.present();
  
      const { data, role } = await modal.onWillDismiss();
  
      if (role === "close") {
        console.log(">>> close onboarding modal" + data);
      }
    }*/
  setFallbackLanguage() {
    Device.getLanguageTag().then((result) => {
      if (result.value == "de" || result.value == "fr" || result.value == "en" || result.value == "it") {
        console.log("Set Fallback Language to Device Language: " + result.value);
        this.translate.use(result.value);
      } else {
        console.log("Set Fallback Language to DE");
        this.translate.use("de");
      }
    });
  }
  setDefaultLanguage() {
    return __async(this, null, function* () {
      this.authService.getUser$().pipe(take(1), tap((user) => this.user = user), switchMap((user) => user ? this.profileService.getUserProfile(user) : of(null))).subscribe((profile) => {
        if (profile) {
          if (profile.language) {
            if (profile.language.length > 0) {
              console.log("set user langauge: " + profile.language);
              this.translate.use(profile.language);
              return;
            }
          }
        }
        this.setFallbackLanguage();
      });
    });
  }
  /*async requestSubscription() {
      if (!this.swPush.isEnabled) {
        console.log("Notification is not enabled.");
        return;
      }
  
      this.deviceId = await Device.getId();
      this.deviceInfo = await Device.getInfo();
  
      const pushSubscription = await this.swPush.requestSubscription({
        serverPublicKey:
          "BFSCppXa1OPCktrYhZN3GfX5gKI00al-eNykBwk3rmHRwjfrGeo3JXaTPP_0EGQ01Ik_Ubc2dzvvFQmOc3GvXsY",
      });
  
      await this.profileService.addPushSubscriber(
        pushSubscription,
        this.deviceId,
        this.deviceInfo,
        ""
      );
    }
  
    async alertPushMessage(message) {
      const alert = await this.alertController.create({
        header: message.title,
        message: message.message,
        buttons: ["OK"],
      });
      alert.present();
    }*/
  // initializeFirebase() {
  // https://cloud.google.com/firestore/docs/manage-data/enable-offline
  // The default cache size threshold is 40 MB. Configure "cacheSizeBytes"
  // for a different threshold (minimum 1 MB) or set to "CACHE_SIZE_UNLIMITED"
  // to disable clean-up.
  /*
    firebase.firestore().settings({
      cacheSizeBytes: firebase.firestore.CACHE_SIZE_UNLIMITED
    });
  
    firebase.firestore().enablePersistence()
      .catch(function (err) {
        if (err.code == 'failed-precondition') {
          // Multiple tabs open, persistence can only be enabled
          // in one tab at a a time.
          // ...
        } else if (err.code == 'unimplemented') {
          // The current browser does not support all of the
          // features required to enable persistence
          // ...
        }
      });
    // Subsequent queries will use persistence, if it was enabled successfully
    */
  //}
  showSplashScreen() {
    return __async(this, null, function* () {
      yield SplashScreen.show({
        showDuration: 1500,
        autoHide: true
      });
    });
  }
  presentAlertNoClub() {
    return __async(this, null, function* () {
      const alert = yield this.alertController.create({
        cssClass: "my-custom-class",
        header: "Kein Club gefunden",
        subHeader: "",
        message: "Damit du myclub nutzen kannst, musst du zuerst einem Club beitreten. M\xF6chtest du einem Club beitreten?",
        buttons: [
          {
            text: "Ja",
            handler: () => {
              this.router.navigateByUrl("onboarding", {});
            }
          },
          {
            text: "Logout",
            role: "cancel",
            handler: () => {
              this.authService.logout();
            }
          }
        ]
      });
      yield alert.present();
      const { role } = yield alert.onDidDismiss();
      console.log("onDidDismiss resolved with role", role);
    });
  }
  presentClubRequstOpen() {
    return __async(this, null, function* () {
      const alert = yield this.alertController.create({
        cssClass: "my-custom-class",
        header: "Offene Club-Anfragen vorhanden",
        subHeader: "",
        message: "Du hast berets offene Club anfragen.",
        buttons: [
          {
            text: "Neuen Club beitreten",
            handler: () => {
              this.router.navigateByUrl("onboarding", {});
            }
          },
          {
            text: "Profil verwalten",
            role: "cancel",
            handler: () => {
              this.router.navigateByUrl("profile", {});
            }
          }
        ]
      });
      yield alert.present();
      const { role } = yield alert.onDidDismiss();
      console.log("onDidDismiss resolved with role", role);
    });
  }
  presentAlertNoTeam() {
    return __async(this, null, function* () {
      const alert = yield this.alertController.create({
        cssClass: "my-custom-class",
        header: "Kein Team gefunden",
        subHeader: "",
        message: "Du wurdest noch keinem Team zugeteilt aber das ist kein Problem. Du kannst ganz einfach einem Team beitreten oder deinen Club Antrag im Profil wieder l\xF6schen.",
        buttons: [
          {
            text: "Team beitreten",
            handler: () => {
              this.router.navigateByUrl("team-list", {});
            }
          },
          {
            text: "Profil anzeigen",
            handler: () => {
              this.router.navigateByUrl("profile", {});
            }
          }
        ]
      });
      yield alert.present();
      const { role } = yield alert.onDidDismiss();
      console.log("onDidDismiss resolved with role", role);
    });
  }
  presentAlertEmailNotVerified() {
    return __async(this, null, function* () {
    });
  }
  enableHelferEvents(clubList) {
    return clubList && clubList.some((club) => club.hasFeatureHelferEvent == true);
  }
  enableChampionship(clubList) {
    return clubList && clubList.some((club) => club.hasFeatureChampionship == true);
  }
  presentAlertUpdateVersion() {
    return __async(this, null, function* () {
      const alert = yield this.alertController.create({
        // cssClass: 'my-custom-class',
        header: "App Update verf\xFCgbar",
        message: `Eine neue Version ${this.appVersion} ist verf\xFCgbar. Neue Version laden?`,
        backdropDismiss: false,
        buttons: [
          {
            text: "Abbrechen",
            role: "cancel",
            cssClass: "secondary",
            handler: (data) => {
            }
          },
          {
            text: "Laden",
            handler: () => __async(this, null, function* () {
              const resolver = yield this.swUpdate.activateUpdate();
              if (resolver) {
                window.location.reload();
              } else {
                console.log("Already on latest version");
              }
            })
          }
        ]
      });
      yield alert.present();
    });
  }
  logout() {
    return __async(this, null, function* () {
      console.log("logout");
      yield this.authService.logout();
    });
  }
  /*async addListeners() {
      await PushNotifications.addListener('registration', async token => {
        console.info('Registration token: ', token.value);
        if (token.value) {
          const profileUpdate = await this.profileService
            .addPushSubscriber(null, this.deviceId, this.deviceInfo, token.value)
            .catch((err) => {
              console.error("Could not subscribe to notifications", err);
              // this.errorPushMessageEnable("Could not subscribe to notifications");
            });
        }
      });
  
      await PushNotifications.addListener('registrationError', err => {
        console.error('Registration error: ', err.error);
      });
  
      await PushNotifications.addListener('pushNotificationReceived', notification => {
        console.log('Push notification received: ', notification);
        this.alertController.create({
          header: notification.title,
          message: notification.body,
        }).then(alert=>{
          alert.present();
        })
      });
  
      await PushNotifications.addListener('pushNotificationActionPerformed', notification => {
        console.log('Push notification action performed', notification.actionId, notification.inputValue);
      });
    }*/
  registerNotifications() {
    return __async(this, null, function* () {
      PushNotifications.requestPermissions().then((result) => {
        if (result.receive === "granted") {
          PushNotifications.register();
        } else {
        }
      });
      PushNotifications.addListener("registration", (token) => {
        this.profileService.addPushSubscriber(null, this.deviceId, this.deviceInfo, token.value).catch((err) => {
          console.error("Could not subscribe to notifications", err);
        }).then((ok) => {
          console.log(ok);
        });
      });
      PushNotifications.addListener("registrationError", (error) => {
      });
      PushNotifications.addListener("pushNotificationReceived", (notification) => __async(this, null, function* () {
        console.log("PUSH MESSAGE RECEIVED");
        console.log("TYPE:  " + notification.data.type);
        if (notification.data.type && notification.data.type === "helferEvent") {
          const { value } = yield Dialog.confirm({
            title: notification.title,
            message: notification.body,
            okButtonTitle: "\xD6ffnen",
            cancelButtonTitle: "Abbrechen"
          });
          if (value) {
            this.ngZone.run(() => {
              this.router.navigateByUrl("/t/helfer", {
                state: notification.data
              }).catch((e) => {
                console.log(e);
              });
            });
          }
        } else if (notification.data.type && notification.data.type === "clubEvent") {
          const { value } = yield Dialog.confirm({
            title: notification.title,
            message: notification.body,
            okButtonTitle: "\xD6ffnen",
            cancelButtonTitle: "Abbrechen"
          });
          if (value) {
            this.ngZone.run(() => {
              this.router.navigateByUrl("/t/events", {
                state: notification.data
              }).catch((e) => {
                console.log(e);
              });
            });
          }
        } else if (notification.data.type && notification.data.type === "clubRequest") {
          const { value } = yield Dialog.confirm({
            title: notification.title,
            message: notification.body,
            okButtonTitle: "\xD6ffnen",
            cancelButtonTitle: "Abbrechen"
          });
          if (value) {
          }
        } else if (notification.data.type && notification.data.type === "clubRequestAdmin") {
          const { value } = yield Dialog.confirm({
            title: notification.title,
            message: notification.body,
            okButtonTitle: "\xD6ffnen",
            cancelButtonTitle: "Abbrechen"
          });
          if (value) {
          }
        } else if (notification.data.type && notification.data.type === "news") {
          const { value } = yield Dialog.confirm({
            title: notification.title,
            message: notification.body,
            okButtonTitle: "\xD6ffnen",
            cancelButtonTitle: "Abbrechen"
          });
          if (value) {
            this.ngZone.run(() => {
              this.router.navigateByUrl("/t/news", {
                state: notification.data
              }).catch((e) => {
                console.log(e);
              });
            });
          }
        } else if (notification.data.type && notification.data.type === "clubNews") {
          const { value } = yield Dialog.confirm({
            title: notification.title,
            message: notification.body,
            okButtonTitle: "\xD6ffnen",
            cancelButtonTitle: "Abbrechen"
          });
          if (value) {
            this.ngZone.run(() => {
              this.router.navigateByUrl("/t/news", {
                state: notification.data
              }).catch((e) => {
                console.log(e);
              });
            });
          }
        } else if (notification.data.type && notification.data.type === "training") {
          const { value } = yield Dialog.confirm({
            title: notification.title,
            message: notification.body,
            okButtonTitle: "\xD6ffnen",
            cancelButtonTitle: "Abbrechen"
          });
          if (value) {
            this.ngZone.run(() => {
              this.router.navigateByUrl("/t/training", {
                state: notification.data
              }).catch((e) => {
                console.log(e);
              });
            });
          }
        } else {
          Dialog.confirm({
            title: notification.title,
            message: notification.body,
            okButtonTitle: "OK"
          });
        }
      }));
      PushNotifications.addListener("pushNotificationActionPerformed", (notification) => {
        console.log(notification);
      });
    });
  }
};
_AppComponent.\u0275fac = function AppComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AppComponent)(\u0275\u0275directiveInject(Platform), \u0275\u0275directiveInject(SwUpdate), \u0275\u0275directiveInject(ModalController), \u0275\u0275directiveInject(AlertController), \u0275\u0275directiveInject(AuthService), \u0275\u0275directiveInject(FirebaseService), \u0275\u0275directiveInject(UserProfileService), \u0275\u0275directiveInject(Router), \u0275\u0275directiveInject(MenuController), \u0275\u0275directiveInject(TranslateService), \u0275\u0275directiveInject(ToastController), \u0275\u0275directiveInject(NgZone));
};
_AppComponent.\u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _AppComponent, selectors: [["app-root"]], standalone: false, decls: 73, vars: 56, consts: [["contentId", "main-content"], ["menuId", "menu", "contentId", "main-content", "type", "push"], ["value", "colors"], ["slot", "header", 1, "notch-padding"], ["slot", "start"], ["src", "assets/logo_trans.png"], ["slot", "content"], ["auto-hide", "false"], ["routerDirection", "root", "lines", "none", "detail", "true", "routerLinkActive", "selected", 3, "routerLink"], ["slot", "start", "name", "newspaper-outline"], ["slot", "start", "name", "barbell-outline"], [4, "ngIf"], ["slot", "start", "name", "calendar-outline"], ["slot", "start", "name", "person-circle-outline"], ["slot", "start", "name", "information-circle-outline"], ["value", "administration"], ["slot", "header"], ["name", "home", "slot", "start", "color", "primary"], [3, "click"], ["slot", "start", "name", "exit-outline", "color", "danger"], ["id", "main-content"], ["routerDirection", "root", "lines", "none", "detail", "true", "routerLinkActive", "selected", 3, "routerLink", 4, "ngIf"], ["slot", "start", "name", "trophy-outline"], ["slot", "start", "name", "help-buoy-outline"]], template: function AppComponent_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "ion-app")(1, "ion-split-pane", 0)(2, "ion-menu", 1)(3, "ion-content")(4, "ion-accordion-group", 2)(5, "ion-accordion", 2)(6, "ion-item", 3)(7, "ion-thumbnail", 4);
    \u0275\u0275element(8, "img", 5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "ion-label");
    \u0275\u0275text(10, "myclub");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(11, "ion-list", 6)(12, "ion-note");
    \u0275\u0275text(13);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "ion-menu-toggle", 7)(15, "ion-item", 8);
    \u0275\u0275element(16, "ion-icon", 9);
    \u0275\u0275elementStart(17, "ion-label");
    \u0275\u0275text(18);
    \u0275\u0275pipe(19, "translate");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(20, "ion-item", 8);
    \u0275\u0275element(21, "ion-icon", 10);
    \u0275\u0275elementStart(22, "ion-label");
    \u0275\u0275text(23);
    \u0275\u0275pipe(24, "translate");
    \u0275\u0275elementEnd()();
    \u0275\u0275template(25, AppComponent_ng_container_25_Template, 2, 1, "ng-container", 11);
    \u0275\u0275pipe(26, "async");
    \u0275\u0275elementStart(27, "ion-item", 8);
    \u0275\u0275element(28, "ion-icon", 12);
    \u0275\u0275elementStart(29, "ion-label");
    \u0275\u0275text(30);
    \u0275\u0275pipe(31, "translate");
    \u0275\u0275elementEnd()();
    \u0275\u0275template(32, AppComponent_ng_container_32_Template, 2, 1, "ng-container", 11);
    \u0275\u0275pipe(33, "async");
    \u0275\u0275elementStart(34, "ion-item", 8);
    \u0275\u0275element(35, "ion-icon", 13);
    \u0275\u0275elementStart(36, "ion-label");
    \u0275\u0275text(37);
    \u0275\u0275pipe(38, "translate");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(39, "ion-item", 8);
    \u0275\u0275element(40, "ion-icon", 14);
    \u0275\u0275elementStart(41, "ion-label");
    \u0275\u0275text(42);
    \u0275\u0275pipe(43, "translate");
    \u0275\u0275elementEnd()()()()();
    \u0275\u0275elementStart(44, "ion-accordion", 15)(45, "ion-item", 16);
    \u0275\u0275element(46, "ion-icon", 17);
    \u0275\u0275elementStart(47, "ion-label");
    \u0275\u0275text(48);
    \u0275\u0275pipe(49, "translate");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(50, "ion-list", 6)(51, "ion-menu-toggle", 7)(52, "ion-item", 8)(53, "ion-label");
    \u0275\u0275text(54);
    \u0275\u0275pipe(55, "translate");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(56, "ion-item", 8)(57, "ion-label");
    \u0275\u0275text(58);
    \u0275\u0275pipe(59, "translate");
    \u0275\u0275elementEnd()()()()()();
    \u0275\u0275elementStart(60, "ion-list")(61, "ion-item", 18);
    \u0275\u0275listener("click", function AppComponent_Template_ion_item_click_61_listener() {
      return ctx.logout();
    });
    \u0275\u0275element(62, "ion-icon", 19);
    \u0275\u0275elementStart(63, "ion-label");
    \u0275\u0275text(64);
    \u0275\u0275pipe(65, "translate");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(66, "ion-button", 18);
    \u0275\u0275listener("click", function AppComponent_Template_ion_button_click_66_listener() {
      return ctx.logout();
    });
    \u0275\u0275text(67);
    \u0275\u0275pipe(68, "translate");
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(69, "ion-note");
    \u0275\u0275text(70);
    \u0275\u0275pipe(71, "translate");
    \u0275\u0275elementEnd()()();
    \u0275\u0275element(72, "ion-router-outlet", 20);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    \u0275\u0275advance(13);
    \u0275\u0275textInterpolate(ctx.email);
    \u0275\u0275advance(2);
    \u0275\u0275property("routerLink", \u0275\u0275pureFunction0(49, _c0));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(19, 23, "common.news"));
    \u0275\u0275advance(2);
    \u0275\u0275property("routerLink", \u0275\u0275pureFunction0(50, _c1));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(24, 25, "common.training"));
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", \u0275\u0275pipeBind1(26, 27, ctx.clubList$));
    \u0275\u0275advance(2);
    \u0275\u0275property("routerLink", \u0275\u0275pureFunction0(51, _c2));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(31, 29, "common.events"));
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", \u0275\u0275pipeBind1(33, 31, ctx.clubList$));
    \u0275\u0275advance(2);
    \u0275\u0275property("routerLink", \u0275\u0275pureFunction0(52, _c3));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(38, 33, "common.profile"));
    \u0275\u0275advance(2);
    \u0275\u0275property("routerLink", \u0275\u0275pureFunction0(53, _c4));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(43, 35, "side_bar.info__and__help"));
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(49, 37, "side_bar.administration"));
    \u0275\u0275advance(4);
    \u0275\u0275property("routerLink", \u0275\u0275pureFunction0(54, _c5));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(55, 39, "side_bar.my__club"));
    \u0275\u0275advance(2);
    \u0275\u0275property("routerLink", \u0275\u0275pureFunction0(55, _c6));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(59, 41, "side_bar.my__team"));
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(65, 43, "common.logout"), "");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(68, 45, "common.logout"));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate3(" ", \u0275\u0275pipeBind1(71, 47, "side_bar.version"), " ", ctx.appVersion, "(", ctx.buildNumber, ") ");
  }
}, dependencies: [NgIf, IonAccordion, IonAccordionGroup, IonApp, IonButton, IonContent, IonIcon, IonItem, IonLabel, IonList, IonMenu, IonMenuToggle, IonNote, IonSplitPane, IonThumbnail, IonRouterOutlet, RouterLinkDelegateDirective, RouterLink, RouterLinkActive, AsyncPipe, TranslatePipe], styles: ["\n\nion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  object-fit: contain;\n}\nion-menu[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%] {\n  margin-bottom: 30px;\n}\nion-menu[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%], \nion-menu[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%] {\n  padding-left: 20px;\n}\n.ios[_ngcontent-%COMP%]   .notch-padding[_ngcontent-%COMP%] {\n  padding-top: 40px !important;\n}\n/*# sourceMappingURL=app.component.css.map */"] });
var AppComponent = _AppComponent;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(AppComponent, { className: "AppComponent", filePath: "src/app/app.component.ts", lineNumber: 41 });
})();

// src/app/app-routing.module.ts
var redirectToLogin = () => redirectUnauthorizedTo(["login"]);
var routes = [
  {
    path: "",
    loadChildren: () => import("./tabs.module-OETTJSZK.js").then((m) => m.TabsPageModule),
    canActivate: [AuthGuard],
    data: { authGuardPipe: redirectToLogin }
  },
  {
    path: "login",
    loadChildren: () => import("./login.module-SX6OGXZR.js").then((m) => m.LoginPageModule)
  },
  {
    path: "logout",
    loadChildren: () => import("./logout.module-5YNIWL5Y.js").then((m) => m.LogoutPageModule)
  },
  {
    path: "signup",
    loadChildren: () => import("./signup.module-KOALEJUW.js").then((m) => m.SignupPageModule)
  },
  {
    path: "follow",
    loadChildren: () => import("./follow.module-DJHB2KBV.js").then((m) => m.FollowPageModule)
  },
  {
    path: "club-list",
    loadChildren: () => import("./club-list.module-4WWSO7OX.js").then((m) => m.ClubListPageModule)
  },
  {
    path: "team-list",
    loadChildren: () => import("./team-list.module-2JF5A3BI.js").then((m) => m.TeamListPageModule)
  },
  {
    path: "news",
    loadChildren: () => import("./news.module-BZP655GE.js").then((m) => m.NewsPageModule)
  },
  {
    path: "reset-password",
    loadChildren: () => import("./reset-password.module-A4MSTRXD.js").then((m) => m.ResetPasswordPageModule)
  },
  {
    path: "profile",
    loadChildren: () => import("./profile.module-AJNOUL4I.js").then((m) => m.ProfilePageModule)
  },
  {
    path: "trainings",
    loadChildren: () => import("./trainings.module-KP362J7H.js").then((m) => m.TrainingsPageModule)
  },
  {
    path: "events",
    loadChildren: () => import("./events.module-E325LFYW.js").then((m) => m.EventsPageModule)
  },
  {
    path: "championship",
    loadChildren: () => import("./championship.module-EQFR7BCP.js").then((m) => m.ChampionshipPageModule)
  },
  {
    path: "onboarding",
    loadChildren: () => import("./onboarding.module-2ZOZ6KLD.js").then((m) => m.OnboardingPageModule)
  },
  {
    path: "onboarding-club",
    loadChildren: () => import("./onboarding-club.module-KSNNQXUE.js").then((m) => m.OnboardingClubPageModule)
  },
  {
    path: "onboarding-email",
    loadChildren: () => import("./onboarding-email.module-ETYLUQS2.js").then((m) => m.OnboardingEmailPageModule)
  },
  {
    path: "onboarding-team",
    loadChildren: () => import("./onboarding-team.module-BJYU3QHL.js").then((m) => m.OnboardingTeamPageModule)
  },
  {
    path: "info",
    loadChildren: () => import("./info.module-X6INYXYE.js").then((m) => m.InfoPageModule)
  },
  {
    path: "championship-details",
    loadChildren: () => import("./championship-detail.module-IQHDB6DX.js").then((m) => m.ChampionshipDetailPageModule)
  },
  {
    path: "helfer",
    loadChildren: () => import("./helfer.module-HQO2J7N3.js").then((m) => m.HelferPageModule)
  },
  {
    path: "lineup",
    loadChildren: () => import("./lineup.module-3TVUNEU3.js").then((m) => m.LineupPageModule)
  },
  {
    path: "**",
    loadChildren: () => import("./not-found.module-LWCEOSLX.js").then((m) => m.NotFoundPageModule)
  }
];
var _AppRoutingModule = class _AppRoutingModule {
};
_AppRoutingModule.\u0275fac = function AppRoutingModule_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AppRoutingModule)();
};
_AppRoutingModule.\u0275mod = /* @__PURE__ */ \u0275\u0275defineNgModule({ type: _AppRoutingModule });
_AppRoutingModule.\u0275inj = /* @__PURE__ */ \u0275\u0275defineInjector({ imports: [RouterModule.forRoot(routes, { preloadingStrategy: PreloadAllModules }), RouterModule] });
var AppRoutingModule = _AppRoutingModule;

// node_modules/@firebase/messaging/dist/esm/index.esm2017.js
var DEFAULT_SW_PATH = "/firebase-messaging-sw.js";
var DEFAULT_SW_SCOPE = "/firebase-cloud-messaging-push-scope";
var DEFAULT_VAPID_KEY = "BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";
var ENDPOINT = "https://fcmregistrations.googleapis.com/v1";
var CONSOLE_CAMPAIGN_ID = "google.c.a.c_id";
var CONSOLE_CAMPAIGN_NAME = "google.c.a.c_l";
var CONSOLE_CAMPAIGN_TIME = "google.c.a.ts";
var CONSOLE_CAMPAIGN_ANALYTICS_ENABLED = "google.c.a.e";
var DEFAULT_REGISTRATION_TIMEOUT = 1e4;
var MessageType$1;
(function(MessageType2) {
  MessageType2[MessageType2["DATA_MESSAGE"] = 1] = "DATA_MESSAGE";
  MessageType2[MessageType2["DISPLAY_NOTIFICATION"] = 3] = "DISPLAY_NOTIFICATION";
})(MessageType$1 || (MessageType$1 = {}));
var MessageType;
(function(MessageType2) {
  MessageType2["PUSH_RECEIVED"] = "push-received";
  MessageType2["NOTIFICATION_CLICKED"] = "notification-clicked";
})(MessageType || (MessageType = {}));
function arrayToBase64(array) {
  const uint8Array = new Uint8Array(array);
  const base64String = btoa(String.fromCharCode(...uint8Array));
  return base64String.replace(/=/g, "").replace(/\+/g, "-").replace(/\//g, "_");
}
function base64ToArray(base64String) {
  const padding = "=".repeat((4 - base64String.length % 4) % 4);
  const base64 = (base64String + padding).replace(/\-/g, "+").replace(/_/g, "/");
  const rawData = atob(base64);
  const outputArray = new Uint8Array(rawData.length);
  for (let i = 0; i < rawData.length; ++i) {
    outputArray[i] = rawData.charCodeAt(i);
  }
  return outputArray;
}
var OLD_DB_NAME = "fcm_token_details_db";
var OLD_DB_VERSION = 5;
var OLD_OBJECT_STORE_NAME = "fcm_token_object_Store";
function migrateOldDatabase(senderId) {
  return __async(this, null, function* () {
    if ("databases" in indexedDB) {
      const databases = yield indexedDB.databases();
      const dbNames = databases.map((db2) => db2.name);
      if (!dbNames.includes(OLD_DB_NAME)) {
        return null;
      }
    }
    let tokenDetails = null;
    const db = yield openDB(OLD_DB_NAME, OLD_DB_VERSION, {
      upgrade: (db2, oldVersion, newVersion, upgradeTransaction) => __async(this, null, function* () {
        var _a;
        if (oldVersion < 2) {
          return;
        }
        if (!db2.objectStoreNames.contains(OLD_OBJECT_STORE_NAME)) {
          return;
        }
        const objectStore = upgradeTransaction.objectStore(OLD_OBJECT_STORE_NAME);
        const value = yield objectStore.index("fcmSenderId").get(senderId);
        yield objectStore.clear();
        if (!value) {
          return;
        }
        if (oldVersion === 2) {
          const oldDetails = value;
          if (!oldDetails.auth || !oldDetails.p256dh || !oldDetails.endpoint) {
            return;
          }
          tokenDetails = {
            token: oldDetails.fcmToken,
            createTime: (_a = oldDetails.createTime) !== null && _a !== void 0 ? _a : Date.now(),
            subscriptionOptions: {
              auth: oldDetails.auth,
              p256dh: oldDetails.p256dh,
              endpoint: oldDetails.endpoint,
              swScope: oldDetails.swScope,
              vapidKey: typeof oldDetails.vapidKey === "string" ? oldDetails.vapidKey : arrayToBase64(oldDetails.vapidKey)
            }
          };
        } else if (oldVersion === 3) {
          const oldDetails = value;
          tokenDetails = {
            token: oldDetails.fcmToken,
            createTime: oldDetails.createTime,
            subscriptionOptions: {
              auth: arrayToBase64(oldDetails.auth),
              p256dh: arrayToBase64(oldDetails.p256dh),
              endpoint: oldDetails.endpoint,
              swScope: oldDetails.swScope,
              vapidKey: arrayToBase64(oldDetails.vapidKey)
            }
          };
        } else if (oldVersion === 4) {
          const oldDetails = value;
          tokenDetails = {
            token: oldDetails.fcmToken,
            createTime: oldDetails.createTime,
            subscriptionOptions: {
              auth: arrayToBase64(oldDetails.auth),
              p256dh: arrayToBase64(oldDetails.p256dh),
              endpoint: oldDetails.endpoint,
              swScope: oldDetails.swScope,
              vapidKey: arrayToBase64(oldDetails.vapidKey)
            }
          };
        }
      })
    });
    db.close();
    yield deleteDB(OLD_DB_NAME);
    yield deleteDB("fcm_vapid_details_db");
    yield deleteDB("undefined");
    return checkTokenDetails(tokenDetails) ? tokenDetails : null;
  });
}
function checkTokenDetails(tokenDetails) {
  if (!tokenDetails || !tokenDetails.subscriptionOptions) {
    return false;
  }
  const {
    subscriptionOptions
  } = tokenDetails;
  return typeof tokenDetails.createTime === "number" && tokenDetails.createTime > 0 && typeof tokenDetails.token === "string" && tokenDetails.token.length > 0 && typeof subscriptionOptions.auth === "string" && subscriptionOptions.auth.length > 0 && typeof subscriptionOptions.p256dh === "string" && subscriptionOptions.p256dh.length > 0 && typeof subscriptionOptions.endpoint === "string" && subscriptionOptions.endpoint.length > 0 && typeof subscriptionOptions.swScope === "string" && subscriptionOptions.swScope.length > 0 && typeof subscriptionOptions.vapidKey === "string" && subscriptionOptions.vapidKey.length > 0;
}
var DATABASE_NAME = "firebase-messaging-database";
var DATABASE_VERSION = 1;
var OBJECT_STORE_NAME = "firebase-messaging-store";
var dbPromise = null;
function getDbPromise() {
  if (!dbPromise) {
    dbPromise = openDB(DATABASE_NAME, DATABASE_VERSION, {
      upgrade: (upgradeDb, oldVersion) => {
        switch (oldVersion) {
          case 0:
            upgradeDb.createObjectStore(OBJECT_STORE_NAME);
        }
      }
    });
  }
  return dbPromise;
}
function dbGet(firebaseDependencies) {
  return __async(this, null, function* () {
    const key = getKey(firebaseDependencies);
    const db = yield getDbPromise();
    const tokenDetails = yield db.transaction(OBJECT_STORE_NAME).objectStore(OBJECT_STORE_NAME).get(key);
    if (tokenDetails) {
      return tokenDetails;
    } else {
      const oldTokenDetails = yield migrateOldDatabase(firebaseDependencies.appConfig.senderId);
      if (oldTokenDetails) {
        yield dbSet(firebaseDependencies, oldTokenDetails);
        return oldTokenDetails;
      }
    }
  });
}
function dbSet(firebaseDependencies, tokenDetails) {
  return __async(this, null, function* () {
    const key = getKey(firebaseDependencies);
    const db = yield getDbPromise();
    const tx = db.transaction(OBJECT_STORE_NAME, "readwrite");
    yield tx.objectStore(OBJECT_STORE_NAME).put(tokenDetails, key);
    yield tx.done;
    return tokenDetails;
  });
}
function dbRemove(firebaseDependencies) {
  return __async(this, null, function* () {
    const key = getKey(firebaseDependencies);
    const db = yield getDbPromise();
    const tx = db.transaction(OBJECT_STORE_NAME, "readwrite");
    yield tx.objectStore(OBJECT_STORE_NAME).delete(key);
    yield tx.done;
  });
}
function getKey({
  appConfig
}) {
  return appConfig.appId;
}
var ERROR_MAP = {
  [
    "missing-app-config-values"
    /* ErrorCode.MISSING_APP_CONFIG_VALUES */
  ]: 'Missing App configuration value: "{$valueName}"',
  [
    "only-available-in-window"
    /* ErrorCode.AVAILABLE_IN_WINDOW */
  ]: "This method is available in a Window context.",
  [
    "only-available-in-sw"
    /* ErrorCode.AVAILABLE_IN_SW */
  ]: "This method is available in a service worker context.",
  [
    "permission-default"
    /* ErrorCode.PERMISSION_DEFAULT */
  ]: "The notification permission was not granted and dismissed instead.",
  [
    "permission-blocked"
    /* ErrorCode.PERMISSION_BLOCKED */
  ]: "The notification permission was not granted and blocked instead.",
  [
    "unsupported-browser"
    /* ErrorCode.UNSUPPORTED_BROWSER */
  ]: "This browser doesn't support the API's required to use the Firebase SDK.",
  [
    "indexed-db-unsupported"
    /* ErrorCode.INDEXED_DB_UNSUPPORTED */
  ]: "This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",
  [
    "failed-service-worker-registration"
    /* ErrorCode.FAILED_DEFAULT_REGISTRATION */
  ]: "We are unable to register the default service worker. {$browserErrorMessage}",
  [
    "token-subscribe-failed"
    /* ErrorCode.TOKEN_SUBSCRIBE_FAILED */
  ]: "A problem occurred while subscribing the user to FCM: {$errorInfo}",
  [
    "token-subscribe-no-token"
    /* ErrorCode.TOKEN_SUBSCRIBE_NO_TOKEN */
  ]: "FCM returned no token when subscribing the user to push.",
  [
    "token-unsubscribe-failed"
    /* ErrorCode.TOKEN_UNSUBSCRIBE_FAILED */
  ]: "A problem occurred while unsubscribing the user from FCM: {$errorInfo}",
  [
    "token-update-failed"
    /* ErrorCode.TOKEN_UPDATE_FAILED */
  ]: "A problem occurred while updating the user from FCM: {$errorInfo}",
  [
    "token-update-no-token"
    /* ErrorCode.TOKEN_UPDATE_NO_TOKEN */
  ]: "FCM returned no token when updating the user to push.",
  [
    "use-sw-after-get-token"
    /* ErrorCode.USE_SW_AFTER_GET_TOKEN */
  ]: "The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",
  [
    "invalid-sw-registration"
    /* ErrorCode.INVALID_SW_REGISTRATION */
  ]: "The input to useServiceWorker() must be a ServiceWorkerRegistration.",
  [
    "invalid-bg-handler"
    /* ErrorCode.INVALID_BG_HANDLER */
  ]: "The input to setBackgroundMessageHandler() must be a function.",
  [
    "invalid-vapid-key"
    /* ErrorCode.INVALID_VAPID_KEY */
  ]: "The public VAPID key must be a string.",
  [
    "use-vapid-key-after-get-token"
    /* ErrorCode.USE_VAPID_KEY_AFTER_GET_TOKEN */
  ]: "The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."
};
var ERROR_FACTORY = new ErrorFactory("messaging", "Messaging", ERROR_MAP);
function requestGetToken(firebaseDependencies, subscriptionOptions) {
  return __async(this, null, function* () {
    const headers = yield getHeaders(firebaseDependencies);
    const body = getBody(subscriptionOptions);
    const subscribeOptions = {
      method: "POST",
      headers,
      body: JSON.stringify(body)
    };
    let responseData;
    try {
      const response = yield fetch(getEndpoint(firebaseDependencies.appConfig), subscribeOptions);
      responseData = yield response.json();
    } catch (err) {
      throw ERROR_FACTORY.create("token-subscribe-failed", {
        errorInfo: err === null || err === void 0 ? void 0 : err.toString()
      });
    }
    if (responseData.error) {
      const message = responseData.error.message;
      throw ERROR_FACTORY.create("token-subscribe-failed", {
        errorInfo: message
      });
    }
    if (!responseData.token) {
      throw ERROR_FACTORY.create(
        "token-subscribe-no-token"
        /* ErrorCode.TOKEN_SUBSCRIBE_NO_TOKEN */
      );
    }
    return responseData.token;
  });
}
function requestUpdateToken(firebaseDependencies, tokenDetails) {
  return __async(this, null, function* () {
    const headers = yield getHeaders(firebaseDependencies);
    const body = getBody(tokenDetails.subscriptionOptions);
    const updateOptions = {
      method: "PATCH",
      headers,
      body: JSON.stringify(body)
    };
    let responseData;
    try {
      const response = yield fetch(`${getEndpoint(firebaseDependencies.appConfig)}/${tokenDetails.token}`, updateOptions);
      responseData = yield response.json();
    } catch (err) {
      throw ERROR_FACTORY.create("token-update-failed", {
        errorInfo: err === null || err === void 0 ? void 0 : err.toString()
      });
    }
    if (responseData.error) {
      const message = responseData.error.message;
      throw ERROR_FACTORY.create("token-update-failed", {
        errorInfo: message
      });
    }
    if (!responseData.token) {
      throw ERROR_FACTORY.create(
        "token-update-no-token"
        /* ErrorCode.TOKEN_UPDATE_NO_TOKEN */
      );
    }
    return responseData.token;
  });
}
function requestDeleteToken(firebaseDependencies, token) {
  return __async(this, null, function* () {
    const headers = yield getHeaders(firebaseDependencies);
    const unsubscribeOptions = {
      method: "DELETE",
      headers
    };
    try {
      const response = yield fetch(`${getEndpoint(firebaseDependencies.appConfig)}/${token}`, unsubscribeOptions);
      const responseData = yield response.json();
      if (responseData.error) {
        const message = responseData.error.message;
        throw ERROR_FACTORY.create("token-unsubscribe-failed", {
          errorInfo: message
        });
      }
    } catch (err) {
      throw ERROR_FACTORY.create("token-unsubscribe-failed", {
        errorInfo: err === null || err === void 0 ? void 0 : err.toString()
      });
    }
  });
}
function getEndpoint({
  projectId
}) {
  return `${ENDPOINT}/projects/${projectId}/registrations`;
}
function getHeaders(_0) {
  return __async(this, arguments, function* ({
    appConfig,
    installations
  }) {
    const authToken = yield installations.getToken();
    return new Headers({
      "Content-Type": "application/json",
      Accept: "application/json",
      "x-goog-api-key": appConfig.apiKey,
      "x-goog-firebase-installations-auth": `FIS ${authToken}`
    });
  });
}
function getBody({
  p256dh,
  auth,
  endpoint,
  vapidKey
}) {
  const body = {
    web: {
      endpoint,
      auth,
      p256dh
    }
  };
  if (vapidKey !== DEFAULT_VAPID_KEY) {
    body.web.applicationPubKey = vapidKey;
  }
  return body;
}
var TOKEN_EXPIRATION_MS = 7 * 24 * 60 * 60 * 1e3;
function getTokenInternal(messaging) {
  return __async(this, null, function* () {
    const pushSubscription = yield getPushSubscription(messaging.swRegistration, messaging.vapidKey);
    const subscriptionOptions = {
      vapidKey: messaging.vapidKey,
      swScope: messaging.swRegistration.scope,
      endpoint: pushSubscription.endpoint,
      auth: arrayToBase64(pushSubscription.getKey("auth")),
      p256dh: arrayToBase64(pushSubscription.getKey("p256dh"))
    };
    const tokenDetails = yield dbGet(messaging.firebaseDependencies);
    if (!tokenDetails) {
      return getNewToken(messaging.firebaseDependencies, subscriptionOptions);
    } else if (!isTokenValid(tokenDetails.subscriptionOptions, subscriptionOptions)) {
      try {
        yield requestDeleteToken(messaging.firebaseDependencies, tokenDetails.token);
      } catch (e) {
        console.warn(e);
      }
      return getNewToken(messaging.firebaseDependencies, subscriptionOptions);
    } else if (Date.now() >= tokenDetails.createTime + TOKEN_EXPIRATION_MS) {
      return updateToken(messaging, {
        token: tokenDetails.token,
        createTime: Date.now(),
        subscriptionOptions
      });
    } else {
      return tokenDetails.token;
    }
  });
}
function deleteTokenInternal(messaging) {
  return __async(this, null, function* () {
    const tokenDetails = yield dbGet(messaging.firebaseDependencies);
    if (tokenDetails) {
      yield requestDeleteToken(messaging.firebaseDependencies, tokenDetails.token);
      yield dbRemove(messaging.firebaseDependencies);
    }
    const pushSubscription = yield messaging.swRegistration.pushManager.getSubscription();
    if (pushSubscription) {
      return pushSubscription.unsubscribe();
    }
    return true;
  });
}
function updateToken(messaging, tokenDetails) {
  return __async(this, null, function* () {
    try {
      const updatedToken = yield requestUpdateToken(messaging.firebaseDependencies, tokenDetails);
      const updatedTokenDetails = Object.assign(Object.assign({}, tokenDetails), {
        token: updatedToken,
        createTime: Date.now()
      });
      yield dbSet(messaging.firebaseDependencies, updatedTokenDetails);
      return updatedToken;
    } catch (e) {
      throw e;
    }
  });
}
function getNewToken(firebaseDependencies, subscriptionOptions) {
  return __async(this, null, function* () {
    const token = yield requestGetToken(firebaseDependencies, subscriptionOptions);
    const tokenDetails = {
      token,
      createTime: Date.now(),
      subscriptionOptions
    };
    yield dbSet(firebaseDependencies, tokenDetails);
    return tokenDetails.token;
  });
}
function getPushSubscription(swRegistration, vapidKey) {
  return __async(this, null, function* () {
    const subscription = yield swRegistration.pushManager.getSubscription();
    if (subscription) {
      return subscription;
    }
    return swRegistration.pushManager.subscribe({
      userVisibleOnly: true,
      // Chrome <= 75 doesn't support base64-encoded VAPID key. For backward compatibility, VAPID key
      // submitted to pushManager#subscribe must be of type Uint8Array.
      applicationServerKey: base64ToArray(vapidKey)
    });
  });
}
function isTokenValid(dbOptions, currentOptions) {
  const isVapidKeyEqual = currentOptions.vapidKey === dbOptions.vapidKey;
  const isEndpointEqual = currentOptions.endpoint === dbOptions.endpoint;
  const isAuthEqual = currentOptions.auth === dbOptions.auth;
  const isP256dhEqual = currentOptions.p256dh === dbOptions.p256dh;
  return isVapidKeyEqual && isEndpointEqual && isAuthEqual && isP256dhEqual;
}
function externalizePayload(internalPayload) {
  const payload = {
    from: internalPayload.from,
    // eslint-disable-next-line camelcase
    collapseKey: internalPayload.collapse_key,
    // eslint-disable-next-line camelcase
    messageId: internalPayload.fcmMessageId
  };
  propagateNotificationPayload(payload, internalPayload);
  propagateDataPayload(payload, internalPayload);
  propagateFcmOptions(payload, internalPayload);
  return payload;
}
function propagateNotificationPayload(payload, messagePayloadInternal) {
  if (!messagePayloadInternal.notification) {
    return;
  }
  payload.notification = {};
  const title = messagePayloadInternal.notification.title;
  if (!!title) {
    payload.notification.title = title;
  }
  const body = messagePayloadInternal.notification.body;
  if (!!body) {
    payload.notification.body = body;
  }
  const image = messagePayloadInternal.notification.image;
  if (!!image) {
    payload.notification.image = image;
  }
  const icon = messagePayloadInternal.notification.icon;
  if (!!icon) {
    payload.notification.icon = icon;
  }
}
function propagateDataPayload(payload, messagePayloadInternal) {
  if (!messagePayloadInternal.data) {
    return;
  }
  payload.data = messagePayloadInternal.data;
}
function propagateFcmOptions(payload, messagePayloadInternal) {
  var _a, _b, _c, _d, _e;
  if (!messagePayloadInternal.fcmOptions && !((_a = messagePayloadInternal.notification) === null || _a === void 0 ? void 0 : _a.click_action)) {
    return;
  }
  payload.fcmOptions = {};
  const link = (_c = (_b = messagePayloadInternal.fcmOptions) === null || _b === void 0 ? void 0 : _b.link) !== null && _c !== void 0 ? _c : (_d = messagePayloadInternal.notification) === null || _d === void 0 ? void 0 : _d.click_action;
  if (!!link) {
    payload.fcmOptions.link = link;
  }
  const analyticsLabel = (_e = messagePayloadInternal.fcmOptions) === null || _e === void 0 ? void 0 : _e.analytics_label;
  if (!!analyticsLabel) {
    payload.fcmOptions.analyticsLabel = analyticsLabel;
  }
}
function isConsoleMessage(data) {
  return typeof data === "object" && !!data && CONSOLE_CAMPAIGN_ID in data;
}
_mergeStrings("AzSCbw63g1R0nCw85jG8", "Iaya3yLKwmgvh7cF0q4");
function _mergeStrings(s1, s2) {
  const resultArray = [];
  for (let i = 0; i < s1.length; i++) {
    resultArray.push(s1.charAt(i));
    if (i < s2.length) {
      resultArray.push(s2.charAt(i));
    }
  }
  return resultArray.join("");
}
function extractAppConfig(app) {
  if (!app || !app.options) {
    throw getMissingValueError("App Configuration Object");
  }
  if (!app.name) {
    throw getMissingValueError("App Name");
  }
  const configKeys = ["projectId", "apiKey", "appId", "messagingSenderId"];
  const {
    options
  } = app;
  for (const keyName of configKeys) {
    if (!options[keyName]) {
      throw getMissingValueError(keyName);
    }
  }
  return {
    appName: app.name,
    projectId: options.projectId,
    apiKey: options.apiKey,
    appId: options.appId,
    senderId: options.messagingSenderId
  };
}
function getMissingValueError(valueName) {
  return ERROR_FACTORY.create("missing-app-config-values", {
    valueName
  });
}
var MessagingService = class {
  constructor(app, installations, analyticsProvider) {
    this.deliveryMetricsExportedToBigQueryEnabled = false;
    this.onBackgroundMessageHandler = null;
    this.onMessageHandler = null;
    this.logEvents = [];
    this.isLogServiceStarted = false;
    const appConfig = extractAppConfig(app);
    this.firebaseDependencies = {
      app,
      appConfig,
      installations,
      analyticsProvider
    };
  }
  _delete() {
    return Promise.resolve();
  }
};
function registerDefaultSw(messaging) {
  return __async(this, null, function* () {
    try {
      messaging.swRegistration = yield navigator.serviceWorker.register(DEFAULT_SW_PATH, {
        scope: DEFAULT_SW_SCOPE
      });
      messaging.swRegistration.update().catch(() => {
      });
      yield waitForRegistrationActive(messaging.swRegistration);
    } catch (e) {
      throw ERROR_FACTORY.create("failed-service-worker-registration", {
        browserErrorMessage: e === null || e === void 0 ? void 0 : e.message
      });
    }
  });
}
function waitForRegistrationActive(registration) {
  return __async(this, null, function* () {
    return new Promise((resolve, reject) => {
      const rejectTimeout = setTimeout(() => reject(new Error(`Service worker not registered after ${DEFAULT_REGISTRATION_TIMEOUT} ms`)), DEFAULT_REGISTRATION_TIMEOUT);
      const incomingSw = registration.installing || registration.waiting;
      if (registration.active) {
        clearTimeout(rejectTimeout);
        resolve();
      } else if (incomingSw) {
        incomingSw.onstatechange = (ev) => {
          var _a;
          if (((_a = ev.target) === null || _a === void 0 ? void 0 : _a.state) === "activated") {
            incomingSw.onstatechange = null;
            clearTimeout(rejectTimeout);
            resolve();
          }
        };
      } else {
        clearTimeout(rejectTimeout);
        reject(new Error("No incoming service worker found."));
      }
    });
  });
}
function updateSwReg(messaging, swRegistration) {
  return __async(this, null, function* () {
    if (!swRegistration && !messaging.swRegistration) {
      yield registerDefaultSw(messaging);
    }
    if (!swRegistration && !!messaging.swRegistration) {
      return;
    }
    if (!(swRegistration instanceof ServiceWorkerRegistration)) {
      throw ERROR_FACTORY.create(
        "invalid-sw-registration"
        /* ErrorCode.INVALID_SW_REGISTRATION */
      );
    }
    messaging.swRegistration = swRegistration;
  });
}
function updateVapidKey(messaging, vapidKey) {
  return __async(this, null, function* () {
    if (!!vapidKey) {
      messaging.vapidKey = vapidKey;
    } else if (!messaging.vapidKey) {
      messaging.vapidKey = DEFAULT_VAPID_KEY;
    }
  });
}
function getToken$1(messaging, options) {
  return __async(this, null, function* () {
    if (!navigator) {
      throw ERROR_FACTORY.create(
        "only-available-in-window"
        /* ErrorCode.AVAILABLE_IN_WINDOW */
      );
    }
    if (Notification.permission === "default") {
      yield Notification.requestPermission();
    }
    if (Notification.permission !== "granted") {
      throw ERROR_FACTORY.create(
        "permission-blocked"
        /* ErrorCode.PERMISSION_BLOCKED */
      );
    }
    yield updateVapidKey(messaging, options === null || options === void 0 ? void 0 : options.vapidKey);
    yield updateSwReg(messaging, options === null || options === void 0 ? void 0 : options.serviceWorkerRegistration);
    return getTokenInternal(messaging);
  });
}
function logToScion(messaging, messageType, data) {
  return __async(this, null, function* () {
    const eventType = getEventType(messageType);
    const analytics = yield messaging.firebaseDependencies.analyticsProvider.get();
    analytics.logEvent(eventType, {
      /* eslint-disable camelcase */
      message_id: data[CONSOLE_CAMPAIGN_ID],
      message_name: data[CONSOLE_CAMPAIGN_NAME],
      message_time: data[CONSOLE_CAMPAIGN_TIME],
      message_device_time: Math.floor(Date.now() / 1e3)
      /* eslint-enable camelcase */
    });
  });
}
function getEventType(messageType) {
  switch (messageType) {
    case MessageType.NOTIFICATION_CLICKED:
      return "notification_open";
    case MessageType.PUSH_RECEIVED:
      return "notification_foreground";
    default:
      throw new Error();
  }
}
function messageEventListener(messaging, event) {
  return __async(this, null, function* () {
    const internalPayload = event.data;
    if (!internalPayload.isFirebaseMessaging) {
      return;
    }
    if (messaging.onMessageHandler && internalPayload.messageType === MessageType.PUSH_RECEIVED) {
      if (typeof messaging.onMessageHandler === "function") {
        messaging.onMessageHandler(externalizePayload(internalPayload));
      } else {
        messaging.onMessageHandler.next(externalizePayload(internalPayload));
      }
    }
    const dataPayload = internalPayload.data;
    if (isConsoleMessage(dataPayload) && dataPayload[CONSOLE_CAMPAIGN_ANALYTICS_ENABLED] === "1") {
      yield logToScion(messaging, internalPayload.messageType, dataPayload);
    }
  });
}
var name = "@firebase/messaging";
var version = "0.12.17";
var WindowMessagingFactory = (container) => {
  const messaging = new MessagingService(container.getProvider("app").getImmediate(), container.getProvider("installations-internal").getImmediate(), container.getProvider("analytics-internal"));
  navigator.serviceWorker.addEventListener("message", (e) => messageEventListener(messaging, e));
  return messaging;
};
var WindowMessagingInternalFactory = (container) => {
  const messaging = container.getProvider("messaging").getImmediate();
  const messagingInternal = {
    getToken: (options) => getToken$1(messaging, options)
  };
  return messagingInternal;
};
function registerMessagingInWindow() {
  _registerComponent(new Component(
    "messaging",
    WindowMessagingFactory,
    "PUBLIC"
    /* ComponentType.PUBLIC */
  ));
  _registerComponent(new Component(
    "messaging-internal",
    WindowMessagingInternalFactory,
    "PRIVATE"
    /* ComponentType.PRIVATE */
  ));
  registerVersion(name, version);
  registerVersion(name, version, "esm2017");
}
function isWindowSupported() {
  return __async(this, null, function* () {
    try {
      yield validateIndexedDBOpenable();
    } catch (e) {
      return false;
    }
    return typeof window !== "undefined" && isIndexedDBAvailable() && areCookiesEnabled() && "serviceWorker" in navigator && "PushManager" in window && "Notification" in window && "fetch" in window && ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification") && PushSubscription.prototype.hasOwnProperty("getKey");
  });
}
function deleteToken$1(messaging) {
  return __async(this, null, function* () {
    if (!navigator) {
      throw ERROR_FACTORY.create(
        "only-available-in-window"
        /* ErrorCode.AVAILABLE_IN_WINDOW */
      );
    }
    if (!messaging.swRegistration) {
      yield registerDefaultSw(messaging);
    }
    return deleteTokenInternal(messaging);
  });
}
function onMessage$1(messaging, nextOrObserver) {
  if (!navigator) {
    throw ERROR_FACTORY.create(
      "only-available-in-window"
      /* ErrorCode.AVAILABLE_IN_WINDOW */
    );
  }
  messaging.onMessageHandler = nextOrObserver;
  return () => {
    messaging.onMessageHandler = null;
  };
}
function getMessagingInWindow(app = getApp()) {
  isWindowSupported().then((isSupported4) => {
    if (!isSupported4) {
      throw ERROR_FACTORY.create(
        "unsupported-browser"
        /* ErrorCode.UNSUPPORTED_BROWSER */
      );
    }
  }, (_) => {
    throw ERROR_FACTORY.create(
      "indexed-db-unsupported"
      /* ErrorCode.INDEXED_DB_UNSUPPORTED */
    );
  });
  return _getProvider(getModularInstance(app), "messaging").getImmediate();
}
function getToken(messaging, options) {
  return __async(this, null, function* () {
    messaging = getModularInstance(messaging);
    return getToken$1(messaging, options);
  });
}
function deleteToken(messaging) {
  messaging = getModularInstance(messaging);
  return deleteToken$1(messaging);
}
function onMessage(messaging, nextOrObserver) {
  messaging = getModularInstance(messaging);
  return onMessage$1(messaging, nextOrObserver);
}
registerMessagingInWindow();

// node_modules/@angular/fire/fesm2022/angular-fire-messaging.mjs
var Messaging = class {
  constructor(messaging) {
    return messaging;
  }
};
var MESSAGING_PROVIDER_NAME = "messaging";
var MessagingInstances = class {
  constructor() {
    return \u0275getAllInstancesOf(MESSAGING_PROVIDER_NAME);
  }
};
var messagingInstance$ = timer(0, 300).pipe(concatMap(() => from(\u0275getAllInstancesOf(MESSAGING_PROVIDER_NAME))), distinct());
var PROVIDED_MESSAGING_INSTANCES = new InjectionToken("angularfire2.messaging-instances");
function defaultMessagingInstanceFactory(provided, defaultApp, platformId) {
  if (isPlatformServer(platformId)) {
    return null;
  }
  const defaultMessaging = \u0275getDefaultInstanceOf(MESSAGING_PROVIDER_NAME, provided, defaultApp);
  return defaultMessaging && new Messaging(defaultMessaging);
}
function messagingInstanceFactory(fn) {
  return (zone, injector, platformId) => {
    if (isPlatformServer(platformId)) {
      return null;
    }
    const messaging = zone.runOutsideAngular(() => fn(injector));
    return new Messaging(messaging);
  };
}
var MESSAGING_INSTANCES_PROVIDER = {
  provide: MessagingInstances,
  deps: [[new Optional(), PROVIDED_MESSAGING_INSTANCES]]
};
var DEFAULT_MESSAGING_INSTANCE_PROVIDER = {
  provide: Messaging,
  useFactory: defaultMessagingInstanceFactory,
  deps: [[new Optional(), PROVIDED_MESSAGING_INSTANCES], FirebaseApp, PLATFORM_ID]
};
var MessagingModule = class _MessagingModule {
  constructor() {
    registerVersion("angularfire", VERSION.full, "fcm");
  }
  static \u0275fac = function MessagingModule_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _MessagingModule)();
  };
  static \u0275mod = /* @__PURE__ */ \u0275\u0275defineNgModule({
    type: _MessagingModule
  });
  static \u0275inj = /* @__PURE__ */ \u0275\u0275defineInjector({
    providers: [DEFAULT_MESSAGING_INSTANCE_PROVIDER, MESSAGING_INSTANCES_PROVIDER]
  });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(MessagingModule, [{
    type: NgModule,
    args: [{
      providers: [DEFAULT_MESSAGING_INSTANCE_PROVIDER, MESSAGING_INSTANCES_PROVIDER]
    }]
  }], () => [], null);
})();
function provideMessaging(fn, ...deps) {
  registerVersion("angularfire", VERSION.full, "fcm");
  return makeEnvironmentProviders([DEFAULT_MESSAGING_INSTANCE_PROVIDER, MESSAGING_INSTANCES_PROVIDER, {
    provide: PROVIDED_MESSAGING_INSTANCES,
    useFactory: messagingInstanceFactory(fn),
    multi: true,
    deps: [NgZone, Injector, PLATFORM_ID, \u0275AngularFireSchedulers, FirebaseApps, ...deps]
  }]);
}
var deleteToken2 = \u0275zoneWrap(deleteToken, true, 2);
var getMessaging = \u0275zoneWrap(getMessagingInWindow, true);
var getToken2 = \u0275zoneWrap(getToken, true);
var isSupported2 = \u0275zoneWrap(isWindowSupported, false);
var onMessage2 = \u0275zoneWrap(onMessage, false);

// node_modules/@angular/fire/fesm2022/angular-fire-analytics.mjs
var Analytics = class {
  constructor(analytics) {
    return analytics;
  }
};
var ANALYTICS_PROVIDER_NAME = "analytics";
var AnalyticsInstances = class {
  constructor() {
    return \u0275getAllInstancesOf(ANALYTICS_PROVIDER_NAME);
  }
};
var analyticInstance$ = timer(0, 300).pipe(concatMap(() => from(\u0275getAllInstancesOf(ANALYTICS_PROVIDER_NAME))), distinct());
var getAnalytics2 = \u0275zoneWrap(getAnalytics, true);
var getGoogleAnalyticsClientId2 = \u0275zoneWrap(getGoogleAnalyticsClientId, true);
var initializeAnalytics2 = \u0275zoneWrap(initializeAnalytics, true);
var isSupported3 = \u0275zoneWrap(isSupported, false);
var logEvent2 = \u0275zoneWrap(logEvent, false, 2);
var setAnalyticsCollectionEnabled2 = \u0275zoneWrap(setAnalyticsCollectionEnabled, true, 2);
var setConsent2 = \u0275zoneWrap(setConsent, true, 2);
var setCurrentScreen2 = \u0275zoneWrap(setCurrentScreen, true, 2);
var setDefaultEventParameters2 = \u0275zoneWrap(setDefaultEventParameters, true, 2);
var setUserId2 = \u0275zoneWrap(setUserId, true, 2);
var setUserProperties2 = \u0275zoneWrap(setUserProperties, true, 2);
var settings2 = \u0275zoneWrap(settings, true);
var UserTrackingService = class _UserTrackingService {
  initialized;
  disposables = [];
  constructor(auth, zone, injector) {
    registerVersion("angularfire", VERSION.full, "user-tracking");
    let resolveInitialized;
    this.initialized = zone.runOutsideAngular(() => new Promise((resolve) => {
      resolveInitialized = resolve;
    }));
    isSupported3().then(() => {
      const analytics = injector.get(Analytics);
      if (analytics) {
        this.disposables = [
          // TODO add credential tracking back in
          authState(auth).subscribe((user) => {
            setUserId2(analytics, user == null ? void 0 : user.uid);
            resolveInitialized();
          })
        ];
      } else {
        resolveInitialized();
      }
    });
  }
  ngOnDestroy() {
    this.disposables.forEach((it) => it.unsubscribe());
  }
  static \u0275fac = function UserTrackingService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _UserTrackingService)(\u0275\u0275inject(Auth), \u0275\u0275inject(NgZone), \u0275\u0275inject(Injector));
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({
    token: _UserTrackingService,
    factory: _UserTrackingService.\u0275fac
  });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(UserTrackingService, [{
    type: Injectable
  }], () => [{
    type: Auth
  }, {
    type: NgZone
  }, {
    type: Injector
  }], null);
})();
var FIREBASE_EVENT_ORIGIN_KEY = "firebase_event_origin";
var FIREBASE_PREVIOUS_SCREEN_CLASS_KEY = "firebase_previous_class";
var FIREBASE_PREVIOUS_SCREEN_INSTANCE_ID_KEY = "firebase_previous_id";
var FIREBASE_PREVIOUS_SCREEN_NAME_KEY = "firebase_previous_screen";
var FIREBASE_SCREEN_CLASS_KEY = "firebase_screen_class";
var FIREBASE_SCREEN_INSTANCE_ID_KEY = "firebase_screen_id";
var FIREBASE_SCREEN_NAME_KEY = "firebase_screen";
var OUTLET_KEY = "outlet";
var PAGE_PATH_KEY = "page_path";
var PAGE_TITLE_KEY = "page_title";
var SCREEN_CLASS_KEY = "screen_class";
var SCREEN_NAME_KEY = "screen_name";
var SCREEN_VIEW_EVENT = "screen_view";
var EVENT_ORIGIN_AUTO = "auto";
var SCREEN_INSTANCE_DELIMITER = "#";
var nextScreenInstanceID = Math.floor(Math.random() * (2 ** 32 - 1)) - 2 ** 31;
var knownScreenInstanceIDs = {};
var getScreenInstanceID = (params) => {
  const screenInstanceKey = [params[SCREEN_CLASS_KEY], params[OUTLET_KEY]].join(SCREEN_INSTANCE_DELIMITER);
  if (knownScreenInstanceIDs.hasOwnProperty(screenInstanceKey)) {
    return knownScreenInstanceIDs[screenInstanceKey];
  } else {
    const ret = nextScreenInstanceID++;
    knownScreenInstanceIDs[screenInstanceKey] = ret;
    return ret;
  }
};
var \u0275screenViewEvent = (router, title, componentFactoryResolver) => {
  const activationEndEvents = router.events.pipe(filter((e) => e instanceof ActivationEnd));
  return activationEndEvents.pipe(switchMap((activationEnd) => {
    var _a;
    const urlTree = router.parseUrl(router.url.replace(/(?:\().+(?:\))/g, (a) => a.replace("://", ":///")));
    const pagePath = ((_a = urlTree.root.children[activationEnd.snapshot.outlet]) == null ? void 0 : _a.toString()) || "";
    const actualSnapshot = router.routerState.root.children.map((it) => it).find((it) => it.outlet === activationEnd.snapshot.outlet);
    if (!actualSnapshot) {
      return of(null);
    }
    let actualDeep = actualSnapshot;
    while (actualDeep.firstChild) {
      actualDeep = actualDeep.firstChild;
    }
    const screenName = actualDeep.pathFromRoot.map((s) => {
      var _a2;
      return (_a2 = s.routeConfig) == null ? void 0 : _a2.path;
    }).filter((it) => it).join("/") || "/";
    const params = {
      [SCREEN_NAME_KEY]: screenName,
      [PAGE_PATH_KEY]: `/${pagePath}`,
      [FIREBASE_EVENT_ORIGIN_KEY]: EVENT_ORIGIN_AUTO,
      [FIREBASE_SCREEN_NAME_KEY]: screenName,
      [OUTLET_KEY]: activationEnd.snapshot.outlet
    };
    if (title) {
      params[PAGE_TITLE_KEY] = title.getTitle();
    }
    let component = actualSnapshot.component;
    if (component) {
      if (component === \u0275EmptyOutletComponent) {
        let deepSnapshot = activationEnd.snapshot;
        while (deepSnapshot.firstChild) {
          deepSnapshot = deepSnapshot.firstChild;
        }
        component = deepSnapshot.component;
      }
    } else {
      component = activationEnd.snapshot.component;
    }
    if (typeof component === "string") {
      return of(__spreadProps(__spreadValues({}, params), {
        [SCREEN_CLASS_KEY]: component
      }));
    } else if (component) {
      const componentFactory = componentFactoryResolver.resolveComponentFactory(component);
      return of(__spreadProps(__spreadValues({}, params), {
        [SCREEN_CLASS_KEY]: componentFactory.selector
      }));
    }
    return of(null);
  }), filter((it) => !!it), map((params) => __spreadValues({
    [FIREBASE_SCREEN_CLASS_KEY]: params[SCREEN_CLASS_KEY],
    [FIREBASE_SCREEN_INSTANCE_ID_KEY]: getScreenInstanceID(params)
  }, params)), groupBy((it) => it[OUTLET_KEY]), mergeMap((it) => it.pipe(distinctUntilChanged((a, b) => JSON.stringify(a) === JSON.stringify(b)), startWith(void 0), pairwise(), map(([prior, current]) => prior ? __spreadValues({
    [FIREBASE_PREVIOUS_SCREEN_CLASS_KEY]: prior[SCREEN_CLASS_KEY],
    [FIREBASE_PREVIOUS_SCREEN_NAME_KEY]: prior[SCREEN_NAME_KEY],
    [FIREBASE_PREVIOUS_SCREEN_INSTANCE_ID_KEY]: prior[FIREBASE_SCREEN_INSTANCE_ID_KEY]
  }, current) : current))));
};
var ScreenTrackingService = class _ScreenTrackingService {
  disposable;
  constructor(router, title, componentFactoryResolver, zone, userTrackingService, injector) {
    registerVersion("angularfire", VERSION.full, "screen-tracking");
    isSupported3().then(() => {
      const analytics = injector.get(Analytics);
      if (!router || !analytics) {
        return;
      }
      zone.runOutsideAngular(() => {
        this.disposable = \u0275screenViewEvent(router, title, componentFactoryResolver).pipe(switchMap((params) => __async(this, null, function* () {
          if (userTrackingService) {
            yield userTrackingService.initialized;
          }
          return logEvent2(analytics, SCREEN_VIEW_EVENT, params);
        }))).subscribe();
      });
    });
  }
  ngOnDestroy() {
    if (this.disposable) {
      this.disposable.unsubscribe();
    }
  }
  static \u0275fac = function ScreenTrackingService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _ScreenTrackingService)(\u0275\u0275inject(Router, 8), \u0275\u0275inject(Title, 8), \u0275\u0275inject(ComponentFactoryResolver$1), \u0275\u0275inject(NgZone), \u0275\u0275inject(UserTrackingService, 8), \u0275\u0275inject(Injector));
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({
    token: _ScreenTrackingService,
    factory: _ScreenTrackingService.\u0275fac
  });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(ScreenTrackingService, [{
    type: Injectable
  }], () => [{
    type: Router,
    decorators: [{
      type: Optional
    }]
  }, {
    type: Title,
    decorators: [{
      type: Optional
    }]
  }, {
    type: ComponentFactoryResolver$1
  }, {
    type: NgZone
  }, {
    type: UserTrackingService,
    decorators: [{
      type: Optional
    }]
  }, {
    type: Injector
  }], null);
})();
var PROVIDED_ANALYTICS_INSTANCES = new InjectionToken("angularfire2.analytics-instances");
function defaultAnalyticsInstanceFactory(provided, defaultApp, platformId) {
  if (!isPlatformBrowser(platformId)) {
    return null;
  }
  const defaultAnalytics = \u0275getDefaultInstanceOf(ANALYTICS_PROVIDER_NAME, provided, defaultApp);
  return defaultAnalytics && new Analytics(defaultAnalytics);
}
function analyticsInstanceFactory(fn) {
  return (zone, injector, platformId) => {
    if (!isPlatformBrowser(platformId)) {
      return null;
    }
    const analytics = zone.runOutsideAngular(() => fn(injector));
    return new Analytics(analytics);
  };
}
var ANALYTICS_INSTANCES_PROVIDER = {
  provide: AnalyticsInstances,
  deps: [[new Optional(), PROVIDED_ANALYTICS_INSTANCES]]
};
var DEFAULT_ANALYTICS_INSTANCE_PROVIDER = {
  provide: Analytics,
  useFactory: defaultAnalyticsInstanceFactory,
  deps: [[new Optional(), PROVIDED_ANALYTICS_INSTANCES], FirebaseApp, PLATFORM_ID]
};
var AnalyticsModule = class _AnalyticsModule {
  constructor(_screenTrackingService, _userTrackingService) {
    registerVersion("angularfire", VERSION.full, "analytics");
  }
  static \u0275fac = function AnalyticsModule_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _AnalyticsModule)(\u0275\u0275inject(ScreenTrackingService, 8), \u0275\u0275inject(UserTrackingService, 8));
  };
  static \u0275mod = /* @__PURE__ */ \u0275\u0275defineNgModule({
    type: _AnalyticsModule
  });
  static \u0275inj = /* @__PURE__ */ \u0275\u0275defineInjector({
    providers: [DEFAULT_ANALYTICS_INSTANCE_PROVIDER, ANALYTICS_INSTANCES_PROVIDER]
  });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(AnalyticsModule, [{
    type: NgModule,
    args: [{
      providers: [DEFAULT_ANALYTICS_INSTANCE_PROVIDER, ANALYTICS_INSTANCES_PROVIDER]
    }]
  }], () => [{
    type: ScreenTrackingService,
    decorators: [{
      type: Optional
    }]
  }, {
    type: UserTrackingService,
    decorators: [{
      type: Optional
    }]
  }], null);
})();
function provideAnalytics(fn, ...deps) {
  registerVersion("angularfire", VERSION.full, "analytics");
  return makeEnvironmentProviders([DEFAULT_ANALYTICS_INSTANCE_PROVIDER, ANALYTICS_INSTANCES_PROVIDER, {
    provide: PROVIDED_ANALYTICS_INSTANCES,
    useFactory: analyticsInstanceFactory(fn),
    multi: true,
    deps: [NgZone, Injector, PLATFORM_ID, \u0275AngularFireSchedulers, FirebaseApps, ...deps]
  }]);
}

// node_modules/@ngx-translate/http-loader/fesm2022/ngx-translate-http-loader.mjs
var TranslateHttpLoader = class _TranslateHttpLoader {
  http;
  prefix;
  suffix;
  constructor(http, prefix = "/assets/i18n/", suffix = ".json") {
    this.http = http;
    this.prefix = prefix;
    this.suffix = suffix;
  }
  /**
   * Gets the translations from the server
   */
  getTranslation(lang) {
    return this.http.get(`${this.prefix}${lang}${this.suffix}`);
  }
  static \u0275fac = function TranslateHttpLoader_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _TranslateHttpLoader)(\u0275\u0275inject(HttpClient), \u0275\u0275inject(String), \u0275\u0275inject(String));
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({
    token: _TranslateHttpLoader,
    factory: _TranslateHttpLoader.\u0275fac
  });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(TranslateHttpLoader, [{
    type: Injectable
  }], () => [{
    type: HttpClient
  }, {
    type: void 0,
    decorators: [{
      type: Inject,
      args: [String]
    }]
  }, {
    type: void 0,
    decorators: [{
      type: Inject,
      args: [String]
    }]
  }], null);
})();

// src/app/pages/team/team-create/team-create.page.ts
var _TeamCreatePage = class _TeamCreatePage {
  constructor() {
  }
  ngOnInit() {
  }
};
_TeamCreatePage.\u0275fac = function TeamCreatePage_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _TeamCreatePage)();
};
_TeamCreatePage.\u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _TeamCreatePage, selectors: [["app-team-create"]], standalone: false, decls: 9, vars: 2, consts: [[3, "translucent"], [3, "fullscreen"], ["collapse", "condense"], ["size", "large"]], template: function TeamCreatePage_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "ion-header", 0)(1, "ion-toolbar")(2, "ion-title");
    \u0275\u0275text(3, "team-create");
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(4, "ion-content", 1)(5, "ion-header", 2)(6, "ion-toolbar")(7, "ion-title", 3);
    \u0275\u0275text(8, "team-create");
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    \u0275\u0275property("translucent", true);
    \u0275\u0275advance(4);
    \u0275\u0275property("fullscreen", true);
  }
}, dependencies: [IonContent, IonHeader, IonTitle, IonToolbar], encapsulation: 2 });
var TeamCreatePage = _TeamCreatePage;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(TeamCreatePage, { className: "TeamCreatePage", filePath: "src/app/pages/team/team-create/team-create.page.ts", lineNumber: 9 });
})();

// src/app/app.module.ts
function HttpLoaderFactory(httpClient) {
  return new TranslateHttpLoader(httpClient, "./assets/lang/", ".json");
}
var TranslateHandler = class {
  handle(params) {
  }
};
function appInitializerFactory(translateService, injector) {
  return () => new Promise((resolve) => {
    const locationInitialized = injector.get(LOCATION_INITIALIZED, Promise.resolve(null));
    locationInitialized.then(() => {
      translateService.use("de").pipe(take(1)).subscribe(() => {
      }, (err) => console.error(err), () => resolve(null));
    });
  });
}
var getConfig = () => {
  let config = {};
  if (isPlatform("iphone")) {
  }
  return config;
};
var _AppModule = class _AppModule {
};
_AppModule.\u0275fac = function AppModule_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AppModule)();
};
_AppModule.\u0275mod = /* @__PURE__ */ \u0275\u0275defineNgModule({ type: _AppModule, bootstrap: [AppComponent] });
_AppModule.\u0275inj = /* @__PURE__ */ \u0275\u0275defineInjector({ providers: [
  provideFirebaseApp(() => {
    const init = initializeApp(environment.firebase);
    return init;
  }),
  provideFirestore(() => {
    const firestore = getFirestore();
    return firestore;
  }),
  provideAuth(() => {
    if (Capacitor.isNativePlatform()) {
      return initializeAuth(getApp2(), {
        persistence: indexedDBLocalPersistence
      });
    } else {
      return getAuth();
    }
  }),
  provideAnalytics(() => getAnalytics2()),
  provideStorage(() => getStorage()),
  provideMessaging(() => getMessaging()),
  { provide: RouteReuseStrategy, useClass: IonicRouteStrategy },
  {
    provide: APP_INITIALIZER,
    useFactory: appInitializerFactory,
    deps: [TranslateService, Injector],
    multi: true
  },
  provideHttpClient(withInterceptorsFromDi())
], imports: [
  BrowserModule,
  FontAwesomeModule,
  IonicModule.forRoot(getConfig()),
  AppRoutingModule,
  FormsModule,
  ServiceWorkerModule.register("ngsw-worker.js", {
    enabled: environment.production,
    // Register the ServiceWorker as soon as the app is stable
    // or after 30 seconds (whichever comes first).
    registrationStrategy: "registerWhenStable:30000"
  }),
  TranslateModule.forRoot({
    loader: {
      provide: TranslateLoader,
      useFactory: HttpLoaderFactory,
      deps: [HttpClient]
    },
    isolate: false,
    missingTranslationHandler: [{ provide: MissingTranslationHandler, useClass: TranslateHandler }]
  })
] });
var AppModule = _AppModule;

// node_modules/@ionic/pwa-elements/dist/esm/loader.js
var patchEsm = () => {
  return promiseResolve();
};
var defineCustomElements = (win, options) => {
  if (typeof window === "undefined") return Promise.resolve();
  return patchEsm().then(() => {
    return bootstrapLazy([["pwa-camera-modal", [[1, "pwa-camera-modal", {
      "facingMode": [1, "facing-mode"],
      "hidePicker": [4, "hide-picker"],
      "present": [64],
      "dismiss": [64]
    }]]], ["pwa-action-sheet", [[1, "pwa-action-sheet", {
      "header": [1],
      "cancelable": [4],
      "options": [16],
      "open": [32]
    }]]], ["pwa-toast", [[1, "pwa-toast", {
      "message": [1],
      "duration": [2],
      "closing": [32]
    }]]], ["pwa-camera", [[1, "pwa-camera", {
      "facingMode": [1, "facing-mode"],
      "handlePhoto": [16],
      "hidePicker": [4, "hide-picker"],
      "handleNoDeviceError": [16],
      "noDevicesText": [1, "no-devices-text"],
      "noDevicesButtonText": [1, "no-devices-button-text"],
      "photo": [32],
      "photoSrc": [32],
      "showShutterOverlay": [32],
      "flashIndex": [32],
      "hasCamera": [32],
      "rotation": [32],
      "deviceError": [32]
    }]]], ["pwa-camera-modal-instance", [[1, "pwa-camera-modal-instance", {
      "facingMode": [1, "facing-mode"],
      "hidePicker": [4, "hide-picker"],
      "noDevicesText": [1, "no-devices-text"],
      "noDevicesButtonText": [1, "no-devices-button-text"]
    }, [[16, "keyup", "handleBackdropKeyUp"]]]]]], options);
  });
};

// node_modules/web-social-share/dist/esm/loader.js
var patchEsm2 = () => {
  return promiseResolve2();
};
var defineCustomElements2 = (win, options) => {
  if (typeof window === "undefined") return Promise.resolve();
  return patchEsm2().then(() => {
    return bootstrapLazy2([["web-social-share", [[1, "web-social-share", {
      "show": [1028],
      "share": [16]
    }]]]], options);
  });
};

// node_modules/myclub-game-preview/dist/esm/app-globals-0f993ce5.js
var globalScripts = () => {
};

// node_modules/myclub-game-preview/dist/esm/loader.js
var defineCustomElements3 = (win, options) => __async(void 0, null, function* () {
  if (typeof window === "undefined") return void 0;
  yield globalScripts();
  return bootstrapLazy3([["game-preview", [[1, "game-preview", {
    "club": [1],
    "game": [1],
    "name": [32],
    "teamAway": [32],
    "teamAwayLogo": [32],
    "teamHome": [32],
    "teamHomeLogo": [32],
    "city": [32],
    "location": [32],
    "dateTime": [32],
    "date": [32],
    "time": [32],
    "liga": [32]
  }]]]], options);
});

// node_modules/myclub-game-preview/loader/index.js
(function() {
  if ("undefined" !== typeof window && void 0 !== window.Reflect && void 0 !== window.customElements) {
    var a = HTMLElement;
    window.HTMLElement = function() {
      return Reflect.construct(a, [], this.constructor);
    };
    HTMLElement.prototype = a.prototype;
    HTMLElement.prototype.constructor = HTMLElement;
    Object.setPrototypeOf(HTMLElement, a);
  }
})();

// src/main.ts
if (environment.production) {
  enableProdMode();
}
platformBrowser().bootstrapModule(AppModule).catch((err) => console.log(err));
defineCustomElements(window);
defineCustomElements2(window);
defineCustomElements3(window);
/*! Bundled license information:

@angular/service-worker/fesm2022/service-worker.mjs:
  (**
   * @license Angular v19.2.5
   * (c) 2010-2025 Google LLC. https://angular.io/
   * License: MIT
   *)
  (*!
   * @license
   * Copyright Google LLC All Rights Reserved.
   *
   * Use of this source code is governed by an MIT-style license that can be
   * found in the LICENSE file at https://angular.dev/license
   *)

@firebase/messaging/dist/esm/index.esm2017.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
   * in compliance with the License. You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software distributed under the License
   * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
   * or implied. See the License for the specific language governing permissions and limitations under
   * the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
*/
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9AY2FwYWNpdG9yL3N0YXR1cy1iYXIvZGlzdC9lc20vZGVmaW5pdGlvbnMuanMiLCJub2RlX21vZHVsZXMvQGNhcGFjaXRvci9zdGF0dXMtYmFyL2Rpc3QvZXNtL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL0BjYXBhY2l0b3IvYXBwL2Rpc3QvZXNtL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL0BjYXBhY2l0b3IvZGlhbG9nL2Rpc3QvZXNtL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL0BjYXBhY2l0b3Ivc3BsYXNoLXNjcmVlbi9kaXN0L2VzbS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9AY2FwYWNpdG9yL25ldHdvcmsvZGlzdC9lc20vaW5kZXguanMiLCJub2RlX21vZHVsZXMvQGFuZ3VsYXIvc2VydmljZS13b3JrZXIvZmVzbTIwMjIvc2VydmljZS13b3JrZXIubWpzIiwic3JjL2FwcC9hcHAuY29tcG9uZW50LnRzIiwic3JjL2FwcC9hcHAuY29tcG9uZW50Lmh0bWwiLCJzcmMvYXBwL2FwcC1yb3V0aW5nLm1vZHVsZS50cyIsIm5vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbWVzc2FnaW5nL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJub2RlX21vZHVsZXMvQGFuZ3VsYXIvZmlyZS9mZXNtMjAyMi9hbmd1bGFyLWZpcmUtbWVzc2FnaW5nLm1qcyIsIm5vZGVfbW9kdWxlcy9AYW5ndWxhci9maXJlL2Zlc20yMDIyL2FuZ3VsYXItZmlyZS1hbmFseXRpY3MubWpzIiwibm9kZV9tb2R1bGVzL0BuZ3gtdHJhbnNsYXRlL2h0dHAtbG9hZGVyL2Zlc20yMDIyL25neC10cmFuc2xhdGUtaHR0cC1sb2FkZXIubWpzIiwic3JjL2FwcC9wYWdlcy90ZWFtL3RlYW0tY3JlYXRlL3RlYW0tY3JlYXRlLnBhZ2UudHMiLCJzcmMvYXBwL3BhZ2VzL3RlYW0vdGVhbS1jcmVhdGUvdGVhbS1jcmVhdGUucGFnZS5odG1sIiwic3JjL2FwcC9hcHAubW9kdWxlLnRzIiwibm9kZV9tb2R1bGVzL0Bpb25pYy9wd2EtZWxlbWVudHMvZGlzdC9lc20vbG9hZGVyLmpzIiwibm9kZV9tb2R1bGVzL3dlYi1zb2NpYWwtc2hhcmUvZGlzdC9lc20vbG9hZGVyLmpzIiwibm9kZV9tb2R1bGVzL215Y2x1Yi1nYW1lLXByZXZpZXcvZGlzdC9lc20vYXBwLWdsb2JhbHMtMGY5OTNjZTUuanMiLCJub2RlX21vZHVsZXMvbXljbHViLWdhbWUtcHJldmlldy9kaXN0L2VzbS9sb2FkZXIuanMiLCJub2RlX21vZHVsZXMvbXljbHViLWdhbWUtcHJldmlldy9sb2FkZXIvaW5kZXguanMiLCJzcmMvbWFpbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSB0eXBlcz1cIkBjYXBhY2l0b3IvY2xpXCIgLz5cbmV4cG9ydCB2YXIgU3R5bGU7XG4oZnVuY3Rpb24gKFN0eWxlKSB7XG4gIC8qKlxuICAgKiBMaWdodCB0ZXh0IGZvciBkYXJrIGJhY2tncm91bmRzLlxuICAgKlxuICAgKiBAc2luY2UgMS4wLjBcbiAgICovXG4gIFN0eWxlW1wiRGFya1wiXSA9IFwiREFSS1wiO1xuICAvKipcbiAgICogRGFyayB0ZXh0IGZvciBsaWdodCBiYWNrZ3JvdW5kcy5cbiAgICpcbiAgICogQHNpbmNlIDEuMC4wXG4gICAqL1xuICBTdHlsZVtcIkxpZ2h0XCJdID0gXCJMSUdIVFwiO1xuICAvKipcbiAgICogVGhlIHN0eWxlIGlzIGJhc2VkIG9uIHRoZSBkZXZpY2UgYXBwZWFyYW5jZS5cbiAgICogSWYgdGhlIGRldmljZSBpcyB1c2luZyBEYXJrIG1vZGUsIHRoZSBzdGF0dXNiYXIgdGV4dCB3aWxsIGJlIGxpZ2h0LlxuICAgKiBJZiB0aGUgZGV2aWNlIGlzIHVzaW5nIExpZ2h0IG1vZGUsIHRoZSBzdGF0dXNiYXIgdGV4dCB3aWxsIGJlIGRhcmsuXG4gICAqXG4gICAqIEBzaW5jZSAxLjAuMFxuICAgKi9cbiAgU3R5bGVbXCJEZWZhdWx0XCJdID0gXCJERUZBVUxUXCI7XG59KShTdHlsZSB8fCAoU3R5bGUgPSB7fSkpO1xuZXhwb3J0IHZhciBBbmltYXRpb247XG4oZnVuY3Rpb24gKEFuaW1hdGlvbikge1xuICAvKipcbiAgICogTm8gYW5pbWF0aW9uIGR1cmluZyBzaG93L2hpZGUuXG4gICAqXG4gICAqIEBzaW5jZSAxLjAuMFxuICAgKi9cbiAgQW5pbWF0aW9uW1wiTm9uZVwiXSA9IFwiTk9ORVwiO1xuICAvKipcbiAgICogU2xpZGUgYW5pbWF0aW9uIGR1cmluZyBzaG93L2hpZGUuXG4gICAqIEl0IGRvZXNuJ3Qgd29yayBvbiBpT1MgMTUrLlxuICAgKlxuICAgKiBAZGVwcmVjYXRlZCBVc2UgQW5pbWF0aW9uLkZhZGUgb3IgQW5pbWF0aW9uLk5vbmUgaW5zdGVhZC5cbiAgICpcbiAgICogQHNpbmNlIDEuMC4wXG4gICAqL1xuICBBbmltYXRpb25bXCJTbGlkZVwiXSA9IFwiU0xJREVcIjtcbiAgLyoqXG4gICAqIEZhZGUgYW5pbWF0aW9uIGR1cmluZyBzaG93L2hpZGUuXG4gICAqXG4gICAqIEBzaW5jZSAxLjAuMFxuICAgKi9cbiAgQW5pbWF0aW9uW1wiRmFkZVwiXSA9IFwiRkFERVwiO1xufSkoQW5pbWF0aW9uIHx8IChBbmltYXRpb24gPSB7fSkpO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2UgYEFuaW1hdGlvbmAuXG4gKiBAc2luY2UgMS4wLjBcbiAqL1xuZXhwb3J0IGNvbnN0IFN0YXR1c0JhckFuaW1hdGlvbiA9IEFuaW1hdGlvbjtcbi8qKlxuICogQGRlcHJlY2F0ZWQgVXNlIGBTdHlsZWAuXG4gKiBAc2luY2UgMS4wLjBcbiAqL1xuZXhwb3J0IGNvbnN0IFN0YXR1c0JhclN0eWxlID0gU3R5bGU7XG4iLCJpbXBvcnQgeyByZWdpc3RlclBsdWdpbiB9IGZyb20gJ0BjYXBhY2l0b3IvY29yZSc7XG5jb25zdCBTdGF0dXNCYXIgPSByZWdpc3RlclBsdWdpbignU3RhdHVzQmFyJyk7XG5leHBvcnQgKiBmcm9tICcuL2RlZmluaXRpb25zJztcbmV4cG9ydCB7IFN0YXR1c0JhciB9O1xuIiwiaW1wb3J0IHsgcmVnaXN0ZXJQbHVnaW4gfSBmcm9tICdAY2FwYWNpdG9yL2NvcmUnO1xuY29uc3QgQXBwID0gcmVnaXN0ZXJQbHVnaW4oJ0FwcCcsIHtcbiAgd2ViOiAoKSA9PiBpbXBvcnQoJy4vd2ViJykudGhlbihtID0+IG5ldyBtLkFwcFdlYigpKVxufSk7XG5leHBvcnQgKiBmcm9tICcuL2RlZmluaXRpb25zJztcbmV4cG9ydCB7IEFwcCB9O1xuIiwiaW1wb3J0IHsgcmVnaXN0ZXJQbHVnaW4gfSBmcm9tICdAY2FwYWNpdG9yL2NvcmUnO1xuY29uc3QgRGlhbG9nID0gcmVnaXN0ZXJQbHVnaW4oJ0RpYWxvZycsIHtcbiAgd2ViOiAoKSA9PiBpbXBvcnQoJy4vd2ViJykudGhlbihtID0+IG5ldyBtLkRpYWxvZ1dlYigpKVxufSk7XG5leHBvcnQgKiBmcm9tICcuL2RlZmluaXRpb25zJztcbmV4cG9ydCB7IERpYWxvZyB9O1xuIiwiaW1wb3J0IHsgcmVnaXN0ZXJQbHVnaW4gfSBmcm9tICdAY2FwYWNpdG9yL2NvcmUnO1xuY29uc3QgU3BsYXNoU2NyZWVuID0gcmVnaXN0ZXJQbHVnaW4oJ1NwbGFzaFNjcmVlbicsIHtcbiAgd2ViOiAoKSA9PiBpbXBvcnQoJy4vd2ViJykudGhlbihtID0+IG5ldyBtLlNwbGFzaFNjcmVlbldlYigpKVxufSk7XG5leHBvcnQgKiBmcm9tICcuL2RlZmluaXRpb25zJztcbmV4cG9ydCB7IFNwbGFzaFNjcmVlbiB9O1xuIiwiaW1wb3J0IHsgcmVnaXN0ZXJQbHVnaW4gfSBmcm9tICdAY2FwYWNpdG9yL2NvcmUnO1xuY29uc3QgTmV0d29yayA9IHJlZ2lzdGVyUGx1Z2luKCdOZXR3b3JrJywge1xuICB3ZWI6ICgpID0+IGltcG9ydCgnLi93ZWInKS50aGVuKG0gPT4gbmV3IG0uTmV0d29ya1dlYigpKVxufSk7XG5leHBvcnQgKiBmcm9tICcuL2RlZmluaXRpb25zJztcbmV4cG9ydCB7IE5ldHdvcmsgfTtcbiIsIi8qKlxuICogQGxpY2Vuc2UgQW5ndWxhciB2MTkuMi41XG4gKiAoYykgMjAxMC0yMDI1IEdvb2dsZSBMTEMuIGh0dHBzOi8vYW5ndWxhci5pby9cbiAqIExpY2Vuc2U6IE1JVFxuICovXG5cbmltcG9ydCAqIGFzIGkwIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQXBwbGljYXRpb25SZWYsIEluamVjdGFibGUsIG1ha2VFbnZpcm9ubWVudFByb3ZpZGVycywgSW5qZWN0aW9uVG9rZW4sIEluamVjdG9yLCBwcm92aWRlQXBwSW5pdGlhbGl6ZXIsIGluamVjdCwgTmdab25lLCBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3ViamVjdCwgTkVWRVIgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IHN3aXRjaE1hcCwgdGFrZSwgZmlsdGVyLCBtYXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5jb25zdCBFUlJfU1dfTk9UX1NVUFBPUlRFRCA9ICdTZXJ2aWNlIHdvcmtlcnMgYXJlIGRpc2FibGVkIG9yIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBicm93c2VyJztcbi8qKlxuICogQHB1YmxpY0FwaVxuICovXG5jbGFzcyBOZ3N3Q29tbUNoYW5uZWwge1xuICBzZXJ2aWNlV29ya2VyO1xuICB3b3JrZXI7XG4gIHJlZ2lzdHJhdGlvbjtcbiAgZXZlbnRzO1xuICBjb25zdHJ1Y3RvcihzZXJ2aWNlV29ya2VyLCBpbmplY3Rvcikge1xuICAgIHRoaXMuc2VydmljZVdvcmtlciA9IHNlcnZpY2VXb3JrZXI7XG4gICAgaWYgKCFzZXJ2aWNlV29ya2VyKSB7XG4gICAgICB0aGlzLndvcmtlciA9IHRoaXMuZXZlbnRzID0gdGhpcy5yZWdpc3RyYXRpb24gPSBuZXcgT2JzZXJ2YWJsZShzdWJzY3JpYmVyID0+IHN1YnNjcmliZXIuZXJyb3IobmV3IEVycm9yKEVSUl9TV19OT1RfU1VQUE9SVEVEKSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgY3VycmVudFdvcmtlciA9IG51bGw7XG4gICAgICBjb25zdCB3b3JrZXJTdWJqZWN0ID0gbmV3IFN1YmplY3QoKTtcbiAgICAgIHRoaXMud29ya2VyID0gbmV3IE9ic2VydmFibGUoc3Vic2NyaWJlciA9PiB7XG4gICAgICAgIGlmIChjdXJyZW50V29ya2VyICE9PSBudWxsKSB7XG4gICAgICAgICAgc3Vic2NyaWJlci5uZXh0KGN1cnJlbnRXb3JrZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3b3JrZXJTdWJqZWN0LnN1YnNjcmliZSh2ID0+IHN1YnNjcmliZXIubmV4dCh2KSk7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHVwZGF0ZUNvbnRyb2xsZXIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBjb250cm9sbGVyXG4gICAgICAgIH0gPSBzZXJ2aWNlV29ya2VyO1xuICAgICAgICBpZiAoY29udHJvbGxlciA9PT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50V29ya2VyID0gY29udHJvbGxlcjtcbiAgICAgICAgd29ya2VyU3ViamVjdC5uZXh0KGN1cnJlbnRXb3JrZXIpO1xuICAgICAgfTtcbiAgICAgIHNlcnZpY2VXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcignY29udHJvbGxlcmNoYW5nZScsIHVwZGF0ZUNvbnRyb2xsZXIpO1xuICAgICAgdXBkYXRlQ29udHJvbGxlcigpO1xuICAgICAgdGhpcy5yZWdpc3RyYXRpb24gPSB0aGlzLndvcmtlci5waXBlKHN3aXRjaE1hcCgoKSA9PiBzZXJ2aWNlV29ya2VyLmdldFJlZ2lzdHJhdGlvbigpKSk7XG4gICAgICBjb25zdCBfZXZlbnRzID0gbmV3IFN1YmplY3QoKTtcbiAgICAgIHRoaXMuZXZlbnRzID0gX2V2ZW50cy5hc09ic2VydmFibGUoKTtcbiAgICAgIGNvbnN0IG1lc3NhZ2VMaXN0ZW5lciA9IGV2ZW50ID0+IHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIGRhdGFcbiAgICAgICAgfSA9IGV2ZW50O1xuICAgICAgICBpZiAoZGF0YT8udHlwZSkge1xuICAgICAgICAgIF9ldmVudHMubmV4dChkYXRhKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHNlcnZpY2VXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIG1lc3NhZ2VMaXN0ZW5lcik7XG4gICAgICAvLyBUaGUgaW5qZWN0b3IgaXMgb3B0aW9uYWwgdG8gYXZvaWQgYnJlYWtpbmcgY2hhbmdlcy5cbiAgICAgIGNvbnN0IGFwcFJlZiA9IGluamVjdG9yPy5nZXQoQXBwbGljYXRpb25SZWYsIG51bGwsIHtcbiAgICAgICAgb3B0aW9uYWw6IHRydWVcbiAgICAgIH0pO1xuICAgICAgYXBwUmVmPy5vbkRlc3Ryb3koKCkgPT4ge1xuICAgICAgICBzZXJ2aWNlV29ya2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbnRyb2xsZXJjaGFuZ2UnLCB1cGRhdGVDb250cm9sbGVyKTtcbiAgICAgICAgc2VydmljZVdvcmtlci5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbWVzc2FnZUxpc3RlbmVyKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBwb3N0TWVzc2FnZShhY3Rpb24sIHBheWxvYWQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICB0aGlzLndvcmtlci5waXBlKHRha2UoMSkpLnN1YnNjcmliZShzdyA9PiB7XG4gICAgICAgIHN3LnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICBhY3Rpb24sXG4gICAgICAgICAgLi4ucGF5bG9hZFxuICAgICAgICB9KTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgcG9zdE1lc3NhZ2VXaXRoT3BlcmF0aW9uKHR5cGUsIHBheWxvYWQsIG9wZXJhdGlvbk5vbmNlKSB7XG4gICAgY29uc3Qgd2FpdEZvck9wZXJhdGlvbkNvbXBsZXRlZCA9IHRoaXMud2FpdEZvck9wZXJhdGlvbkNvbXBsZXRlZChvcGVyYXRpb25Ob25jZSk7XG4gICAgY29uc3QgcG9zdE1lc3NhZ2UgPSB0aGlzLnBvc3RNZXNzYWdlKHR5cGUsIHBheWxvYWQpO1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbcG9zdE1lc3NhZ2UsIHdhaXRGb3JPcGVyYXRpb25Db21wbGV0ZWRdKS50aGVuKChbLCByZXN1bHRdKSA9PiByZXN1bHQpO1xuICB9XG4gIGdlbmVyYXRlTm9uY2UoKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDAwKTtcbiAgfVxuICBldmVudHNPZlR5cGUodHlwZSkge1xuICAgIGxldCBmaWx0ZXJGbjtcbiAgICBpZiAodHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBmaWx0ZXJGbiA9IGV2ZW50ID0+IGV2ZW50LnR5cGUgPT09IHR5cGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpbHRlckZuID0gZXZlbnQgPT4gdHlwZS5pbmNsdWRlcyhldmVudC50eXBlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZXZlbnRzLnBpcGUoZmlsdGVyKGZpbHRlckZuKSk7XG4gIH1cbiAgbmV4dEV2ZW50T2ZUeXBlKHR5cGUpIHtcbiAgICByZXR1cm4gdGhpcy5ldmVudHNPZlR5cGUodHlwZSkucGlwZSh0YWtlKDEpKTtcbiAgfVxuICB3YWl0Rm9yT3BlcmF0aW9uQ29tcGxldGVkKG5vbmNlKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuZXZlbnRzT2ZUeXBlKCdPUEVSQVRJT05fQ09NUExFVEVEJykucGlwZShmaWx0ZXIoZXZlbnQgPT4gZXZlbnQubm9uY2UgPT09IG5vbmNlKSwgdGFrZSgxKSwgbWFwKGV2ZW50ID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LnJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmV0dXJuIGV2ZW50LnJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXZlbnQuZXJyb3IpO1xuICAgICAgfSkpLnN1YnNjcmliZSh7XG4gICAgICAgIG5leHQ6IHJlc29sdmUsXG4gICAgICAgIGVycm9yOiByZWplY3RcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIGdldCBpc0VuYWJsZWQoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5zZXJ2aWNlV29ya2VyO1xuICB9XG59XG5cbi8qKlxuICogU3Vic2NyaWJlIGFuZCBsaXN0ZW4gdG9cbiAqIFtXZWIgUHVzaFxuICogTm90aWZpY2F0aW9uc10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1B1c2hfQVBJL0Jlc3RfUHJhY3RpY2VzKSB0aHJvdWdoXG4gKiBBbmd1bGFyIFNlcnZpY2UgV29ya2VyLlxuICpcbiAqIEB1c2FnZU5vdGVzXG4gKlxuICogWW91IGNhbiBpbmplY3QgYSBgU3dQdXNoYCBpbnN0YW5jZSBpbnRvIGFueSBjb21wb25lbnQgb3Igc2VydmljZVxuICogYXMgYSBkZXBlbmRlbmN5LlxuICpcbiAqIDxjb2RlLWV4YW1wbGUgcGF0aD1cInNlcnZpY2Utd29ya2VyL3B1c2gvbW9kdWxlLnRzXCIgcmVnaW9uPVwiaW5qZWN0LXN3LXB1c2hcIlxuICogaGVhZGVyPVwiYXBwLmNvbXBvbmVudC50c1wiPjwvY29kZS1leGFtcGxlPlxuICpcbiAqIFRvIHN1YnNjcmliZSwgY2FsbCBgU3dQdXNoLnJlcXVlc3RTdWJzY3JpcHRpb24oKWAsIHdoaWNoIGFza3MgdGhlIHVzZXIgZm9yIHBlcm1pc3Npb24uXG4gKiBUaGUgY2FsbCByZXR1cm5zIGEgYFByb21pc2VgIHdpdGggYSBuZXdcbiAqIFtgUHVzaFN1YnNjcmlwdGlvbmBdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9QdXNoU3Vic2NyaXB0aW9uKVxuICogaW5zdGFuY2UuXG4gKlxuICogPGNvZGUtZXhhbXBsZSBwYXRoPVwic2VydmljZS13b3JrZXIvcHVzaC9tb2R1bGUudHNcIiByZWdpb249XCJzdWJzY3JpYmUtdG8tcHVzaFwiXG4gKiBoZWFkZXI9XCJhcHAuY29tcG9uZW50LnRzXCI+PC9jb2RlLWV4YW1wbGU+XG4gKlxuICogQSByZXF1ZXN0IGlzIHJlamVjdGVkIGlmIHRoZSB1c2VyIGRlbmllcyBwZXJtaXNzaW9uLCBvciBpZiB0aGUgYnJvd3NlclxuICogYmxvY2tzIG9yIGRvZXMgbm90IHN1cHBvcnQgdGhlIFB1c2ggQVBJIG9yIFNlcnZpY2VXb3JrZXJzLlxuICogQ2hlY2sgYFN3UHVzaC5pc0VuYWJsZWRgIHRvIGNvbmZpcm0gc3RhdHVzLlxuICpcbiAqIEludm9rZSBQdXNoIE5vdGlmaWNhdGlvbnMgYnkgcHVzaGluZyBhIG1lc3NhZ2Ugd2l0aCB0aGUgZm9sbG93aW5nIHBheWxvYWQuXG4gKlxuICogYGBgdHNcbiAqIHtcbiAqICAgXCJub3RpZmljYXRpb25cIjoge1xuICogICAgIFwiYWN0aW9uc1wiOiBOb3RpZmljYXRpb25BY3Rpb25bXSxcbiAqICAgICBcImJhZGdlXCI6IFVTVlN0cmluZyxcbiAqICAgICBcImJvZHlcIjogRE9NU3RyaW5nLFxuICogICAgIFwiZGF0YVwiOiBhbnksXG4gKiAgICAgXCJkaXJcIjogXCJhdXRvXCJ8XCJsdHJcInxcInJ0bFwiLFxuICogICAgIFwiaWNvblwiOiBVU1ZTdHJpbmcsXG4gKiAgICAgXCJpbWFnZVwiOiBVU1ZTdHJpbmcsXG4gKiAgICAgXCJsYW5nXCI6IERPTVN0cmluZyxcbiAqICAgICBcInJlbm90aWZ5XCI6IGJvb2xlYW4sXG4gKiAgICAgXCJyZXF1aXJlSW50ZXJhY3Rpb25cIjogYm9vbGVhbixcbiAqICAgICBcInNpbGVudFwiOiBib29sZWFuLFxuICogICAgIFwidGFnXCI6IERPTVN0cmluZyxcbiAqICAgICBcInRpbWVzdGFtcFwiOiBET01UaW1lU3RhbXAsXG4gKiAgICAgXCJ0aXRsZVwiOiBET01TdHJpbmcsXG4gKiAgICAgXCJ2aWJyYXRlXCI6IG51bWJlcltdXG4gKiAgIH1cbiAqIH1cbiAqIGBgYFxuICpcbiAqIE9ubHkgYHRpdGxlYCBpcyByZXF1aXJlZC4gU2VlIGBOb3RpZmljYXRpb25gXG4gKiBbaW5zdGFuY2VcbiAqIHByb3BlcnRpZXNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Ob3RpZmljYXRpb24jSW5zdGFuY2VfcHJvcGVydGllcykuXG4gKlxuICogV2hpbGUgdGhlIHN1YnNjcmlwdGlvbiBpcyBhY3RpdmUsIFNlcnZpY2UgV29ya2VyIGxpc3RlbnMgZm9yXG4gKiBbUHVzaEV2ZW50XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvUHVzaEV2ZW50KVxuICogb2NjdXJyZW5jZXMgYW5kIGNyZWF0ZXNcbiAqIFtOb3RpZmljYXRpb25dKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Ob3RpZmljYXRpb24pXG4gKiBpbnN0YW5jZXMgaW4gcmVzcG9uc2UuXG4gKlxuICogVW5zdWJzY3JpYmUgdXNpbmcgYFN3UHVzaC51bnN1YnNjcmliZSgpYC5cbiAqXG4gKiBBbiBhcHBsaWNhdGlvbiBjYW4gc3Vic2NyaWJlIHRvIGBTd1B1c2gubm90aWZpY2F0aW9uQ2xpY2tzYCBvYnNlcnZhYmxlIHRvIGJlIG5vdGlmaWVkIHdoZW4gYSB1c2VyXG4gKiBjbGlja3Mgb24gYSBub3RpZmljYXRpb24uIEZvciBleGFtcGxlOlxuICpcbiAqIDxjb2RlLWV4YW1wbGUgcGF0aD1cInNlcnZpY2Utd29ya2VyL3B1c2gvbW9kdWxlLnRzXCIgcmVnaW9uPVwic3Vic2NyaWJlLXRvLW5vdGlmaWNhdGlvbi1jbGlja3NcIlxuICogaGVhZGVyPVwiYXBwLmNvbXBvbmVudC50c1wiPjwvY29kZS1leGFtcGxlPlxuICpcbiAqIFlvdSBjYW4gcmVhZCBtb3JlIG9uIGhhbmRsaW5nIG5vdGlmaWNhdGlvbiBjbGlja3MgaW4gdGhlIFtTZXJ2aWNlIHdvcmtlciBub3RpZmljYXRpb25zXG4gKiBndWlkZV0oZWNvc3lzdGVtL3NlcnZpY2Utd29ya2Vycy9wdXNoLW5vdGlmaWNhdGlvbnMpLlxuICpcbiAqIEBzZWUgW1B1c2ggTm90aWZpY2F0aW9uc10oaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vd2ViL2Z1bmRhbWVudGFscy9jb2RlbGFicy9wdXNoLW5vdGlmaWNhdGlvbnMvKVxuICogQHNlZSBbQW5ndWxhciBQdXNoIE5vdGlmaWNhdGlvbnNdKGh0dHBzOi8vYmxvZy5hbmd1bGFyLXVuaXZlcnNpdHkuaW8vYW5ndWxhci1wdXNoLW5vdGlmaWNhdGlvbnMvKVxuICogQHNlZSBbTUROOiBQdXNoIEFQSV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1B1c2hfQVBJKVxuICogQHNlZSBbTUROOiBOb3RpZmljYXRpb25zIEFQSV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL05vdGlmaWNhdGlvbnNfQVBJKVxuICogQHNlZSBbTUROOiBXZWIgUHVzaCBBUEkgTm90aWZpY2F0aW9ucyBiZXN0IHByYWN0aWNlc10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1B1c2hfQVBJL0Jlc3RfUHJhY3RpY2VzKVxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xuY2xhc3MgU3dQdXNoIHtcbiAgc3c7XG4gIC8qKlxuICAgKiBFbWl0cyB0aGUgcGF5bG9hZHMgb2YgdGhlIHJlY2VpdmVkIHB1c2ggbm90aWZpY2F0aW9uIG1lc3NhZ2VzLlxuICAgKi9cbiAgbWVzc2FnZXM7XG4gIC8qKlxuICAgKiBFbWl0cyB0aGUgcGF5bG9hZHMgb2YgdGhlIHJlY2VpdmVkIHB1c2ggbm90aWZpY2F0aW9uIG1lc3NhZ2VzIGFzIHdlbGwgYXMgdGhlIGFjdGlvbiB0aGUgdXNlclxuICAgKiBpbnRlcmFjdGVkIHdpdGguIElmIG5vIGFjdGlvbiB3YXMgdXNlZCB0aGUgYGFjdGlvbmAgcHJvcGVydHkgY29udGFpbnMgYW4gZW1wdHkgc3RyaW5nIGAnJ2AuXG4gICAqXG4gICAqIE5vdGUgdGhhdCB0aGUgYG5vdGlmaWNhdGlvbmAgcHJvcGVydHkgZG9lcyAqKm5vdCoqIGNvbnRhaW4gYVxuICAgKiBbTm90aWZpY2F0aW9uXVtNb3ppbGxhIE5vdGlmaWNhdGlvbl0gb2JqZWN0IGJ1dCByYXRoZXIgYVxuICAgKiBbTm90aWZpY2F0aW9uT3B0aW9uc10oaHR0cHM6Ly9ub3RpZmljYXRpb25zLnNwZWMud2hhdHdnLm9yZy8jZGljdGRlZi1ub3RpZmljYXRpb25vcHRpb25zKVxuICAgKiBvYmplY3QgdGhhdCBhbHNvIGluY2x1ZGVzIHRoZSBgdGl0bGVgIG9mIHRoZSBbTm90aWZpY2F0aW9uXVtNb3ppbGxhIE5vdGlmaWNhdGlvbl0gb2JqZWN0LlxuICAgKlxuICAgKiBbTW96aWxsYSBOb3RpZmljYXRpb25dOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTm90aWZpY2F0aW9uXG4gICAqL1xuICBub3RpZmljYXRpb25DbGlja3M7XG4gIC8qKlxuICAgKiBFbWl0cyB0aGUgY3VycmVudGx5IGFjdGl2ZVxuICAgKiBbUHVzaFN1YnNjcmlwdGlvbl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1B1c2hTdWJzY3JpcHRpb24pXG4gICAqIGFzc29jaWF0ZWQgdG8gdGhlIFNlcnZpY2UgV29ya2VyIHJlZ2lzdHJhdGlvbiBvciBgbnVsbGAgaWYgdGhlcmUgaXMgbm8gc3Vic2NyaXB0aW9uLlxuICAgKi9cbiAgc3Vic2NyaXB0aW9uO1xuICAvKipcbiAgICogVHJ1ZSBpZiB0aGUgU2VydmljZSBXb3JrZXIgaXMgZW5hYmxlZCAoc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyIGFuZCBlbmFibGVkIHZpYVxuICAgKiBgU2VydmljZVdvcmtlck1vZHVsZWApLlxuICAgKi9cbiAgZ2V0IGlzRW5hYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdy5pc0VuYWJsZWQ7XG4gIH1cbiAgcHVzaE1hbmFnZXIgPSBudWxsO1xuICBzdWJzY3JpcHRpb25DaGFuZ2VzID0gbmV3IFN1YmplY3QoKTtcbiAgY29uc3RydWN0b3Ioc3cpIHtcbiAgICB0aGlzLnN3ID0gc3c7XG4gICAgaWYgKCFzdy5pc0VuYWJsZWQpIHtcbiAgICAgIHRoaXMubWVzc2FnZXMgPSBORVZFUjtcbiAgICAgIHRoaXMubm90aWZpY2F0aW9uQ2xpY2tzID0gTkVWRVI7XG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IE5FVkVSO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLm1lc3NhZ2VzID0gdGhpcy5zdy5ldmVudHNPZlR5cGUoJ1BVU0gnKS5waXBlKG1hcChtZXNzYWdlID0+IG1lc3NhZ2UuZGF0YSkpO1xuICAgIHRoaXMubm90aWZpY2F0aW9uQ2xpY2tzID0gdGhpcy5zdy5ldmVudHNPZlR5cGUoJ05PVElGSUNBVElPTl9DTElDSycpLnBpcGUobWFwKG1lc3NhZ2UgPT4gbWVzc2FnZS5kYXRhKSk7XG4gICAgdGhpcy5wdXNoTWFuYWdlciA9IHRoaXMuc3cucmVnaXN0cmF0aW9uLnBpcGUobWFwKHJlZ2lzdHJhdGlvbiA9PiByZWdpc3RyYXRpb24ucHVzaE1hbmFnZXIpKTtcbiAgICBjb25zdCB3b3JrZXJEcml2ZW5TdWJzY3JpcHRpb25zID0gdGhpcy5wdXNoTWFuYWdlci5waXBlKHN3aXRjaE1hcChwbSA9PiBwbS5nZXRTdWJzY3JpcHRpb24oKSkpO1xuICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gbmV3IE9ic2VydmFibGUoc3Vic2NyaWJlciA9PiB7XG4gICAgICBjb25zdCB3b3JrZXJEcml2ZW5TdWJzY3JpcHRpb24gPSB3b3JrZXJEcml2ZW5TdWJzY3JpcHRpb25zLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbkNoYW5nZXMgPSB0aGlzLnN1YnNjcmlwdGlvbkNoYW5nZXMuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgd29ya2VyRHJpdmVuU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIHN1YnNjcmlwdGlvbkNoYW5nZXMudW5zdWJzY3JpYmUoKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFN1YnNjcmliZXMgdG8gV2ViIFB1c2ggTm90aWZpY2F0aW9ucyxcbiAgICogYWZ0ZXIgcmVxdWVzdGluZyBhbmQgcmVjZWl2aW5nIHVzZXIgcGVybWlzc2lvbi5cbiAgICpcbiAgICogQHBhcmFtIG9wdGlvbnMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGBzZXJ2ZXJQdWJsaWNLZXlgIHN0cmluZy5cbiAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIG5ldyBzdWJzY3JpcHRpb24gb2JqZWN0LlxuICAgKi9cbiAgcmVxdWVzdFN1YnNjcmlwdGlvbihvcHRpb25zKSB7XG4gICAgaWYgKCF0aGlzLnN3LmlzRW5hYmxlZCB8fCB0aGlzLnB1c2hNYW5hZ2VyID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKEVSUl9TV19OT1RfU1VQUE9SVEVEKSk7XG4gICAgfVxuICAgIGNvbnN0IHB1c2hPcHRpb25zID0ge1xuICAgICAgdXNlclZpc2libGVPbmx5OiB0cnVlXG4gICAgfTtcbiAgICBsZXQga2V5ID0gdGhpcy5kZWNvZGVCYXNlNjQob3B0aW9ucy5zZXJ2ZXJQdWJsaWNLZXkucmVwbGFjZSgvXy9nLCAnLycpLnJlcGxhY2UoLy0vZywgJysnKSk7XG4gICAgbGV0IGFwcGxpY2F0aW9uU2VydmVyS2V5ID0gbmV3IFVpbnQ4QXJyYXkobmV3IEFycmF5QnVmZmVyKGtleS5sZW5ndGgpKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleS5sZW5ndGg7IGkrKykge1xuICAgICAgYXBwbGljYXRpb25TZXJ2ZXJLZXlbaV0gPSBrZXkuY2hhckNvZGVBdChpKTtcbiAgICB9XG4gICAgcHVzaE9wdGlvbnMuYXBwbGljYXRpb25TZXJ2ZXJLZXkgPSBhcHBsaWNhdGlvblNlcnZlcktleTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5wdXNoTWFuYWdlci5waXBlKHN3aXRjaE1hcChwbSA9PiBwbS5zdWJzY3JpYmUocHVzaE9wdGlvbnMpKSwgdGFrZSgxKSkuc3Vic2NyaWJlKHtcbiAgICAgICAgbmV4dDogc3ViID0+IHtcbiAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbkNoYW5nZXMubmV4dChzdWIpO1xuICAgICAgICAgIHJlc29sdmUoc3ViKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IHJlamVjdFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFVuc3Vic2NyaWJlcyBmcm9tIFNlcnZpY2UgV29ya2VyIHB1c2ggbm90aWZpY2F0aW9ucy5cbiAgICpcbiAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgb3BlcmF0aW9uIHN1Y2NlZWRzLCBvciBpcyByZWplY3RlZCBpZiB0aGVyZSBpcyBub1xuICAgKiAgICAgICAgICBhY3RpdmUgc3Vic2NyaXB0aW9uIG9yIHRoZSB1bnN1YnNjcmliZSBvcGVyYXRpb24gZmFpbHMuXG4gICAqL1xuICB1bnN1YnNjcmliZSgpIHtcbiAgICBpZiAoIXRoaXMuc3cuaXNFbmFibGVkKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKEVSUl9TV19OT1RfU1VQUE9SVEVEKSk7XG4gICAgfVxuICAgIGNvbnN0IGRvVW5zdWJzY3JpYmUgPSBzdWIgPT4ge1xuICAgICAgaWYgKHN1YiA9PT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBzdWJzY3JpYmVkIHRvIHB1c2ggbm90aWZpY2F0aW9ucy4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdWIudW5zdWJzY3JpYmUoKS50aGVuKHN1Y2Nlc3MgPT4ge1xuICAgICAgICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3Vic2NyaWJlIGZhaWxlZCEnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbkNoYW5nZXMubmV4dChudWxsKTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLnBpcGUodGFrZSgxKSwgc3dpdGNoTWFwKGRvVW5zdWJzY3JpYmUpKS5zdWJzY3JpYmUoe1xuICAgICAgICBuZXh0OiByZXNvbHZlLFxuICAgICAgICBlcnJvcjogcmVqZWN0XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICBkZWNvZGVCYXNlNjQoaW5wdXQpIHtcbiAgICByZXR1cm4gYXRvYihpbnB1dCk7XG4gIH1cbiAgc3RhdGljIMm1ZmFjID0gZnVuY3Rpb24gU3dQdXNoX0ZhY3RvcnkoX19uZ0ZhY3RvcnlUeXBlX18pIHtcbiAgICByZXR1cm4gbmV3IChfX25nRmFjdG9yeVR5cGVfXyB8fCBTd1B1c2gpKGkwLsm1ybVpbmplY3QoTmdzd0NvbW1DaGFubmVsKSk7XG4gIH07XG4gIHN0YXRpYyDJtXByb3YgPSAvKiBAX19QVVJFX18gKi9pMC7Jtcm1ZGVmaW5lSW5qZWN0YWJsZSh7XG4gICAgdG9rZW46IFN3UHVzaCxcbiAgICBmYWN0b3J5OiBTd1B1c2guybVmYWNcbiAgfSk7XG59XG4oKCkgPT4ge1xuICAodHlwZW9mIG5nRGV2TW9kZSA9PT0gXCJ1bmRlZmluZWRcIiB8fCBuZ0Rldk1vZGUpICYmIGkwLsm1c2V0Q2xhc3NNZXRhZGF0YShTd1B1c2gsIFt7XG4gICAgdHlwZTogSW5qZWN0YWJsZVxuICB9XSwgKCkgPT4gW3tcbiAgICB0eXBlOiBOZ3N3Q29tbUNoYW5uZWxcbiAgfV0sIG51bGwpO1xufSkoKTtcblxuLyoqXG4gKiBTdWJzY3JpYmUgdG8gdXBkYXRlIG5vdGlmaWNhdGlvbnMgZnJvbSB0aGUgU2VydmljZSBXb3JrZXIsIHRyaWdnZXIgdXBkYXRlXG4gKiBjaGVja3MsIGFuZCBmb3JjaWJseSBhY3RpdmF0ZSB1cGRhdGVzLlxuICpcbiAqIEBzZWUge0BsaW5rIC9lY29zeXN0ZW0vc2VydmljZS13b3JrZXJzL2NvbW11bmljYXRpb25zIFNlcnZpY2UgV29ya2VyIENvbW11bmljYXRpb24gR3VpZGV9XG4gKlxuICogQHB1YmxpY0FwaVxuICovXG5jbGFzcyBTd1VwZGF0ZSB7XG4gIHN3O1xuICAvKipcbiAgICogRW1pdHMgYSBgVmVyc2lvbkRldGVjdGVkRXZlbnRgIGV2ZW50IHdoZW5ldmVyIGEgbmV3IHZlcnNpb24gaXMgZGV0ZWN0ZWQgb24gdGhlIHNlcnZlci5cbiAgICpcbiAgICogRW1pdHMgYSBgVmVyc2lvbkluc3RhbGxhdGlvbkZhaWxlZEV2ZW50YCBldmVudCB3aGVuZXZlciBjaGVja2luZyBmb3Igb3IgZG93bmxvYWRpbmcgYSBuZXdcbiAgICogdmVyc2lvbiBmYWlscy5cbiAgICpcbiAgICogRW1pdHMgYSBgVmVyc2lvblJlYWR5RXZlbnRgIGV2ZW50IHdoZW5ldmVyIGEgbmV3IHZlcnNpb24gaGFzIGJlZW4gZG93bmxvYWRlZCBhbmQgaXMgcmVhZHkgZm9yXG4gICAqIGFjdGl2YXRpb24uXG4gICAqL1xuICB2ZXJzaW9uVXBkYXRlcztcbiAgLyoqXG4gICAqIEVtaXRzIGFuIGBVbnJlY292ZXJhYmxlU3RhdGVFdmVudGAgZXZlbnQgd2hlbmV2ZXIgdGhlIHZlcnNpb24gb2YgdGhlIGFwcCB1c2VkIGJ5IHRoZSBzZXJ2aWNlXG4gICAqIHdvcmtlciB0byBzZXJ2ZSB0aGlzIGNsaWVudCBpcyBpbiBhIGJyb2tlbiBzdGF0ZSB0aGF0IGNhbm5vdCBiZSByZWNvdmVyZWQgZnJvbSB3aXRob3V0IGEgZnVsbFxuICAgKiBwYWdlIHJlbG9hZC5cbiAgICovXG4gIHVucmVjb3ZlcmFibGU7XG4gIC8qKlxuICAgKiBUcnVlIGlmIHRoZSBTZXJ2aWNlIFdvcmtlciBpcyBlbmFibGVkIChzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIgYW5kIGVuYWJsZWQgdmlhXG4gICAqIGBTZXJ2aWNlV29ya2VyTW9kdWxlYCkuXG4gICAqL1xuICBnZXQgaXNFbmFibGVkKCkge1xuICAgIHJldHVybiB0aGlzLnN3LmlzRW5hYmxlZDtcbiAgfVxuICBjb25zdHJ1Y3Rvcihzdykge1xuICAgIHRoaXMuc3cgPSBzdztcbiAgICBpZiAoIXN3LmlzRW5hYmxlZCkge1xuICAgICAgdGhpcy52ZXJzaW9uVXBkYXRlcyA9IE5FVkVSO1xuICAgICAgdGhpcy51bnJlY292ZXJhYmxlID0gTkVWRVI7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMudmVyc2lvblVwZGF0ZXMgPSB0aGlzLnN3LmV2ZW50c09mVHlwZShbJ1ZFUlNJT05fREVURUNURUQnLCAnVkVSU0lPTl9JTlNUQUxMQVRJT05fRkFJTEVEJywgJ1ZFUlNJT05fUkVBRFknLCAnTk9fTkVXX1ZFUlNJT05fREVURUNURUQnXSk7XG4gICAgdGhpcy51bnJlY292ZXJhYmxlID0gdGhpcy5zdy5ldmVudHNPZlR5cGUoJ1VOUkVDT1ZFUkFCTEVfU1RBVEUnKTtcbiAgfVxuICAvKipcbiAgICogQ2hlY2tzIGZvciBhbiB1cGRhdGUgYW5kIHdhaXRzIHVudGlsIHRoZSBuZXcgdmVyc2lvbiBpcyBkb3dubG9hZGVkIGZyb20gdGhlIHNlcnZlciBhbmQgcmVhZHlcbiAgICogZm9yIGFjdGl2YXRpb24uXG4gICAqXG4gICAqIEByZXR1cm5zIGEgcHJvbWlzZSB0aGF0XG4gICAqIC0gcmVzb2x2ZXMgdG8gYHRydWVgIGlmIGEgbmV3IHZlcnNpb24gd2FzIGZvdW5kIGFuZCBpcyByZWFkeSB0byBiZSBhY3RpdmF0ZWQuXG4gICAqIC0gcmVzb2x2ZXMgdG8gYGZhbHNlYCBpZiBubyBuZXcgdmVyc2lvbiB3YXMgZm91bmRcbiAgICogLSByZWplY3RzIGlmIGFueSBlcnJvciBvY2N1cnNcbiAgICovXG4gIGNoZWNrRm9yVXBkYXRlKCkge1xuICAgIGlmICghdGhpcy5zdy5pc0VuYWJsZWQpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoRVJSX1NXX05PVF9TVVBQT1JURUQpKTtcbiAgICB9XG4gICAgY29uc3Qgbm9uY2UgPSB0aGlzLnN3LmdlbmVyYXRlTm9uY2UoKTtcbiAgICByZXR1cm4gdGhpcy5zdy5wb3N0TWVzc2FnZVdpdGhPcGVyYXRpb24oJ0NIRUNLX0ZPUl9VUERBVEVTJywge1xuICAgICAgbm9uY2VcbiAgICB9LCBub25jZSk7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGN1cnJlbnQgY2xpZW50IChpLmUuIGJyb3dzZXIgdGFiKSB0byB0aGUgbGF0ZXN0IHZlcnNpb24gdGhhdCBpcyByZWFkeSBmb3JcbiAgICogYWN0aXZhdGlvbi5cbiAgICpcbiAgICogSW4gbW9zdCBjYXNlcywgeW91IHNob3VsZCBub3QgdXNlIHRoaXMgbWV0aG9kIGFuZCBpbnN0ZWFkIHNob3VsZCB1cGRhdGUgYSBjbGllbnQgYnkgcmVsb2FkaW5nXG4gICAqIHRoZSBwYWdlLlxuICAgKlxuICAgKiA8ZGl2IGNsYXNzPVwiZG9jcy1hbGVydCBkb2NzLWFsZXJ0LWltcG9ydGFudFwiPlxuICAgKlxuICAgKiBVcGRhdGluZyBhIGNsaWVudCB3aXRob3V0IHJlbG9hZGluZyBjYW4gZWFzaWx5IHJlc3VsdCBpbiBhIGJyb2tlbiBhcHBsaWNhdGlvbiBkdWUgdG8gYSB2ZXJzaW9uXG4gICAqIG1pc21hdGNoIGJldHdlZW4gdGhlIGFwcGxpY2F0aW9uIHNoZWxsIGFuZCBvdGhlciBwYWdlIHJlc291cmNlcyxcbiAgICogc3VjaCBhcyBsYXp5LWxvYWRlZCBjaHVua3MsIHdob3NlIGZpbGVuYW1lcyBtYXkgY2hhbmdlIGJldHdlZW5cbiAgICogdmVyc2lvbnMuXG4gICAqXG4gICAqIE9ubHkgdXNlIHRoaXMgbWV0aG9kLCBpZiB5b3UgYXJlIGNlcnRhaW4gaXQgaXMgc2FmZSBmb3IgeW91ciBzcGVjaWZpYyB1c2UgY2FzZS5cbiAgICpcbiAgICogPC9kaXY+XG4gICAqXG4gICAqIEByZXR1cm5zIGEgcHJvbWlzZSB0aGF0XG4gICAqICAtIHJlc29sdmVzIHRvIGB0cnVlYCBpZiBhbiB1cGRhdGUgd2FzIGFjdGl2YXRlZCBzdWNjZXNzZnVsbHlcbiAgICogIC0gcmVzb2x2ZXMgdG8gYGZhbHNlYCBpZiBubyB1cGRhdGUgd2FzIGF2YWlsYWJsZSAoZm9yIGV4YW1wbGUsIHRoZSBjbGllbnQgd2FzIGFscmVhZHkgb24gdGhlXG4gICAqICAgIGxhdGVzdCB2ZXJzaW9uKS5cbiAgICogIC0gcmVqZWN0cyBpZiBhbnkgZXJyb3Igb2NjdXJzXG4gICAqL1xuICBhY3RpdmF0ZVVwZGF0ZSgpIHtcbiAgICBpZiAoIXRoaXMuc3cuaXNFbmFibGVkKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKEVSUl9TV19OT1RfU1VQUE9SVEVEKSk7XG4gICAgfVxuICAgIGNvbnN0IG5vbmNlID0gdGhpcy5zdy5nZW5lcmF0ZU5vbmNlKCk7XG4gICAgcmV0dXJuIHRoaXMuc3cucG9zdE1lc3NhZ2VXaXRoT3BlcmF0aW9uKCdBQ1RJVkFURV9VUERBVEUnLCB7XG4gICAgICBub25jZVxuICAgIH0sIG5vbmNlKTtcbiAgfVxuICBzdGF0aWMgybVmYWMgPSBmdW5jdGlvbiBTd1VwZGF0ZV9GYWN0b3J5KF9fbmdGYWN0b3J5VHlwZV9fKSB7XG4gICAgcmV0dXJuIG5ldyAoX19uZ0ZhY3RvcnlUeXBlX18gfHwgU3dVcGRhdGUpKGkwLsm1ybVpbmplY3QoTmdzd0NvbW1DaGFubmVsKSk7XG4gIH07XG4gIHN0YXRpYyDJtXByb3YgPSAvKiBAX19QVVJFX18gKi9pMC7Jtcm1ZGVmaW5lSW5qZWN0YWJsZSh7XG4gICAgdG9rZW46IFN3VXBkYXRlLFxuICAgIGZhY3Rvcnk6IFN3VXBkYXRlLsm1ZmFjXG4gIH0pO1xufVxuKCgpID0+IHtcbiAgKHR5cGVvZiBuZ0Rldk1vZGUgPT09IFwidW5kZWZpbmVkXCIgfHwgbmdEZXZNb2RlKSAmJiBpMC7JtXNldENsYXNzTWV0YWRhdGEoU3dVcGRhdGUsIFt7XG4gICAgdHlwZTogSW5qZWN0YWJsZVxuICB9XSwgKCkgPT4gW3tcbiAgICB0eXBlOiBOZ3N3Q29tbUNoYW5uZWxcbiAgfV0sIG51bGwpO1xufSkoKTtcblxuLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuZGV2L2xpY2Vuc2VcbiAqL1xuY29uc3QgU0NSSVBUID0gbmV3IEluamVjdGlvblRva2VuKG5nRGV2TW9kZSA/ICdOR1NXX1JFR0lTVEVSX1NDUklQVCcgOiAnJyk7XG5mdW5jdGlvbiBuZ3N3QXBwSW5pdGlhbGl6ZXIoKSB7XG4gIGlmICh0eXBlb2YgbmdTZXJ2ZXJNb2RlICE9PSAndW5kZWZpbmVkJyAmJiBuZ1NlcnZlck1vZGUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3Qgb3B0aW9ucyA9IGluamVjdChTd1JlZ2lzdHJhdGlvbk9wdGlvbnMpO1xuICBpZiAoISgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yICYmIG9wdGlvbnMuZW5hYmxlZCAhPT0gZmFsc2UpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHNjcmlwdCA9IGluamVjdChTQ1JJUFQpO1xuICBjb25zdCBuZ1pvbmUgPSBpbmplY3QoTmdab25lKTtcbiAgY29uc3QgYXBwUmVmID0gaW5qZWN0KEFwcGxpY2F0aW9uUmVmKTtcbiAgLy8gU2V0IHVwIHRoZSBgY29udHJvbGxlcmNoYW5nZWAgZXZlbnQgbGlzdGVuZXIgb3V0c2lkZSBvZlxuICAvLyB0aGUgQW5ndWxhciB6b25lIHRvIGF2b2lkIHVubmVjZXNzYXJ5IGNoYW5nZSBkZXRlY3Rpb25zLFxuICAvLyBhcyB0aGlzIGV2ZW50IGhhcyBubyBpbXBhY3Qgb24gdmlldyB1cGRhdGVzLlxuICBuZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgIC8vIFdhaXQgZm9yIHNlcnZpY2Ugd29ya2VyIGNvbnRyb2xsZXIgY2hhbmdlcywgYW5kIGZpcmUgYW4gSU5JVElBTElaRSBhY3Rpb24gd2hlbiBhIG5ldyBTV1xuICAgIC8vIGJlY29tZXMgYWN0aXZlLiBUaGlzIGFsbG93cyB0aGUgU1cgdG8gaW5pdGlhbGl6ZSBpdHNlbGYgZXZlbiBpZiB0aGVyZSBpcyBubyBhcHBsaWNhdGlvblxuICAgIC8vIHRyYWZmaWMuXG4gICAgY29uc3Qgc3cgPSBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlcjtcbiAgICBjb25zdCBvbkNvbnRyb2xsZXJDaGFuZ2UgPSAoKSA9PiBzdy5jb250cm9sbGVyPy5wb3N0TWVzc2FnZSh7XG4gICAgICBhY3Rpb246ICdJTklUSUFMSVpFJ1xuICAgIH0pO1xuICAgIHN3LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRyb2xsZXJjaGFuZ2UnLCBvbkNvbnRyb2xsZXJDaGFuZ2UpO1xuICAgIGFwcFJlZi5vbkRlc3Ryb3koKCkgPT4ge1xuICAgICAgc3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignY29udHJvbGxlcmNoYW5nZScsIG9uQ29udHJvbGxlckNoYW5nZSk7XG4gICAgfSk7XG4gIH0pO1xuICAvLyBSdW4gb3V0c2lkZSB0aGUgQW5ndWxhciB6b25lIHRvIGF2b2lkIHByZXZlbnRpbmcgdGhlIGFwcCBmcm9tIHN0YWJpbGl6aW5nIChlc3BlY2lhbGx5XG4gIC8vIGdpdmVuIHRoYXQgc29tZSByZWdpc3RyYXRpb24gc3RyYXRlZ2llcyB3YWl0IGZvciB0aGUgYXBwIHRvIHN0YWJpbGl6ZSkuXG4gIG5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgbGV0IHJlYWR5VG9SZWdpc3RlcjtcbiAgICBjb25zdCB7XG4gICAgICByZWdpc3RyYXRpb25TdHJhdGVneVxuICAgIH0gPSBvcHRpb25zO1xuICAgIGlmICh0eXBlb2YgcmVnaXN0cmF0aW9uU3RyYXRlZ3kgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJlYWR5VG9SZWdpc3RlciA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gcmVnaXN0cmF0aW9uU3RyYXRlZ3koKS5zdWJzY3JpYmUoKCkgPT4gcmVzb2x2ZSgpKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IFtzdHJhdGVneSwgLi4uYXJnc10gPSAocmVnaXN0cmF0aW9uU3RyYXRlZ3kgfHwgJ3JlZ2lzdGVyV2hlblN0YWJsZTozMDAwMCcpLnNwbGl0KCc6Jyk7XG4gICAgICBzd2l0Y2ggKHN0cmF0ZWd5KSB7XG4gICAgICAgIGNhc2UgJ3JlZ2lzdGVySW1tZWRpYXRlbHknOlxuICAgICAgICAgIHJlYWR5VG9SZWdpc3RlciA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdyZWdpc3RlcldpdGhEZWxheSc6XG4gICAgICAgICAgcmVhZHlUb1JlZ2lzdGVyID0gZGVsYXlXaXRoVGltZW91dCgrYXJnc1swXSB8fCAwKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncmVnaXN0ZXJXaGVuU3RhYmxlJzpcbiAgICAgICAgICByZWFkeVRvUmVnaXN0ZXIgPSBQcm9taXNlLnJhY2UoW2FwcFJlZi53aGVuU3RhYmxlKCksIGRlbGF5V2l0aFRpbWVvdXQoK2FyZ3NbMF0pXSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgLy8gVW5rbm93biBzdHJhdGVneS5cbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gU2VydmljZVdvcmtlciByZWdpc3RyYXRpb24gc3RyYXRlZ3k6ICR7b3B0aW9ucy5yZWdpc3RyYXRpb25TdHJhdGVneX1gKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gRG9uJ3QgcmV0dXJuIGFueXRoaW5nIHRvIGF2b2lkIGJsb2NraW5nIHRoZSBhcHBsaWNhdGlvbiB1bnRpbCB0aGUgU1cgaXMgcmVnaXN0ZXJlZC5cbiAgICAvLyBDYXRjaCBhbmQgbG9nIHRoZSBlcnJvciBpZiBTVyByZWdpc3RyYXRpb24gZmFpbHMgdG8gYXZvaWQgdW5jYXVnaHQgcmVqZWN0aW9uIHdhcm5pbmcuXG4gICAgcmVhZHlUb1JlZ2lzdGVyLnRoZW4oKCkgPT4gbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoc2NyaXB0LCB7XG4gICAgICBzY29wZTogb3B0aW9ucy5zY29wZVxuICAgIH0pLmNhdGNoKGVyciA9PiBjb25zb2xlLmVycm9yKCdTZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gZmFpbGVkIHdpdGg6JywgZXJyKSkpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGRlbGF5V2l0aFRpbWVvdXQodGltZW91dCkge1xuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIHRpbWVvdXQpKTtcbn1cbmZ1bmN0aW9uIG5nc3dDb21tQ2hhbm5lbEZhY3Rvcnkob3B0cywgaW5qZWN0b3IpIHtcbiAgY29uc3QgaXNCcm93c2VyID0gISh0eXBlb2YgbmdTZXJ2ZXJNb2RlICE9PSAndW5kZWZpbmVkJyAmJiBuZ1NlcnZlck1vZGUpO1xuICByZXR1cm4gbmV3IE5nc3dDb21tQ2hhbm5lbChpc0Jyb3dzZXIgJiYgb3B0cy5lbmFibGVkICE9PSBmYWxzZSA/IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyIDogdW5kZWZpbmVkLCBpbmplY3Rvcik7XG59XG4vKipcbiAqIFRva2VuIHRoYXQgY2FuIGJlIHVzZWQgdG8gcHJvdmlkZSBvcHRpb25zIGZvciBgU2VydmljZVdvcmtlck1vZHVsZWAgb3V0c2lkZSBvZlxuICogYFNlcnZpY2VXb3JrZXJNb2R1bGUucmVnaXN0ZXIoKWAuXG4gKlxuICogWW91IGNhbiB1c2UgdGhpcyB0b2tlbiB0byBkZWZpbmUgYSBwcm92aWRlciB0aGF0IGdlbmVyYXRlcyB0aGUgcmVnaXN0cmF0aW9uIG9wdGlvbnMgYXQgcnVudGltZSxcbiAqIGZvciBleGFtcGxlIHZpYSBhIGZ1bmN0aW9uIGNhbGw6XG4gKlxuICoge0BleGFtcGxlIHNlcnZpY2Utd29ya2VyL3JlZ2lzdHJhdGlvbi1vcHRpb25zL21vZHVsZS50cyByZWdpb249XCJyZWdpc3RyYXRpb24tb3B0aW9uc1wiXG4gKiAgICAgaGVhZGVyPVwiYXBwLm1vZHVsZS50c1wifVxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xuY2xhc3MgU3dSZWdpc3RyYXRpb25PcHRpb25zIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIFNlcnZpY2VXb3JrZXIgd2lsbCBiZSByZWdpc3RlcmVkIGFuZCB0aGUgcmVsYXRlZCBzZXJ2aWNlcyAoc3VjaCBhcyBgU3dQdXNoYCBhbmRcbiAgICogYFN3VXBkYXRlYCkgd2lsbCBhdHRlbXB0IHRvIGNvbW11bmljYXRlIGFuZCBpbnRlcmFjdCB3aXRoIGl0LlxuICAgKlxuICAgKiBEZWZhdWx0OiB0cnVlXG4gICAqL1xuICBlbmFibGVkO1xuICAvKipcbiAgICogQSBVUkwgdGhhdCBkZWZpbmVzIHRoZSBTZXJ2aWNlV29ya2VyJ3MgcmVnaXN0cmF0aW9uIHNjb3BlOyB0aGF0IGlzLCB3aGF0IHJhbmdlIG9mIFVSTHMgaXQgY2FuXG4gICAqIGNvbnRyb2wuIEl0IHdpbGwgYmUgdXNlZCB3aGVuIGNhbGxpbmdcbiAgICogW1NlcnZpY2VXb3JrZXJDb250YWluZXIjcmVnaXN0ZXIoKV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NlcnZpY2VXb3JrZXJDb250YWluZXIvcmVnaXN0ZXIpLlxuICAgKi9cbiAgc2NvcGU7XG4gIC8qKlxuICAgKiBEZWZpbmVzIHRoZSBTZXJ2aWNlV29ya2VyIHJlZ2lzdHJhdGlvbiBzdHJhdGVneSwgd2hpY2ggZGV0ZXJtaW5lcyB3aGVuIGl0IHdpbGwgYmUgcmVnaXN0ZXJlZFxuICAgKiB3aXRoIHRoZSBicm93c2VyLlxuICAgKlxuICAgKiBUaGUgZGVmYXVsdCBiZWhhdmlvciBvZiByZWdpc3RlcmluZyBvbmNlIHRoZSBhcHBsaWNhdGlvbiBzdGFiaWxpemVzIChpLmUuIGFzIHNvb24gYXMgdGhlcmUgYXJlXG4gICAqIG5vIHBlbmRpbmcgbWljcm8tIGFuZCBtYWNyby10YXNrcykgaXMgZGVzaWduZWQgdG8gcmVnaXN0ZXIgdGhlIFNlcnZpY2VXb3JrZXIgYXMgc29vbiBhc1xuICAgKiBwb3NzaWJsZSBidXQgd2l0aG91dCBhZmZlY3RpbmcgdGhlIGFwcGxpY2F0aW9uJ3MgZmlyc3QgdGltZSBsb2FkLlxuICAgKlxuICAgKiBTdGlsbCwgdGhlcmUgbWlnaHQgYmUgY2FzZXMgd2hlcmUgeW91IHdhbnQgbW9yZSBjb250cm9sIG92ZXIgd2hlbiB0aGUgU2VydmljZVdvcmtlciBpc1xuICAgKiByZWdpc3RlcmVkIChmb3IgZXhhbXBsZSwgdGhlcmUgbWlnaHQgYmUgYSBsb25nLXJ1bm5pbmcgdGltZW91dCBvciBwb2xsaW5nIGludGVydmFsLCBwcmV2ZW50aW5nXG4gICAqIHRoZSBhcHAgZnJvbSBzdGFiaWxpemluZykuIFRoZSBhdmFpbGFibGUgb3B0aW9uIGFyZTpcbiAgICpcbiAgICogLSBgcmVnaXN0ZXJXaGVuU3RhYmxlOjx0aW1lb3V0PmA6IFJlZ2lzdGVyIGFzIHNvb24gYXMgdGhlIGFwcGxpY2F0aW9uIHN0YWJpbGl6ZXMgKG5vIHBlbmRpbmdcbiAgICogICAgIG1pY3JvLS9tYWNyby10YXNrcykgYnV0IG5vIGxhdGVyIHRoYW4gYDx0aW1lb3V0PmAgbWlsbGlzZWNvbmRzLiBJZiB0aGUgYXBwIGhhc24ndFxuICAgKiAgICAgc3RhYmlsaXplZCBhZnRlciBgPHRpbWVvdXQ+YCBtaWxsaXNlY29uZHMgKGZvciBleGFtcGxlLCBkdWUgdG8gYSByZWN1cnJlbnQgYXN5bmNocm9ub3VzXG4gICAqICAgICB0YXNrKSwgdGhlIFNlcnZpY2VXb3JrZXIgd2lsbCBiZSByZWdpc3RlcmVkIGFueXdheS5cbiAgICogICAgIElmIGA8dGltZW91dD5gIGlzIG9taXR0ZWQsIHRoZSBTZXJ2aWNlV29ya2VyIHdpbGwgb25seSBiZSByZWdpc3RlcmVkIG9uY2UgdGhlIGFwcFxuICAgKiAgICAgc3RhYmlsaXplcy5cbiAgICogLSBgcmVnaXN0ZXJJbW1lZGlhdGVseWA6IFJlZ2lzdGVyIGltbWVkaWF0ZWx5LlxuICAgKiAtIGByZWdpc3RlcldpdGhEZWxheTo8dGltZW91dD5gOiBSZWdpc3RlciB3aXRoIGEgZGVsYXkgb2YgYDx0aW1lb3V0PmAgbWlsbGlzZWNvbmRzLiBGb3JcbiAgICogICAgIGV4YW1wbGUsIHVzZSBgcmVnaXN0ZXJXaXRoRGVsYXk6NTAwMGAgdG8gcmVnaXN0ZXIgdGhlIFNlcnZpY2VXb3JrZXIgYWZ0ZXIgNSBzZWNvbmRzLiBJZlxuICAgKiAgICAgYDx0aW1lb3V0PmAgaXMgb21pdHRlZCwgaXMgZGVmYXVsdHMgdG8gYDBgLCB3aGljaCB3aWxsIHJlZ2lzdGVyIHRoZSBTZXJ2aWNlV29ya2VyIGFzIHNvb25cbiAgICogICAgIGFzIHBvc3NpYmxlIGJ1dCBzdGlsbCBhc3luY2hyb25vdXNseSwgb25jZSBhbGwgcGVuZGluZyBtaWNyby10YXNrcyBhcmUgY29tcGxldGVkLlxuICAgKiAtIEFuIE9ic2VydmFibGUgZmFjdG9yeSBmdW5jdGlvbjogQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gYE9ic2VydmFibGVgLlxuICAgKiAgICAgVGhlIGZ1bmN0aW9uIHdpbGwgYmUgdXNlZCBhdCBydW50aW1lIHRvIG9idGFpbiBhbmQgc3Vic2NyaWJlIHRvIHRoZSBgT2JzZXJ2YWJsZWAgYW5kIHRoZVxuICAgKiAgICAgU2VydmljZVdvcmtlciB3aWxsIGJlIHJlZ2lzdGVyZWQgYXMgc29vbiBhcyB0aGUgZmlyc3QgdmFsdWUgaXMgZW1pdHRlZC5cbiAgICpcbiAgICogRGVmYXVsdDogJ3JlZ2lzdGVyV2hlblN0YWJsZTozMDAwMCdcbiAgICovXG4gIHJlZ2lzdHJhdGlvblN0cmF0ZWd5O1xufVxuLyoqXG4gKiBAcHVibGljQXBpXG4gKlxuICogU2V0cyB1cCBwcm92aWRlcnMgdG8gcmVnaXN0ZXIgdGhlIGdpdmVuIEFuZ3VsYXIgU2VydmljZSBXb3JrZXIgc2NyaXB0LlxuICpcbiAqIElmIGBlbmFibGVkYCBpcyBzZXQgdG8gYGZhbHNlYCBpbiB0aGUgZ2l2ZW4gb3B0aW9ucywgdGhlIG1vZHVsZSB3aWxsIGJlaGF2ZSBhcyBpZiBzZXJ2aWNlXG4gKiB3b3JrZXJzIGFyZSBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyLCBhbmQgdGhlIHNlcnZpY2Ugd29ya2VyIHdpbGwgbm90IGJlIHJlZ2lzdGVyZWQuXG4gKlxuICogRXhhbXBsZSB1c2FnZTpcbiAqIGBgYHRzXG4gKiBib290c3RyYXBBcHBsaWNhdGlvbihBcHBDb21wb25lbnQsIHtcbiAqICAgcHJvdmlkZXJzOiBbXG4gKiAgICAgcHJvdmlkZVNlcnZpY2VXb3JrZXIoJ25nc3ctd29ya2VyLmpzJylcbiAqICAgXSxcbiAqIH0pO1xuICogYGBgXG4gKi9cbmZ1bmN0aW9uIHByb3ZpZGVTZXJ2aWNlV29ya2VyKHNjcmlwdCwgb3B0aW9ucyA9IHt9KSB7XG4gIHJldHVybiBtYWtlRW52aXJvbm1lbnRQcm92aWRlcnMoW1N3UHVzaCwgU3dVcGRhdGUsIHtcbiAgICBwcm92aWRlOiBTQ1JJUFQsXG4gICAgdXNlVmFsdWU6IHNjcmlwdFxuICB9LCB7XG4gICAgcHJvdmlkZTogU3dSZWdpc3RyYXRpb25PcHRpb25zLFxuICAgIHVzZVZhbHVlOiBvcHRpb25zXG4gIH0sIHtcbiAgICBwcm92aWRlOiBOZ3N3Q29tbUNoYW5uZWwsXG4gICAgdXNlRmFjdG9yeTogbmdzd0NvbW1DaGFubmVsRmFjdG9yeSxcbiAgICBkZXBzOiBbU3dSZWdpc3RyYXRpb25PcHRpb25zLCBJbmplY3Rvcl1cbiAgfSwgcHJvdmlkZUFwcEluaXRpYWxpemVyKG5nc3dBcHBJbml0aWFsaXplcildKTtcbn1cblxuLyoqXG4gKiBAcHVibGljQXBpXG4gKi9cbmNsYXNzIFNlcnZpY2VXb3JrZXJNb2R1bGUge1xuICAvKipcbiAgICogUmVnaXN0ZXIgdGhlIGdpdmVuIEFuZ3VsYXIgU2VydmljZSBXb3JrZXIgc2NyaXB0LlxuICAgKlxuICAgKiBJZiBgZW5hYmxlZGAgaXMgc2V0IHRvIGBmYWxzZWAgaW4gdGhlIGdpdmVuIG9wdGlvbnMsIHRoZSBtb2R1bGUgd2lsbCBiZWhhdmUgYXMgaWYgc2VydmljZVxuICAgKiB3b3JrZXJzIGFyZSBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyLCBhbmQgdGhlIHNlcnZpY2Ugd29ya2VyIHdpbGwgbm90IGJlIHJlZ2lzdGVyZWQuXG4gICAqL1xuICBzdGF0aWMgcmVnaXN0ZXIoc2NyaXB0LCBvcHRpb25zID0ge30pIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmdNb2R1bGU6IFNlcnZpY2VXb3JrZXJNb2R1bGUsXG4gICAgICBwcm92aWRlcnM6IFtwcm92aWRlU2VydmljZVdvcmtlcihzY3JpcHQsIG9wdGlvbnMpXVxuICAgIH07XG4gIH1cbiAgc3RhdGljIMm1ZmFjID0gZnVuY3Rpb24gU2VydmljZVdvcmtlck1vZHVsZV9GYWN0b3J5KF9fbmdGYWN0b3J5VHlwZV9fKSB7XG4gICAgcmV0dXJuIG5ldyAoX19uZ0ZhY3RvcnlUeXBlX18gfHwgU2VydmljZVdvcmtlck1vZHVsZSkoKTtcbiAgfTtcbiAgc3RhdGljIMm1bW9kID0gLyogQF9fUFVSRV9fICovaTAuybXJtWRlZmluZU5nTW9kdWxlKHtcbiAgICB0eXBlOiBTZXJ2aWNlV29ya2VyTW9kdWxlXG4gIH0pO1xuICBzdGF0aWMgybVpbmogPSAvKiBAX19QVVJFX18gKi9pMC7Jtcm1ZGVmaW5lSW5qZWN0b3Ioe1xuICAgIHByb3ZpZGVyczogW1N3UHVzaCwgU3dVcGRhdGVdXG4gIH0pO1xufVxuKCgpID0+IHtcbiAgKHR5cGVvZiBuZ0Rldk1vZGUgPT09IFwidW5kZWZpbmVkXCIgfHwgbmdEZXZNb2RlKSAmJiBpMC7JtXNldENsYXNzTWV0YWRhdGEoU2VydmljZVdvcmtlck1vZHVsZSwgW3tcbiAgICB0eXBlOiBOZ01vZHVsZSxcbiAgICBhcmdzOiBbe1xuICAgICAgcHJvdmlkZXJzOiBbU3dQdXNoLCBTd1VwZGF0ZV1cbiAgICB9XVxuICB9XSwgbnVsbCwgbnVsbCk7XG59KSgpO1xuZXhwb3J0IHsgU2VydmljZVdvcmtlck1vZHVsZSwgU3dQdXNoLCBTd1JlZ2lzdHJhdGlvbk9wdGlvbnMsIFN3VXBkYXRlLCBwcm92aWRlU2VydmljZVdvcmtlciB9O1xuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBOZ1pvbmUsIE9uSW5pdCB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBTd1VwZGF0ZSwgVmVyc2lvbkV2ZW50IH0gZnJvbSBcIkBhbmd1bGFyL3NlcnZpY2Utd29ya2VyXCI7XG5pbXBvcnQgeyBTdGF0dXNCYXIsIFN0eWxlIH0gZnJvbSAnQGNhcGFjaXRvci9zdGF0dXMtYmFyJztcbmltcG9ydCB7IFBsYXRmb3JtIH0gZnJvbSAnQGlvbmljL2FuZ3VsYXInO1xuXG5pbXBvcnQge1xuICBBbGVydENvbnRyb2xsZXIsXG4gIE1lbnVDb250cm9sbGVyLFxuICBNb2RhbENvbnRyb2xsZXIsXG4gIFRvYXN0Q29udHJvbGxlcixcbn0gZnJvbSBcIkBpb25pYy9hbmd1bGFyXCI7XG5pbXBvcnQgeyBBcHAgfSBmcm9tICdAY2FwYWNpdG9yL2FwcCc7XG5pbXBvcnQgeyBEaWFsb2cgfSBmcm9tIFwiQGNhcGFjaXRvci9kaWFsb2dcIjtcbmltcG9ydCB7IEF1dGhTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZXMvYXV0aC5zZXJ2aWNlXCI7XG5pbXBvcnQgcGFja2FnZWpzb24gZnJvbSBcIi4vLi4vLi4vcGFja2FnZS5qc29uXCI7XG5pbXBvcnQgeyBGaXJlYmFzZVNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlcy9maXJlYmFzZS5zZXJ2aWNlXCI7XG5pbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiQGFuZ3VsYXIvcm91dGVyXCI7XG5pbXBvcnQgeyBTcGxhc2hTY3JlZW4gfSBmcm9tIFwiQGNhcGFjaXRvci9zcGxhc2gtc2NyZWVuXCI7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJzY3JpcHRpb24sIG9mLCBzd2l0Y2hNYXAsIHRha2UsIHRhcCB9IGZyb20gXCJyeGpzXCI7XG5pbXBvcnQgeyBVc2VyLCBvbkF1dGhTdGF0ZUNoYW5nZWQgfSBmcm9tIFwiQGFuZ3VsYXIvZmlyZS9hdXRoXCI7XG5pbXBvcnQgeyBVc2VyUHJvZmlsZVNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlcy9maXJlYmFzZS91c2VyLXByb2ZpbGUuc2VydmljZVwiO1xuaW1wb3J0IHsgRGV2aWNlLCBEZXZpY2VJZCwgRGV2aWNlSW5mbywgTGFuZ3VhZ2VUYWcgfSBmcm9tIFwiQGNhcGFjaXRvci9kZXZpY2VcIjtcbmltcG9ydCB7IE5ldHdvcmssIENvbm5lY3Rpb25TdGF0dXMgfSBmcm9tIFwiQGNhcGFjaXRvci9uZXR3b3JrXCI7XG5pbXBvcnQgeyBUcmFuc2xhdGVTZXJ2aWNlIH0gZnJvbSBcIkBuZ3gtdHJhbnNsYXRlL2NvcmVcIjtcbmltcG9ydCB7IENsdWIgfSBmcm9tIFwiLi9tb2RlbHMvY2x1YlwiO1xuXG5pbXBvcnQge1xuICBBY3Rpb25QZXJmb3JtZWQsXG4gIFB1c2hOb3RpZmljYXRpb25TY2hlbWEsXG4gIFB1c2hOb3RpZmljYXRpb25zLFxuICBUb2tlbixcbn0gZnJvbSBcIkBjYXBhY2l0b3IvcHVzaC1ub3RpZmljYXRpb25zXCI7XG5pbXBvcnQgeyBDbHViU3Vic2NyaXB0aW9uUGFnZSB9IGZyb20gXCIuL3BhZ2VzL2NsdWItc3Vic2NyaXB0aW9uL2NsdWItc3Vic2NyaXB0aW9uLnBhZ2VcIjtcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6IFwiYXBwLXJvb3RcIixcbiAgICB0ZW1wbGF0ZVVybDogXCJhcHAuY29tcG9uZW50Lmh0bWxcIixcbiAgICBzdHlsZVVybHM6IFtcImFwcC5jb21wb25lbnQuc2Nzc1wiXSxcbiAgICBzdGFuZGFsb25lOiBmYWxzZVxufSlcbmV4cG9ydCBjbGFzcyBBcHBDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBwdWJsaWMgZW1haWw6IHN0cmluZztcbiAgcHVibGljIGFwcFZlcnNpb246IHN0cmluZyA9IHBhY2thZ2Vqc29uLnZlcnNpb247XG4gIHB1YmxpYyBidWlsZE51bWJlcjogc3RyaW5nID0gcGFja2FnZWpzb24uYnVpbGROdW1iZXI7XG5cbiAgY2x1Ykxpc3QkOiBPYnNlcnZhYmxlPENsdWJbXT47XG5cblxuICBwcml2YXRlIGNsdWJMaXN0U3ViOiBTdWJzY3JpcHRpb247XG5cblxuICB1c2VyOiBVc2VyO1xuICBkZXZpY2VJZDogRGV2aWNlSWQ7XG4gIGRldmljZUluZm86IERldmljZUluZm87XG5cbiAgdXNlckhhc1RlYW06IGJvb2xlYW4gPSBmYWxzZTtcbiAgdXNlckhhc0NsdWI6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihcblxuICAgIHByaXZhdGUgcGxhdGZvcm06IFBsYXRmb3JtLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgc3dVcGRhdGU6IFN3VXBkYXRlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgbW9kYWxDdHJsOiBNb2RhbENvbnRyb2xsZXIsXG4gICAgLy8gcHJpdmF0ZSByZWFkb25seSByb3V0ZXJPdXRsZXQ6IElvblJvdXRlck91dGxldCxcbiAgICAvLyBwcml2YXRlIHJlYWRvbmx5IHN3UHVzaDogU3dQdXNoLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgYWxlcnRDb250cm9sbGVyOiBBbGVydENvbnRyb2xsZXIsXG4gICAgcHJpdmF0ZSByZWFkb25seSBhdXRoU2VydmljZTogQXV0aFNlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSBmYlNlcnZpY2U6IEZpcmViYXNlU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IHByb2ZpbGVTZXJ2aWNlOiBVc2VyUHJvZmlsZVNlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSByb3V0ZXI6IFJvdXRlcixcbiAgICBwdWJsaWMgcmVhZG9ubHkgbWVudUN0cmw6IE1lbnVDb250cm9sbGVyLFxuICAgIHByaXZhdGUgdHJhbnNsYXRlOiBUcmFuc2xhdGVTZXJ2aWNlLFxuICAgIHB1YmxpYyB0b2FzdENvbnRyb2xsZXI6IFRvYXN0Q29udHJvbGxlcixcbiAgICBwcml2YXRlIG5nWm9uZTogTmdab25lLFxuXG4gICkge1xuICAgIHRoaXMuaW5pdGlhbGl6ZUFwcCgpO1xuXG5cbiAgICBvbkF1dGhTdGF0ZUNoYW5nZWQodGhpcy5hdXRoU2VydmljZS5hdXRoLCBhc3luYyAodXNlcikgPT4ge1xuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgLy8gMC4gTE9HSU5cbiAgICAgICAgdGhpcy5lbWFpbCA9IHVzZXIuZW1haWw7XG4gICAgICAgIHRoaXMudXNlciA9IHVzZXI7XG5cbiAgICAgICAgaWYgKCF1c2VyLmVtYWlsVmVyaWZpZWQpIHtcbiAgICAgICAgICBjb25zdCBuYXZPbmJvYXJkaW5nRW1haWwgPSBhd2FpdCB0aGlzLnJvdXRlci5uYXZpZ2F0ZUJ5VXJsKCcvb25ib2FyZGluZy1lbWFpbCcpO1xuICAgICAgICAgIGlmIChuYXZPbmJvYXJkaW5nRW1haWwpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdOYXZpZ2F0aW9uIHN1Y2Nlc3MgdG8gb25ib2FyZGluZyBFbWFpbCBQYWdlJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05hdmlnYXRpb24gRVJST1IgdG8gb25ib2FyZGluZyBFbWFpbCBQYWdlJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiRS1NYWlsIElTIHZlcmlmaWVkLiBHbyBhaGVhZC4uXCIpXG4gICAgICAgICAgY29uc29sZS5sb2codXNlci5lbWFpbCwgdXNlci5kaXNwbGF5TmFtZSwgdXNlci5lbWFpbFZlcmlmaWVkKVxuICAgICAgICAgIHRoaXMuY2x1Ykxpc3RTdWIgPSB0aGlzLmNsdWJMaXN0JFxuICAgICAgICAgICAgLnBpcGUoXG4gICAgICAgICAgICAgIHRha2UoMSksXG4gICAgICAgICAgICAgIHRhcChhc3luYyAoY2x1Ykxpc3QpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY2x1Ykxpc3QubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTk8hIENsdWIgRGF0YSByZWNlaXZlZC4gPiBDYWxsIENsdWIgT25ib2FyZGluZ1wiKTtcbiAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hdk9uYm9hcmRpbmdDbHViID0gYXdhaXQgdGhpcy5yb3V0ZXIubmF2aWdhdGVCeVVybCgnL29uYm9hcmRpbmctY2x1YicpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmF2T25ib2FyZGluZ0NsdWIpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTmF2aWdhdGlvbiBzdWNjZXNzIHRvIG9uYm9hcmRpbmcgQ2x1YiBQYWdlJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignTmF2aWdhdGlvbiBFUlJPUiB0byBvbmJvYXJkaW5nIENsdWIgUGFnZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdOYXZpZ2F0aW9uIEV4Y2VwdGlvbjonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLy8gQ0hFQ0sgU1VCU0NSSVBUSU9OIEZPUiBDTFVCXG4gICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjbHViTGlzdC5maW5kKChjbHViOmFueSk9PmNsdWIuc3Vic2NyaXB0aW9uQWN0aXZlID09IGZhbHNlICkpXG5cbiAgICAgICAgICAgICAgICAgIGlmIChjbHViTGlzdC5maW5kKChjbHViOiBhbnkpID0+IGNsdWIuc3Vic2NyaXB0aW9uQWN0aXZlID09IGZhbHNlKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5PIFNVQlNDUklQVElPTiBGT1VORFwiKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RhbCA9IGF3YWl0IHRoaXMubW9kYWxDdHJsLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50OiBDbHViU3Vic2NyaXB0aW9uUGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICBwcmVzZW50aW5nRWxlbWVudDogYXdhaXQgdGhpcy5tb2RhbEN0cmwuZ2V0VG9wKCksXG4gICAgICAgICAgICAgICAgICAgICAgY2FuRGlzbWlzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICBzaG93QmFja2Ryb3A6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50UHJvcHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsdWJJZDogY2x1Ykxpc3QuZmluZCgoY2x1YjogYW55KSA9PiBjbHViLnN1YnNjcmlwdGlvbkFjdGl2ZSA9PSBmYWxzZSkuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLnByZXNlbnQoKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHJvbGUgfSA9IGF3YWl0IG1vZGFsLm9uV2lsbERpc21pc3MoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocm9sZSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvbGUgPT09IFwiY2xvc2VcIiB8fCByb2xlID09IFwiYmFja2Ryb3BcIikge1xuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXV0aFNlcnZpY2UubG9nb3V0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2x1YiBpcyBhY3RpdmVcIilcbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB9XG5cblxuICAgICAgICAvLyBTRXQgREVWSUNFIElORk9TXG4gICAgICAgIHRoaXMuZGV2aWNlSW5mbyA9IGF3YWl0IERldmljZS5nZXRJbmZvKCk7XG4gICAgICAgIHRoaXMuZGV2aWNlSWQgPSBhd2FpdCBEZXZpY2UuZ2V0SWQoKTtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5kZXZpY2VJbmZvKTtcbiAgICAgICAgLy8gUmVnaXN0ZXIgTmF0aXZlIFB1c2hcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRoaXMuZGV2aWNlSW5mby5wbGF0Zm9ybSA9PSBcImFuZHJvaWRcIiB8fFxuICAgICAgICAgIHRoaXMuZGV2aWNlSW5mby5wbGF0Zm9ybSA9PSBcImlvc1wiXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIHRoaXMuc3Vic2NyaWJlTW9iaWxlTm90aWZpY2F0aW9ucygpO1xuICAgICAgICAgIHRoaXMucmVnaXN0ZXJOb3RpZmljYXRpb25zKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUmVnaXN0ZXIgV2ViIFB1c2gsIGlmIGF2YWlsYWJsZVxuICAgICAgICB9XG5cblxuXG4gICAgICAgIC8vIHRoaXMucGxhdGZvcm0ucmVhZHkoKS50aGVuKGFzeW5jICgpID0+IHtcblxuXG4gICAgICAgIC8vIH0pXG4gICAgICAgIC8vIFJFQUQgVVNFUiBMQU5HVUFHRSBGUk9NIERBVEFCQVNFIGlmIEFWQUlMQUJMRVxuXG4gICAgICAgIC8vIEVMU0UgR0VUIERFVklDRSBQUklNQVJZIExBTkdVQUdFXG4gICAgICAgIC8qRGV2aWNlLmdldExhbmd1YWdlQ29kZSgpLnRoZW4oKHJlc3VsdDogR2V0TGFuZ3VhZ2VDb2RlUmVzdWx0KT0+e1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwibGFuZ3VhZ2UgY29kZVwiKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICB9KTsqL1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJVc2VyIGlzIHNpZ25lZCBvdXRcIik7XG4gICAgICAgIHRoaXMubWVudUN0cmwuZW5hYmxlKGZhbHNlLCBcIm1lbnVcIik7XG4gICAgICAgIHRoaXMuZW1haWwgPSBcIlwiO1xuICAgICAgICBjb25zdCBuYXZMb2dvdXQgPSBhd2FpdCB0aGlzLnJvdXRlci5uYXZpZ2F0ZUJ5VXJsKCcvbG9naW4nKTtcbiAgICAgICAgaWYgKG5hdkxvZ291dCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdOYXZpZ2F0aW9uIFNVQ0NFU1MgdG8gTG9nb3V0IFBhZ2UnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdOYXZpZ2F0aW9uIEVSUk9SIHRvIExvZ291dCBQYWdlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuXG4gIH1cbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgQXBwLnJlbW92ZUFsbExpc3RlbmVycygpLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5yZWdpc3RlckJhY2tCdXR0b24oKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY2x1Ykxpc3QkID0gdGhpcy5mYlNlcnZpY2UuZ2V0Q2x1Ykxpc3QoKTtcbiAgICBOZXR3b3JrLmFkZExpc3RlbmVyKFxuICAgICAgXCJuZXR3b3JrU3RhdHVzQ2hhbmdlXCIsXG4gICAgICBhc3luYyAoc3RhdHVzOiBDb25uZWN0aW9uU3RhdHVzKSA9PiB7XG4gICAgICAgIGlmICghc3RhdHVzLmNvbm5lY3RlZCkge1xuICAgICAgICAgIC8vIGNvbnN0IHRvYXN0ID0gYXdhaXQgdGhpcy50b2FzdENvbnRyb2xsZXIuY3JlYXRlKHtcbiAgICAgICAgICAvLyAgIG1lc3NhZ2U6IFwiRHUgYmlzdCBvZmZsaW5lXCIsXG4gICAgICAgICAgLy8gICBkdXJhdGlvbjogMzAwMCxcbiAgICAgICAgICAvLyAgIHBvc2l0aW9uOiBcInRvcFwiLFxuICAgICAgICAgIC8vICAgYnV0dG9uczogW1xuICAgICAgICAgIC8vICAgICB7XG4gICAgICAgICAgLy8gICAgICAgLy8gdGV4dDpcIk9rXCIsXG4gICAgICAgICAgLy8gICAgICAgaWNvbjogXCJjbG91ZC1vZmZsaW5lLW91dGxpbmVcIlxuICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgLy8gICBdLFxuICAgICAgICAgIC8vICAgY29sb3I6IFwiZGFuZ2VyXCIsXG4gICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgLy8gYXdhaXQgdG9hc3QucHJlc2VudCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGNvbnN0IHRvYXN0ID0gYXdhaXQgdGhpcy50b2FzdENvbnRyb2xsZXIuY3JlYXRlKHtcbiAgICAgICAgICAvLyAgIG1lc3NhZ2U6IFwiRHUgYmlzdCBvbmxpbmVcIixcbiAgICAgICAgICAvLyAgIGR1cmF0aW9uOiAxNTAwLFxuICAgICAgICAgIC8vICAgcG9zaXRpb246IFwidG9wXCIsXG4gICAgICAgICAgLy8gICBjb2xvcjogXCJzdWNjZXNzXCIsXG4gICAgICAgICAgLy8gICBidXR0b25zOiBbXG4gICAgICAgICAgLy8gICAgIHtcbiAgICAgICAgICAvLyAgICAgICAvLyB0ZXh0OlwiT2tcIixcbiAgICAgICAgICAvLyAgICAgICBpY29uOiBcIndpZmktb3V0bGluZVwiXG4gICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAvLyAgIF0sXG4gICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgLy8gYXdhaXQgdG9hc3QucHJlc2VudCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcblxuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgTmV0d29yay5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblxuICAgIEFwcC5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblxuICAgIGlmICh0aGlzLmNsdWJMaXN0U3ViKSB7XG4gICAgICB0aGlzLmNsdWJMaXN0U3ViLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuXG4gIH1cblxuICBpbml0aWFsaXplQXBwKCk6IHZvaWQge1xuICAgIHRoaXMuc2V0U3RhdHVzQmFyKCk7XG4gICAgdGhpcy5zaG93U3BsYXNoU2NyZWVuKCk7XG4gICAgdGhpcy5zZXREZWZhdWx0TGFuZ3VhZ2UoKTtcbiAgICB0aGlzLnN3VXBkYXRlLnZlcnNpb25VcGRhdGVzLnN1YnNjcmliZSgoZXZlbnQ6IFZlcnNpb25FdmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LnR5cGUgPT09IFwiVkVSU0lPTl9SRUFEWVwiKSB7XG4gICAgICAgIHRoaXMucHJlc2VudEFsZXJ0VXBkYXRlVmVyc2lvbigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9IFxuXG4gIHByaXZhdGUgc2V0U3RhdHVzQmFyKCkge1xuIFxuICAgIFN0YXR1c0Jhci5zZXRPdmVybGF5c1dlYlZpZXcoeyBcbiAgICAgIG92ZXJsYXk6IGZhbHNlLFxuICAgIH0pO1xuXG4gICAgY29uc3QgcHJlZmVyc0RhcmsgPSB3aW5kb3cubWF0Y2hNZWRpYSgnKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKScpLm1hdGNoZXM7XG4gICAgaWYgKHByZWZlcnNEYXJrKSB7XG4gICAgICBTdGF0dXNCYXIuc2V0U3R5bGUoeyBzdHlsZTogU3R5bGUuRGFyayB9KTtcbiAgICAgIFN0YXR1c0Jhci5zZXRCYWNrZ3JvdW5kQ29sb3IoeyBjb2xvcjogJyM3OTVkZWInIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBTdGF0dXNCYXIuc2V0U3R5bGUoeyBzdHlsZTogU3R5bGUuTGlnaHQgfSk7XG4gICAgICBTdGF0dXNCYXIuc2V0QmFja2dyb3VuZENvbG9yKHsgY29sb3I6ICcjMzM5YmRlJyB9KTtcbiAgICB9XG5cbiAgICB3aW5kb3cubWF0Y2hNZWRpYSgnKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGUgPT4ge1xuICAgICAgY29uc3QgbmV3Q29sb3JTY2hlbWUgPSBlLm1hdGNoZXMgPyAnZGFyaycgOiAnbGlnaHQnO1xuICAgICAgY29uc29sZS5sb2coJ1N5c3RlbSB0aGVtZSBjaGFuZ2VkIHRvOicsIG5ld0NvbG9yU2NoZW1lKTtcbiAgICAgIGlmIChuZXdDb2xvclNjaGVtZSA9PSAnZGFyaycpIHtcbiAgICAgICAgU3RhdHVzQmFyLnNldFN0eWxlKHsgc3R5bGU6IFN0eWxlLkRhcmsgfSk7XG4gICAgICAgIFN0YXR1c0Jhci5zZXRCYWNrZ3JvdW5kQ29sb3IoeyBjb2xvcjogJyM3OTVkZWInIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgU3RhdHVzQmFyLnNldFN0eWxlKHsgc3R5bGU6IFN0eWxlLkxpZ2h0IH0pO1xuICAgICAgICBTdGF0dXNCYXIuc2V0QmFja2dyb3VuZENvbG9yKHsgY29sb3I6ICcjMzM5YmRlJyB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICB9XG5cbiAgcHJpdmF0ZSByZWdpc3RlckJhY2tCdXR0b24oKSB7XG4gICAgQXBwLmFkZExpc3RlbmVyKCdiYWNrQnV0dG9uJywgYXN5bmMgKHsgY2FuR29CYWNrIH0pID0+IHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiYmFja2J1dHRvblwiLCBjYW5Hb0JhY2spO1xuICAgICAgLy8gY29uc29sZS5sb2coXCI+XCIsIHRoaXMucm91dGVyLmxhc3RTdWNjZXNzZnVsTmF2aWdhdGlvbilcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiPj5cIiwgdGhpcy5yb3V0ZXIuZ2V0Q3VycmVudE5hdmlnYXRpb24oKSlcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiPj4+XCIsIHdpbmRvdy5oaXN0b3J5Lmxlbmd0aCk7XG4gICAgICBjb25zdCBtb2RhbCA9IGF3YWl0IHRoaXMubW9kYWxDdHJsLmdldFRvcCgpXG4gICAgICBpZiAobW9kYWwpIHtcbiAgICAgICAgbW9kYWwuZGlzbWlzcygpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2UgaWYgKGNhbkdvQmFjaykge1xuICAgICAgICAvLyBOYXZpZ2llcmVuIFNpZSB6dXLDvGNrIGluIGRlciBBcHAtSGlzdG9yaWVcbiAgICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQmVlbmRlbiBTaWUgZGllIEFwcCwgd2VubiBrZWluZSB2b3JoZXJpZ2UgU2VpdGUgdm9yaGFuZGVuIGlzdFxuICAgICAgICBBcHAuZXhpdEFwcCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyphc3luYyBkb09uYm9hcmRpbmdFbWFpbCh1c2VyKSB7XG4gICAgLy8gY29uc3QgcHJlc2VudGluZ0VsZW1lbnQgPSBhd2FpdCB0aGlzLm1vZGFsQ3RybC5nZXRUb3AoKTtcbiAgICBjb25zdCBtb2RhbCA9IGF3YWl0IHRoaXMubW9kYWxDdHJsLmNyZWF0ZSh7XG4gICAgICBjb21wb25lbnQ6IE9uYm9hcmRpbmdQYWdlLFxuICAgICAgcHJlc2VudGluZ0VsZW1lbnQ6IGF3YWl0IHRoaXMubW9kYWxDdHJsLmdldFRvcCgpLCAvLyAgdGhpcy5yb3V0ZXJPdXRsZXQubmF0aXZlRWwsXG4gICAgICBjYW5EaXNtaXNzOiBmYWxzZSxcbiAgICAgIHNob3dCYWNrZHJvcDogdHJ1ZSxcbiAgICAgIGNvbXBvbmVudFByb3BzOiB7XG4gICAgICAgIGRhdGE6IHVzZXIsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIG1vZGFsLnByZXNlbnQoKTtcblxuICAgIGNvbnN0IHsgZGF0YSwgcm9sZSB9ID0gYXdhaXQgbW9kYWwub25XaWxsRGlzbWlzcygpO1xuXG4gICAgaWYgKHJvbGUgPT09IFwiY2xvc2VcIikge1xuICAgICAgY29uc29sZS5sb2coXCI+Pj4gY2xvc2Ugb25ib2FyZGluZyBtb2RhbFwiICsgZGF0YSk7XG4gICAgfVxuICB9Ki9cblxuICBzZXRGYWxsYmFja0xhbmd1YWdlKCkge1xuICAgIERldmljZS5nZXRMYW5ndWFnZVRhZygpLnRoZW4oKHJlc3VsdDogTGFuZ3VhZ2VUYWcpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgcmVzdWx0LnZhbHVlID09IFwiZGVcIiB8fFxuICAgICAgICByZXN1bHQudmFsdWUgPT0gXCJmclwiIHx8XG4gICAgICAgIHJlc3VsdC52YWx1ZSA9PSBcImVuXCIgfHxcbiAgICAgICAgcmVzdWx0LnZhbHVlID09IFwiaXRcIlxuICAgICAgKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiU2V0IEZhbGxiYWNrIExhbmd1YWdlIHRvIERldmljZSBMYW5ndWFnZTogXCIgKyByZXN1bHQudmFsdWUpO1xuICAgICAgICB0aGlzLnRyYW5zbGF0ZS51c2UocmVzdWx0LnZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiU2V0IEZhbGxiYWNrIExhbmd1YWdlIHRvIERFXCIpO1xuICAgICAgICB0aGlzLnRyYW5zbGF0ZS51c2UoXCJkZVwiKTtcbiAgICAgICAgLy8gdGhpcy50cmFuc2xhdGUucmVzZXRMYW5nKFwiZGVcIik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBzZXREZWZhdWx0TGFuZ3VhZ2UoKSB7XG4gICAgdGhpcy5hdXRoU2VydmljZVxuICAgICAgLmdldFVzZXIkKClcbiAgICAgIC5waXBlKFxuICAgICAgICB0YWtlKDEpLFxuICAgICAgICB0YXAoKHVzZXIpID0+ICh0aGlzLnVzZXIgPSB1c2VyKSksXG4gICAgICAgIHN3aXRjaE1hcCgodXNlcikgPT5cbiAgICAgICAgICB1c2VyID8gdGhpcy5wcm9maWxlU2VydmljZS5nZXRVc2VyUHJvZmlsZSh1c2VyKSA6IG9mKG51bGwpXG4gICAgICAgIClcbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUoKHByb2ZpbGUpID0+IHtcbiAgICAgICAgaWYgKHByb2ZpbGUpIHtcbiAgICAgICAgICBpZiAocHJvZmlsZS5sYW5ndWFnZSkge1xuICAgICAgICAgICAgaWYgKHByb2ZpbGUubGFuZ3VhZ2UubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInNldCB1c2VyIGxhbmdhdWdlOiBcIiArIHByb2ZpbGUubGFuZ3VhZ2UpO1xuICAgICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZS51c2UocHJvZmlsZS5sYW5ndWFnZSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRGYWxsYmFja0xhbmd1YWdlKCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qYXN5bmMgcmVxdWVzdFN1YnNjcmlwdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuc3dQdXNoLmlzRW5hYmxlZCkge1xuICAgICAgY29uc29sZS5sb2coXCJOb3RpZmljYXRpb24gaXMgbm90IGVuYWJsZWQuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuZGV2aWNlSWQgPSBhd2FpdCBEZXZpY2UuZ2V0SWQoKTtcbiAgICB0aGlzLmRldmljZUluZm8gPSBhd2FpdCBEZXZpY2UuZ2V0SW5mbygpO1xuXG4gICAgY29uc3QgcHVzaFN1YnNjcmlwdGlvbiA9IGF3YWl0IHRoaXMuc3dQdXNoLnJlcXVlc3RTdWJzY3JpcHRpb24oe1xuICAgICAgc2VydmVyUHVibGljS2V5OlxuICAgICAgICBcIkJGU0NwcFhhMU9QQ2t0clloWk4zR2ZYNWdLSTAwYWwtZU55a0J3azNybUhSd2pmckdlbzNKWGFUUFBfMEVHUTAxSWtfVWJjMmR6dnZGUW1PYzNHdlhzWVwiLFxuICAgIH0pO1xuXG4gICAgYXdhaXQgdGhpcy5wcm9maWxlU2VydmljZS5hZGRQdXNoU3Vic2NyaWJlcihcbiAgICAgIHB1c2hTdWJzY3JpcHRpb24sXG4gICAgICB0aGlzLmRldmljZUlkLFxuICAgICAgdGhpcy5kZXZpY2VJbmZvLFxuICAgICAgXCJcIlxuICAgICk7XG4gIH1cblxuICBhc3luYyBhbGVydFB1c2hNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICBjb25zdCBhbGVydCA9IGF3YWl0IHRoaXMuYWxlcnRDb250cm9sbGVyLmNyZWF0ZSh7XG4gICAgICBoZWFkZXI6IG1lc3NhZ2UudGl0bGUsXG4gICAgICBtZXNzYWdlOiBtZXNzYWdlLm1lc3NhZ2UsXG4gICAgICBidXR0b25zOiBbXCJPS1wiXSxcbiAgICB9KTtcbiAgICBhbGVydC5wcmVzZW50KCk7XG4gIH0qL1xuXG4gIC8vIGluaXRpYWxpemVGaXJlYmFzZSgpIHtcbiAgLy8gaHR0cHM6Ly9jbG91ZC5nb29nbGUuY29tL2ZpcmVzdG9yZS9kb2NzL21hbmFnZS1kYXRhL2VuYWJsZS1vZmZsaW5lXG4gIC8vIFRoZSBkZWZhdWx0IGNhY2hlIHNpemUgdGhyZXNob2xkIGlzIDQwIE1CLiBDb25maWd1cmUgXCJjYWNoZVNpemVCeXRlc1wiXG4gIC8vIGZvciBhIGRpZmZlcmVudCB0aHJlc2hvbGQgKG1pbmltdW0gMSBNQikgb3Igc2V0IHRvIFwiQ0FDSEVfU0laRV9VTkxJTUlURURcIlxuICAvLyB0byBkaXNhYmxlIGNsZWFuLXVwLlxuICAvKlxuICBmaXJlYmFzZS5maXJlc3RvcmUoKS5zZXR0aW5ncyh7XG4gICAgY2FjaGVTaXplQnl0ZXM6IGZpcmViYXNlLmZpcmVzdG9yZS5DQUNIRV9TSVpFX1VOTElNSVRFRFxuICB9KTtcblxuICBmaXJlYmFzZS5maXJlc3RvcmUoKS5lbmFibGVQZXJzaXN0ZW5jZSgpXG4gICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGlmIChlcnIuY29kZSA9PSAnZmFpbGVkLXByZWNvbmRpdGlvbicpIHtcbiAgICAgICAgLy8gTXVsdGlwbGUgdGFicyBvcGVuLCBwZXJzaXN0ZW5jZSBjYW4gb25seSBiZSBlbmFibGVkXG4gICAgICAgIC8vIGluIG9uZSB0YWIgYXQgYSBhIHRpbWUuXG4gICAgICAgIC8vIC4uLlxuICAgICAgfSBlbHNlIGlmIChlcnIuY29kZSA9PSAndW5pbXBsZW1lbnRlZCcpIHtcbiAgICAgICAgLy8gVGhlIGN1cnJlbnQgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IGFsbCBvZiB0aGVcbiAgICAgICAgLy8gZmVhdHVyZXMgcmVxdWlyZWQgdG8gZW5hYmxlIHBlcnNpc3RlbmNlXG4gICAgICAgIC8vIC4uLlxuICAgICAgfVxuICAgIH0pO1xuICAvLyBTdWJzZXF1ZW50IHF1ZXJpZXMgd2lsbCB1c2UgcGVyc2lzdGVuY2UsIGlmIGl0IHdhcyBlbmFibGVkIHN1Y2Nlc3NmdWxseVxuICAqL1xuICAvL31cblxuICBhc3luYyBzaG93U3BsYXNoU2NyZWVuKCkge1xuICAgIC8vIGF3YWl0IFNwbGFzaFNjcmVlbi5oaWRlKCk7XG4gICAgLy8gU2hvdyB0aGUgc3BsYXNoIGZvciB0d28gc2Vjb25kcyBhbmQgdGhlbiBhdXRvbWF0aWNhbGx5IGhpZGUgaXQ6XG4gICAgYXdhaXQgU3BsYXNoU2NyZWVuLnNob3coe1xuICAgICAgc2hvd0R1cmF0aW9uOiAxNTAwLFxuICAgICAgYXV0b0hpZGU6IHRydWUsXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBwcmVzZW50QWxlcnROb0NsdWIoKSB7XG4gICAgY29uc3QgYWxlcnQgPSBhd2FpdCB0aGlzLmFsZXJ0Q29udHJvbGxlci5jcmVhdGUoe1xuICAgICAgY3NzQ2xhc3M6IFwibXktY3VzdG9tLWNsYXNzXCIsXG4gICAgICBoZWFkZXI6IFwiS2VpbiBDbHViIGdlZnVuZGVuXCIsXG4gICAgICBzdWJIZWFkZXI6IFwiXCIsXG4gICAgICBtZXNzYWdlOlxuICAgICAgICBcIkRhbWl0IGR1IG15Y2x1YiBudXR6ZW4ga2FubnN0LCBtdXNzdCBkdSB6dWVyc3QgZWluZW0gQ2x1YiBiZWl0cmV0ZW4uIE3DtmNodGVzdCBkdSBlaW5lbSBDbHViIGJlaXRyZXRlbj9cIixcbiAgICAgIGJ1dHRvbnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHRleHQ6IFwiSmFcIixcbiAgICAgICAgICBoYW5kbGVyOiAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZUJ5VXJsKFwib25ib2FyZGluZ1wiLCB7fSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRleHQ6IFwiTG9nb3V0XCIsXG4gICAgICAgICAgcm9sZTogXCJjYW5jZWxcIixcbiAgICAgICAgICBoYW5kbGVyOiAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmF1dGhTZXJ2aWNlLmxvZ291dCgpO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pO1xuXG4gICAgYXdhaXQgYWxlcnQucHJlc2VudCgpO1xuXG4gICAgY29uc3QgeyByb2xlIH0gPSBhd2FpdCBhbGVydC5vbkRpZERpc21pc3MoKTtcbiAgICBjb25zb2xlLmxvZyhcIm9uRGlkRGlzbWlzcyByZXNvbHZlZCB3aXRoIHJvbGVcIiwgcm9sZSk7XG4gIH1cblxuICBhc3luYyBwcmVzZW50Q2x1YlJlcXVzdE9wZW4oKSB7XG4gICAgY29uc3QgYWxlcnQgPSBhd2FpdCB0aGlzLmFsZXJ0Q29udHJvbGxlci5jcmVhdGUoe1xuICAgICAgY3NzQ2xhc3M6IFwibXktY3VzdG9tLWNsYXNzXCIsXG4gICAgICBoZWFkZXI6IFwiT2ZmZW5lIENsdWItQW5mcmFnZW4gdm9yaGFuZGVuXCIsXG4gICAgICBzdWJIZWFkZXI6IFwiXCIsXG4gICAgICBtZXNzYWdlOiBcIkR1IGhhc3QgYmVyZXRzIG9mZmVuZSBDbHViIGFuZnJhZ2VuLlwiLFxuICAgICAgYnV0dG9uczogW1xuICAgICAgICB7XG4gICAgICAgICAgdGV4dDogXCJOZXVlbiBDbHViIGJlaXRyZXRlblwiLFxuICAgICAgICAgIGhhbmRsZXI6ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlQnlVcmwoXCJvbmJvYXJkaW5nXCIsIHt9KTtcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdGV4dDogXCJQcm9maWwgdmVyd2FsdGVuXCIsXG4gICAgICAgICAgcm9sZTogXCJjYW5jZWxcIixcbiAgICAgICAgICBoYW5kbGVyOiAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZUJ5VXJsKFwicHJvZmlsZVwiLCB7fSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSk7XG5cbiAgICBhd2FpdCBhbGVydC5wcmVzZW50KCk7XG5cbiAgICBjb25zdCB7IHJvbGUgfSA9IGF3YWl0IGFsZXJ0Lm9uRGlkRGlzbWlzcygpO1xuICAgIGNvbnNvbGUubG9nKFwib25EaWREaXNtaXNzIHJlc29sdmVkIHdpdGggcm9sZVwiLCByb2xlKTtcbiAgfVxuXG4gIGFzeW5jIHByZXNlbnRBbGVydE5vVGVhbSgpIHtcbiAgICBjb25zdCBhbGVydCA9IGF3YWl0IHRoaXMuYWxlcnRDb250cm9sbGVyLmNyZWF0ZSh7XG4gICAgICBjc3NDbGFzczogXCJteS1jdXN0b20tY2xhc3NcIixcbiAgICAgIGhlYWRlcjogXCJLZWluIFRlYW0gZ2VmdW5kZW5cIixcbiAgICAgIHN1YkhlYWRlcjogXCJcIixcbiAgICAgIG1lc3NhZ2U6XG4gICAgICAgIFwiRHUgd3VyZGVzdCBub2NoIGtlaW5lbSBUZWFtIHp1Z2V0ZWlsdCBhYmVyIGRhcyBpc3Qga2VpbiBQcm9ibGVtLiBEdSBrYW5uc3QgZ2FueiBlaW5mYWNoIGVpbmVtIFRlYW0gYmVpdHJldGVuIG9kZXIgZGVpbmVuIENsdWIgQW50cmFnIGltIFByb2ZpbCB3aWVkZXIgbMO2c2NoZW4uXCIsXG4gICAgICBidXR0b25zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0ZXh0OiBcIlRlYW0gYmVpdHJldGVuXCIsXG4gICAgICAgICAgaGFuZGxlcjogKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGVCeVVybChcInRlYW0tbGlzdFwiLCB7fSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRleHQ6IFwiUHJvZmlsIGFuemVpZ2VuXCIsXG4gICAgICAgICAgaGFuZGxlcjogKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGVCeVVybChcInByb2ZpbGVcIiwge30pO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pO1xuXG4gICAgYXdhaXQgYWxlcnQucHJlc2VudCgpO1xuXG4gICAgY29uc3QgeyByb2xlIH0gPSBhd2FpdCBhbGVydC5vbkRpZERpc21pc3MoKTtcbiAgICBjb25zb2xlLmxvZyhcIm9uRGlkRGlzbWlzcyByZXNvbHZlZCB3aXRoIHJvbGVcIiwgcm9sZSk7XG4gIH1cblxuICBhc3luYyBwcmVzZW50QWxlcnRFbWFpbE5vdFZlcmlmaWVkKCkge1xuICAgIC8qY29uc3QgYWxlcnQgPSBhd2FpdCB0aGlzLmFsZXJ0Q29udHJvbGxlci5jcmVhdGUoe1xuICAgICAgY3NzQ2xhc3M6IFwibXktY3VzdG9tLWNsYXNzXCIsXG4gICAgICBoZWFkZXI6IFwiRS1NYWlsIEFkcmVzc2UgaXN0IG5pY2h0IHZlcmlmaXppZXJ0XCIsXG4gICAgICBzdWJIZWFkZXI6IFwiXCIsXG4gICAgICBtZXNzYWdlOlxuICAgICAgICBcIkJpdHRlIHByw7xmZW4gU2llIGlociBFLU1haWwgUG9zdGZhY2ggb2RlciBkZW4gU3BhbSBPcmRuZXIgdW5kIGFrdGl2aWVyZW4gc2llIGlocmVuIG15LWNsdWIgQWNjb3VudCB1bSBmb3J0enVmYWhyZW4uIFNvbGxlbiB3aXIgbm9jaG1hbHMgZWluZSBFLU1haWwgc2VuZGVuP1wiLFxuICAgICAgYnV0dG9uczogW1xuICAgICAgICB7XG4gICAgICAgICAgdGV4dDogXCJOZWluXCIsXG4gICAgICAgICAgcm9sZTogXCJjYW5jZWxcIixcbiAgICAgICAgICBoYW5kbGVyOiAoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5laW5cIik7XG4gICAgICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZUJ5VXJsKFwibmV3c1wiLCB7fSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRleHQ6IFwiSmFcIixcbiAgICAgICAgICBoYW5kbGVyOiAoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVtYWlsIG5vY2htYWxzIHNlbmRlblwiKTtcbiAgICAgICAgICAgIHRoaXMuYXV0aFNlcnZpY2Uuc2VuZFZlcmlmeUVtYWlsKCk7XG4gICAgICAgICAgICB0aGlzLmF1dGhTZXJ2aWNlLmxvZ291dCgpO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pO1xuXG4gICAgYXdhaXQgYWxlcnQucHJlc2VudCgpO1xuXG4gICAgY29uc3QgeyByb2xlIH0gPSBhd2FpdCBhbGVydC5vbkRpZERpc21pc3MoKTtcbiAgICBjb25zb2xlLmxvZyhcIm9uRGlkRGlzbWlzcyByZXNvbHZlZCB3aXRoIHJvbGVcIiwgcm9sZSk7XG4gICAgKi9cbiAgfVxuICBlbmFibGVIZWxmZXJFdmVudHMoY2x1Ykxpc3QpIHtcbiAgICByZXR1cm4gY2x1Ykxpc3QgJiYgY2x1Ykxpc3Quc29tZShjbHViID0+IGNsdWIuaGFzRmVhdHVyZUhlbGZlckV2ZW50ID09IHRydWUpO1xuICB9XG4gIGVuYWJsZUNoYW1waW9uc2hpcChjbHViTGlzdCkge1xuICAgIHJldHVybiBjbHViTGlzdCAmJiBjbHViTGlzdC5zb21lKGNsdWIgPT4gY2x1Yi5oYXNGZWF0dXJlQ2hhbXBpb25zaGlwID09IHRydWUpO1xuICB9XG5cbiAgYXN5bmMgcHJlc2VudEFsZXJ0VXBkYXRlVmVyc2lvbigpIHtcbiAgICBjb25zdCBhbGVydCA9IGF3YWl0IHRoaXMuYWxlcnRDb250cm9sbGVyLmNyZWF0ZSh7XG4gICAgICAvLyBjc3NDbGFzczogJ215LWN1c3RvbS1jbGFzcycsXG4gICAgICBoZWFkZXI6IFwiQXBwIFVwZGF0ZSB2ZXJmw7xnYmFyXCIsXG4gICAgICBtZXNzYWdlOiBgRWluZSBuZXVlIFZlcnNpb24gJHt0aGlzLmFwcFZlcnNpb259IGlzdCB2ZXJmw7xnYmFyLiBOZXVlIFZlcnNpb24gbGFkZW4/YCxcbiAgICAgIGJhY2tkcm9wRGlzbWlzczogZmFsc2UsXG4gICAgICBidXR0b25zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0ZXh0OiBcIkFiYnJlY2hlblwiLFxuICAgICAgICAgIHJvbGU6IFwiY2FuY2VsXCIsXG4gICAgICAgICAgY3NzQ2xhc3M6IFwic2Vjb25kYXJ5XCIsXG4gICAgICAgICAgaGFuZGxlcjogKGRhdGE6IGFueSkgPT4ge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0NvbmZpcm0gQ2FuY2VsOiBkYXRhJyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRleHQ6IFwiTGFkZW5cIixcbiAgICAgICAgICBoYW5kbGVyOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXNvbHZlciA9IGF3YWl0IHRoaXMuc3dVcGRhdGUuYWN0aXZhdGVVcGRhdGUoKTtcbiAgICAgICAgICAgIGlmIChyZXNvbHZlcikge1xuICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFscmVhZHkgb24gbGF0ZXN0IHZlcnNpb25cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSk7XG5cbiAgICBhd2FpdCBhbGVydC5wcmVzZW50KCk7XG4gIH1cblxuICBhc3luYyBsb2dvdXQoKSB7XG4gICAgY29uc29sZS5sb2coXCJsb2dvdXRcIik7XG4gICAgYXdhaXQgdGhpcy5hdXRoU2VydmljZS5sb2dvdXQoKTtcbiAgfVxuICAvKmFzeW5jIGFkZExpc3RlbmVycygpIHtcbiAgICBhd2FpdCBQdXNoTm90aWZpY2F0aW9ucy5hZGRMaXN0ZW5lcigncmVnaXN0cmF0aW9uJywgYXN5bmMgdG9rZW4gPT4ge1xuICAgICAgY29uc29sZS5pbmZvKCdSZWdpc3RyYXRpb24gdG9rZW46ICcsIHRva2VuLnZhbHVlKTtcbiAgICAgIGlmICh0b2tlbi52YWx1ZSkge1xuICAgICAgICBjb25zdCBwcm9maWxlVXBkYXRlID0gYXdhaXQgdGhpcy5wcm9maWxlU2VydmljZVxuICAgICAgICAgIC5hZGRQdXNoU3Vic2NyaWJlcihudWxsLCB0aGlzLmRldmljZUlkLCB0aGlzLmRldmljZUluZm8sIHRva2VuLnZhbHVlKVxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQ291bGQgbm90IHN1YnNjcmliZSB0byBub3RpZmljYXRpb25zXCIsIGVycik7XG4gICAgICAgICAgICAvLyB0aGlzLmVycm9yUHVzaE1lc3NhZ2VFbmFibGUoXCJDb3VsZCBub3Qgc3Vic2NyaWJlIHRvIG5vdGlmaWNhdGlvbnNcIik7XG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBhd2FpdCBQdXNoTm90aWZpY2F0aW9ucy5hZGRMaXN0ZW5lcigncmVnaXN0cmF0aW9uRXJyb3InLCBlcnIgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcignUmVnaXN0cmF0aW9uIGVycm9yOiAnLCBlcnIuZXJyb3IpO1xuICAgIH0pO1xuXG4gICAgYXdhaXQgUHVzaE5vdGlmaWNhdGlvbnMuYWRkTGlzdGVuZXIoJ3B1c2hOb3RpZmljYXRpb25SZWNlaXZlZCcsIG5vdGlmaWNhdGlvbiA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnUHVzaCBub3RpZmljYXRpb24gcmVjZWl2ZWQ6ICcsIG5vdGlmaWNhdGlvbik7XG4gICAgICB0aGlzLmFsZXJ0Q29udHJvbGxlci5jcmVhdGUoe1xuICAgICAgICBoZWFkZXI6IG5vdGlmaWNhdGlvbi50aXRsZSxcbiAgICAgICAgbWVzc2FnZTogbm90aWZpY2F0aW9uLmJvZHksXG4gICAgICB9KS50aGVuKGFsZXJ0PT57XG4gICAgICAgIGFsZXJ0LnByZXNlbnQoKTtcbiAgICAgIH0pXG4gICAgfSk7XG5cbiAgICBhd2FpdCBQdXNoTm90aWZpY2F0aW9ucy5hZGRMaXN0ZW5lcigncHVzaE5vdGlmaWNhdGlvbkFjdGlvblBlcmZvcm1lZCcsIG5vdGlmaWNhdGlvbiA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnUHVzaCBub3RpZmljYXRpb24gYWN0aW9uIHBlcmZvcm1lZCcsIG5vdGlmaWNhdGlvbi5hY3Rpb25JZCwgbm90aWZpY2F0aW9uLmlucHV0VmFsdWUpO1xuICAgIH0pO1xuICB9Ki9cbiAgYXN5bmMgcmVnaXN0ZXJOb3RpZmljYXRpb25zKCkge1xuICAgIC8vIFJlcXVlc3QgcGVybWlzc2lvbiB0byB1c2UgcHVzaCBub3RpZmljYXRpb25zXG4gICAgLy8gaU9TIHdpbGwgcHJvbXB0IHVzZXIgYW5kIHJldHVybiBpZiB0aGV5IGdyYW50ZWQgcGVybWlzc2lvbiBvciBub3RcbiAgICAvLyBBbmRyb2lkIHdpbGwganVzdCBncmFudCB3aXRob3V0IHByb21wdGluZ1xuICAgIFB1c2hOb3RpZmljYXRpb25zLnJlcXVlc3RQZXJtaXNzaW9ucygpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgaWYgKHJlc3VsdC5yZWNlaXZlID09PSBcImdyYW50ZWRcIikge1xuICAgICAgICAvLyBSZWdpc3RlciB3aXRoIEFwcGxlIC8gR29vZ2xlIHRvIHJlY2VpdmUgcHVzaCB2aWEgQVBOUy9GQ01cbiAgICAgICAgUHVzaE5vdGlmaWNhdGlvbnMucmVnaXN0ZXIoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFNob3cgc29tZSBlcnJvclxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgUHVzaE5vdGlmaWNhdGlvbnMuYWRkTGlzdGVuZXIoXCJyZWdpc3RyYXRpb25cIiwgKHRva2VuOiBUb2tlbikgPT4ge1xuICAgICAgLy8gYWxlcnQoJ1B1c2ggcmVnaXN0cmF0aW9uIHN1Y2Nlc3MsIHRva2VuOiAnICsgdG9rZW4udmFsdWUpO1xuICAgICAgLyp0aGlzLnRvYXN0Q29udHJvbGxlci5jcmVhdGUoe1xuICAgICAgICBtZXNzYWdlOiBcIlB1c2ggZXJmb2xncmVpY2ggcmVnaXN0cmllcnRcIixcbiAgICAgICAgY29sb3I6IFwicHJpbWFyeVwiLFxuICAgICAgICBkdXJhdGlvbjogMTUwMCxcbiAgICAgICAgcG9zaXRpb246IFwidG9wXCIsXG4gICAgICB9KS50aGVuKHRvYXN0PT57XG4gICAgICAgIHRvYXN0LnByZXNlbnQoKTtcbiAgICAgIH0pOyovXG5cbiAgICAgIHRoaXMucHJvZmlsZVNlcnZpY2VcbiAgICAgICAgLmFkZFB1c2hTdWJzY3JpYmVyKG51bGwsIHRoaXMuZGV2aWNlSWQsIHRoaXMuZGV2aWNlSW5mbywgdG9rZW4udmFsdWUpXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkNvdWxkIG5vdCBzdWJzY3JpYmUgdG8gbm90aWZpY2F0aW9uc1wiLCBlcnIpO1xuICAgICAgICAgIC8vIHRoaXMuZXJyb3JQdXNoTWVzc2FnZUVuYWJsZShcIkNvdWxkIG5vdCBzdWJzY3JpYmUgdG8gbm90aWZpY2F0aW9uc1wiKTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKG9rKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2cob2spO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIFB1c2hOb3RpZmljYXRpb25zLmFkZExpc3RlbmVyKFwicmVnaXN0cmF0aW9uRXJyb3JcIiwgKGVycm9yOiBhbnkpID0+IHtcbiAgICAgIC8vIGFsZXJ0KCdFcnJvciBvbiByZWdpc3RyYXRpb246ICcgKyBKU09OLnN0cmluZ2lmeShlcnJvcikpO1xuICAgIH0pO1xuXG4gICAgUHVzaE5vdGlmaWNhdGlvbnMuYWRkTGlzdGVuZXIoXG4gICAgICBcInB1c2hOb3RpZmljYXRpb25SZWNlaXZlZFwiLFxuICAgICAgYXN5bmMgKG5vdGlmaWNhdGlvbjogUHVzaE5vdGlmaWNhdGlvblNjaGVtYSkgPT4ge1xuICAgICAgICAvLyBhbGVydCgnUHVzaCByZWNlaXZlZDogJyArIEpTT04uc3RyaW5naWZ5KG5vdGlmaWNhdGlvbikpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiUFVTSCBNRVNTQUdFIFJFQ0VJVkVEXCIpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIlRZUEU6ICBcIiArIG5vdGlmaWNhdGlvbi5kYXRhLnR5cGUpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBub3RpZmljYXRpb24uZGF0YS50eXBlICYmXG4gICAgICAgICAgbm90aWZpY2F0aW9uLmRhdGEudHlwZSA9PT0gXCJoZWxmZXJFdmVudFwiXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IGF3YWl0IERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICAgIHRpdGxlOiBub3RpZmljYXRpb24udGl0bGUsXG4gICAgICAgICAgICBtZXNzYWdlOiBub3RpZmljYXRpb24uYm9keSxcbiAgICAgICAgICAgIG9rQnV0dG9uVGl0bGU6IFwiw5ZmZm5lblwiLFxuICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGl0bGU6IFwiQWJicmVjaGVuXCIsXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGVCeVVybChcIi90L2hlbGZlclwiLCB7XG4gICAgICAgICAgICAgICAgc3RhdGU6IG5vdGlmaWNhdGlvbi5kYXRhLFxuICAgICAgICAgICAgICB9KS5jYXRjaChlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBub3RpZmljYXRpb24uZGF0YS50eXBlICYmXG4gICAgICAgICAgbm90aWZpY2F0aW9uLmRhdGEudHlwZSA9PT0gXCJjbHViRXZlbnRcIlxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSBhd2FpdCBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgICAgICB0aXRsZTogbm90aWZpY2F0aW9uLnRpdGxlLFxuICAgICAgICAgICAgbWVzc2FnZTogbm90aWZpY2F0aW9uLmJvZHksXG4gICAgICAgICAgICBva0J1dHRvblRpdGxlOiBcIsOWZmZuZW5cIixcbiAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRpdGxlOiBcIkFiYnJlY2hlblwiLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZUJ5VXJsKFwiL3QvZXZlbnRzXCIsIHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogbm90aWZpY2F0aW9uLmRhdGEsXG4gICAgICAgICAgICAgIH0pLmNhdGNoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIG5vdGlmaWNhdGlvbi5kYXRhLnR5cGUgJiZcbiAgICAgICAgICBub3RpZmljYXRpb24uZGF0YS50eXBlID09PSBcImNsdWJSZXF1ZXN0XCJcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgeyB2YWx1ZSB9ID0gYXdhaXQgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgICAgICAgdGl0bGU6IG5vdGlmaWNhdGlvbi50aXRsZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG5vdGlmaWNhdGlvbi5ib2R5LFxuICAgICAgICAgICAgb2tCdXR0b25UaXRsZTogXCLDlmZmbmVuXCIsXG4gICAgICAgICAgICBjYW5jZWxCdXR0b25UaXRsZTogXCJBYmJyZWNoZW5cIixcbiAgICAgICAgICB9KVxuICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIG5vdGlmaWNhdGlvbi5kYXRhLnR5cGUgJiZcbiAgICAgICAgICBub3RpZmljYXRpb24uZGF0YS50eXBlID09PSBcImNsdWJSZXF1ZXN0QWRtaW5cIlxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSBhd2FpdCBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgICAgICB0aXRsZTogbm90aWZpY2F0aW9uLnRpdGxlLFxuICAgICAgICAgICAgbWVzc2FnZTogbm90aWZpY2F0aW9uLmJvZHksXG4gICAgICAgICAgICBva0J1dHRvblRpdGxlOiBcIsOWZmZuZW5cIixcbiAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRpdGxlOiBcIkFiYnJlY2hlblwiLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgbm90aWZpY2F0aW9uLmRhdGEudHlwZSAmJlxuICAgICAgICAgIG5vdGlmaWNhdGlvbi5kYXRhLnR5cGUgPT09IFwibmV3c1wiXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IGF3YWl0IERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICAgIHRpdGxlOiBub3RpZmljYXRpb24udGl0bGUsXG4gICAgICAgICAgICBtZXNzYWdlOiBub3RpZmljYXRpb24uYm9keSxcbiAgICAgICAgICAgIG9rQnV0dG9uVGl0bGU6IFwiw5ZmZm5lblwiLFxuICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGl0bGU6IFwiQWJicmVjaGVuXCIsXG4gICAgICAgICAgfSlcbiAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlQnlVcmwoXCIvdC9uZXdzXCIsIHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogbm90aWZpY2F0aW9uLmRhdGEsXG4gICAgICAgICAgICAgIH0pLmNhdGNoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBub3RpZmljYXRpb24uZGF0YS50eXBlICYmXG4gICAgICAgICAgbm90aWZpY2F0aW9uLmRhdGEudHlwZSA9PT0gXCJjbHViTmV3c1wiXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IGF3YWl0IERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICAgIHRpdGxlOiBub3RpZmljYXRpb24udGl0bGUsXG4gICAgICAgICAgICBtZXNzYWdlOiBub3RpZmljYXRpb24uYm9keSxcbiAgICAgICAgICAgIG9rQnV0dG9uVGl0bGU6IFwiw5ZmZm5lblwiLFxuICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGl0bGU6IFwiQWJicmVjaGVuXCIsXG4gICAgICAgICAgfSlcbiAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlQnlVcmwoXCIvdC9uZXdzXCIsIHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogbm90aWZpY2F0aW9uLmRhdGEsXG4gICAgICAgICAgICAgIH0pLmNhdGNoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBub3RpZmljYXRpb24uZGF0YS50eXBlICYmXG4gICAgICAgICAgbm90aWZpY2F0aW9uLmRhdGEudHlwZSA9PT0gXCJ0cmFpbmluZ1wiXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IGF3YWl0IERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICAgIHRpdGxlOiBub3RpZmljYXRpb24udGl0bGUsXG4gICAgICAgICAgICBtZXNzYWdlOiBub3RpZmljYXRpb24uYm9keSxcbiAgICAgICAgICAgIG9rQnV0dG9uVGl0bGU6IFwiw5ZmZm5lblwiLFxuICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGl0bGU6IFwiQWJicmVjaGVuXCIsXG4gICAgICAgICAgfSlcbiAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlQnlVcmwoXCIvdC90cmFpbmluZ1wiLCB7XG4gICAgICAgICAgICAgICAgc3RhdGU6IG5vdGlmaWNhdGlvbi5kYXRhLFxuICAgICAgICAgICAgICB9KS5jYXRjaChlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgICAgICAgdGl0bGU6IG5vdGlmaWNhdGlvbi50aXRsZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG5vdGlmaWNhdGlvbi5ib2R5LFxuICAgICAgICAgICAgb2tCdXR0b25UaXRsZTogXCJPS1wiLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcblxuICAgIFB1c2hOb3RpZmljYXRpb25zLmFkZExpc3RlbmVyKFxuICAgICAgXCJwdXNoTm90aWZpY2F0aW9uQWN0aW9uUGVyZm9ybWVkXCIsXG4gICAgICAobm90aWZpY2F0aW9uOiBBY3Rpb25QZXJmb3JtZWQpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2cobm90aWZpY2F0aW9uKTtcbiAgICAgICAgLy8gYWxlcnQoJ1B1c2ggYWN0aW9uIHBlcmZvcm1lZDogJyArIEpTT04uc3RyaW5naWZ5KG5vdGlmaWNhdGlvbikpO1xuICAgICAgfVxuICAgICk7XG5cbiAgICAvLyBPTEQgQ09ERVxuICAgIC8qXG4gICAgICAgIGxldCBwZXJtU3RhdHVzID0gYXdhaXQgUHVzaE5vdGlmaWNhdGlvbnMuY2hlY2tQZXJtaXNzaW9ucygpO1xuICAgICAgICBpZiAocGVybVN0YXR1cy5yZWNlaXZlID09PSAncHJvbXB0Jykge1xuICAgICAgICAgIHBlcm1TdGF0dXMgPSBhd2FpdCBQdXNoTm90aWZpY2F0aW9ucy5yZXF1ZXN0UGVybWlzc2lvbnMoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGVybVN0YXR1cy5yZWNlaXZlICE9PSAnZ3JhbnRlZCcpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgZGVuaWVkIHBlcm1pc3Npb25zIScpO1xuICAgICAgICB9XG4gICAgICAgIFB1c2hOb3RpZmljYXRpb25zLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgICAgICBhd2FpdCB0aGlzLmFkZExpc3RlbmVycygpO1xuICAgICAgICBhd2FpdCBQdXNoTm90aWZpY2F0aW9ucy5yZWdpc3RlcigpO1xuICAgICAgfVxuICAgIFxuICAgICAgc3Vic2NyaWJlTW9iaWxlTm90aWZpY2F0aW9ucygpIHtcbiAgICAgICAqL1xuICB9XG59XG4iLCI8aW9uLWFwcD5cbiAgPGlvbi1zcGxpdC1wYW5lIGNvbnRlbnRJZD1cIm1haW4tY29udGVudFwiPlxuICAgIDxpb24tbWVudSBtZW51SWQ9XCJtZW51XCIgY29udGVudElkPVwibWFpbi1jb250ZW50XCIgdHlwZT1cInB1c2hcIj5cbiAgICAgIDxpb24tY29udGVudD5cbiAgICAgICAgPCEtLSBPcGVuIEFjY29yZGlvbiAtLT5cbiAgICAgICAgPGlvbi1hY2NvcmRpb24tZ3JvdXAgdmFsdWU9XCJjb2xvcnNcIj5cbiAgICAgICAgICA8aW9uLWFjY29yZGlvbiB2YWx1ZT1cImNvbG9yc1wiPlxuICAgICAgICAgICAgPGlvbi1pdGVtIHNsb3Q9XCJoZWFkZXJcIiBjbGFzcz1cIm5vdGNoLXBhZGRpbmdcIj5cbiAgICAgICAgICAgICAgPGlvbi10aHVtYm5haWwgc2xvdD1cInN0YXJ0XCI+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvbG9nb190cmFucy5wbmdcIiAvPlxuICAgICAgICAgICAgICA8L2lvbi10aHVtYm5haWw+XG4gICAgICAgICAgICAgIDxpb24tbGFiZWw+bXljbHViPC9pb24tbGFiZWw+XG4gICAgICAgICAgICA8L2lvbi1pdGVtPlxuXG4gICAgICAgICAgICA8aW9uLWxpc3Qgc2xvdD1cImNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgPGlvbi1ub3RlPnt7IGVtYWlsIH19PC9pb24tbm90ZT5cblxuICAgICAgICAgICAgICA8aW9uLW1lbnUtdG9nZ2xlIGF1dG8taGlkZT1cImZhbHNlXCI+XG4gICAgICAgICAgICAgICAgPGlvbi1pdGVtIHJvdXRlckRpcmVjdGlvbj1cInJvb3RcIiBbcm91dGVyTGlua109XCJbJy90L25ld3MnXVwiIGxpbmVzPVwibm9uZVwiIGRldGFpbD1cInRydWVcIlxuICAgICAgICAgICAgICAgICAgcm91dGVyTGlua0FjdGl2ZT1cInNlbGVjdGVkXCI+XG4gICAgICAgICAgICAgICAgICA8aW9uLWljb24gc2xvdD1cInN0YXJ0XCIgbmFtZT1cIm5ld3NwYXBlci1vdXRsaW5lXCI+PC9pb24taWNvbj5cbiAgICAgICAgICAgICAgICAgIDxpb24tbGFiZWw+e3tcImNvbW1vbi5uZXdzXCIgfCB0cmFuc2xhdGV9fTwvaW9uLWxhYmVsPlxuICAgICAgICAgICAgICAgIDwvaW9uLWl0ZW0+XG4gICAgICAgICAgICAgICAgPGlvbi1pdGVtIHJvdXRlckRpcmVjdGlvbj1cInJvb3RcIiBbcm91dGVyTGlua109XCJbJy90L3RyYWluaW5nJ11cIiBsaW5lcz1cIm5vbmVcIiBkZXRhaWw9XCJ0cnVlXCJcbiAgICAgICAgICAgICAgICAgIHJvdXRlckxpbmtBY3RpdmU9XCJzZWxlY3RlZFwiPlxuICAgICAgICAgICAgICAgICAgPGlvbi1pY29uIHNsb3Q9XCJzdGFydFwiIG5hbWU9XCJiYXJiZWxsLW91dGxpbmVcIj48L2lvbi1pY29uPlxuICAgICAgICAgICAgICAgICAgPGlvbi1sYWJlbD57e1wiY29tbW9uLnRyYWluaW5nXCIgfCB0cmFuc2xhdGV9fTwvaW9uLWxhYmVsPlxuICAgICAgICAgICAgICAgIDwvaW9uLWl0ZW0+XG4gICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImNsdWJMaXN0JCB8IGFzeW5jIGFzIGNsdWJMaXN0XCI+XG4gICAgICAgICAgICAgICAgICA8aW9uLWl0ZW0gKm5nSWY9XCJlbmFibGVDaGFtcGlvbnNoaXAoY2x1Ykxpc3QpXCIgcm91dGVyRGlyZWN0aW9uPVwicm9vdFwiXG4gICAgICAgICAgICAgICAgICAgIFtyb3V0ZXJMaW5rXT1cIlsnL3QvY2hhbXBpb25zaGlwJ11cIiBsaW5lcz1cIm5vbmVcIiBkZXRhaWw9XCJ0cnVlXCIgcm91dGVyTGlua0FjdGl2ZT1cInNlbGVjdGVkXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpb24taWNvbiBzbG90PVwic3RhcnRcIiBuYW1lPVwidHJvcGh5LW91dGxpbmVcIj48L2lvbi1pY29uPlxuICAgICAgICAgICAgICAgICAgICA8aW9uLWxhYmVsPnt7XCJjb21tb24uY2hhbXBpb25zaGlwXCIgfCB0cmFuc2xhdGV9fTwvaW9uLWxhYmVsPlxuICAgICAgICAgICAgICAgICAgPC9pb24taXRlbT5cbiAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICA8aW9uLWl0ZW0gcm91dGVyRGlyZWN0aW9uPVwicm9vdFwiIFtyb3V0ZXJMaW5rXT1cIlsnL3QvZXZlbnRzJ11cIiBsaW5lcz1cIm5vbmVcIiBkZXRhaWw9XCJ0cnVlXCJcbiAgICAgICAgICAgICAgICAgIHJvdXRlckxpbmtBY3RpdmU9XCJzZWxlY3RlZFwiPlxuICAgICAgICAgICAgICAgICAgPGlvbi1pY29uIHNsb3Q9XCJzdGFydFwiIG5hbWU9XCJjYWxlbmRhci1vdXRsaW5lXCI+PC9pb24taWNvbj5cbiAgICAgICAgICAgICAgICAgIDxpb24tbGFiZWw+e3tcImNvbW1vbi5ldmVudHNcIiB8IHRyYW5zbGF0ZX19PC9pb24tbGFiZWw+XG4gICAgICAgICAgICAgICAgPC9pb24taXRlbT5cbiAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiY2x1Ykxpc3QkIHwgYXN5bmMgYXMgY2x1Ykxpc3RcIj5cbiAgICAgICAgICAgICAgICAgIDxpb24taXRlbSAqbmdJZj1cImVuYWJsZUhlbGZlckV2ZW50cyhjbHViTGlzdClcIiByb3V0ZXJEaXJlY3Rpb249XCJyb290XCIgW3JvdXRlckxpbmtdPVwiWycvdC9oZWxmZXInXVwiXG4gICAgICAgICAgICAgICAgICAgIGxpbmVzPVwibm9uZVwiIGRldGFpbD1cInRydWVcIiByb3V0ZXJMaW5rQWN0aXZlPVwic2VsZWN0ZWRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGlvbi1pY29uIHNsb3Q9XCJzdGFydFwiIG5hbWU9XCJoZWxwLWJ1b3ktb3V0bGluZVwiPjwvaW9uLWljb24+XG4gICAgICAgICAgICAgICAgICAgIDxpb24tbGFiZWw+e3tcImNvbW1vbi5oZWxwZXJcIiB8IHRyYW5zbGF0ZX19PC9pb24tbGFiZWw+XG4gICAgICAgICAgICAgICAgICA8L2lvbi1pdGVtPlxuICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICAgIDxpb24taXRlbSByb3V0ZXJEaXJlY3Rpb249XCJyb290XCIgW3JvdXRlckxpbmtdPVwiWycvcHJvZmlsZSddXCIgbGluZXM9XCJub25lXCIgZGV0YWlsPVwidHJ1ZVwiXG4gICAgICAgICAgICAgICAgICByb3V0ZXJMaW5rQWN0aXZlPVwic2VsZWN0ZWRcIj5cbiAgICAgICAgICAgICAgICAgIDxpb24taWNvbiBzbG90PVwic3RhcnRcIiBuYW1lPVwicGVyc29uLWNpcmNsZS1vdXRsaW5lXCI+PC9pb24taWNvbj5cbiAgICAgICAgICAgICAgICAgIDxpb24tbGFiZWw+e3tcImNvbW1vbi5wcm9maWxlXCIgfCB0cmFuc2xhdGV9fTwvaW9uLWxhYmVsPlxuICAgICAgICAgICAgICAgIDwvaW9uLWl0ZW0+XG5cbiAgICAgICAgICAgICAgICA8aW9uLWl0ZW0gcm91dGVyRGlyZWN0aW9uPVwicm9vdFwiIFtyb3V0ZXJMaW5rXT1cIlsnL2luZm8nXVwiIGxpbmVzPVwibm9uZVwiIGRldGFpbD1cInRydWVcIlxuICAgICAgICAgICAgICAgICAgcm91dGVyTGlua0FjdGl2ZT1cInNlbGVjdGVkXCI+XG4gICAgICAgICAgICAgICAgICA8aW9uLWljb24gc2xvdD1cInN0YXJ0XCIgbmFtZT1cImluZm9ybWF0aW9uLWNpcmNsZS1vdXRsaW5lXCI+PC9pb24taWNvbj5cbiAgICAgICAgICAgICAgICAgIDxpb24tbGFiZWw+e3tcInNpZGVfYmFyLmluZm9fX2FuZF9faGVscFwiIHwgdHJhbnNsYXRlfX08L2lvbi1sYWJlbD5cbiAgICAgICAgICAgICAgICA8L2lvbi1pdGVtPlxuICAgICAgICAgICAgICA8L2lvbi1tZW51LXRvZ2dsZT5cbiAgICAgICAgICAgIDwvaW9uLWxpc3Q+XG4gICAgICAgICAgPC9pb24tYWNjb3JkaW9uPlxuICAgICAgICAgIDxpb24tYWNjb3JkaW9uIHZhbHVlPVwiYWRtaW5pc3RyYXRpb25cIj5cbiAgICAgICAgICAgIDxpb24taXRlbSBzbG90PVwiaGVhZGVyXCI+XG4gICAgICAgICAgICAgIDxpb24taWNvbiBuYW1lPVwiaG9tZVwiIHNsb3Q9XCJzdGFydFwiIGNvbG9yPVwicHJpbWFyeVwiPjwvaW9uLWljb24+XG4gICAgICAgICAgICAgIDxpb24tbGFiZWw+e3tcInNpZGVfYmFyLmFkbWluaXN0cmF0aW9uXCIgfCB0cmFuc2xhdGV9fTwvaW9uLWxhYmVsPlxuICAgICAgICAgICAgPC9pb24taXRlbT5cblxuICAgICAgICAgICAgPGlvbi1saXN0IHNsb3Q9XCJjb250ZW50XCI+XG4gICAgICAgICAgICAgIDxpb24tbWVudS10b2dnbGUgYXV0by1oaWRlPVwiZmFsc2VcIj5cbiAgICAgICAgICAgICAgICA8aW9uLWl0ZW0gcm91dGVyRGlyZWN0aW9uPVwicm9vdFwiIFtyb3V0ZXJMaW5rXT1cIlsnL2NsdWItbGlzdCddXCIgbGluZXM9XCJub25lXCIgZGV0YWlsPVwidHJ1ZVwiXG4gICAgICAgICAgICAgICAgICByb3V0ZXJMaW5rQWN0aXZlPVwic2VsZWN0ZWRcIj5cbiAgICAgICAgICAgICAgICAgIDxpb24tbGFiZWw+e3tcInNpZGVfYmFyLm15X19jbHViXCIgfCB0cmFuc2xhdGV9fTwvaW9uLWxhYmVsPlxuICAgICAgICAgICAgICAgIDwvaW9uLWl0ZW0+XG4gICAgICAgICAgICAgICAgPGlvbi1pdGVtIHJvdXRlckRpcmVjdGlvbj1cInJvb3RcIiBbcm91dGVyTGlua109XCJbJy90ZWFtLWxpc3QnXVwiIGxpbmVzPVwibm9uZVwiIGRldGFpbD1cInRydWVcIlxuICAgICAgICAgICAgICAgICAgcm91dGVyTGlua0FjdGl2ZT1cInNlbGVjdGVkXCI+XG4gICAgICAgICAgICAgICAgICA8aW9uLWxhYmVsPnt7XCJzaWRlX2Jhci5teV9fdGVhbVwiIHwgdHJhbnNsYXRlfX08L2lvbi1sYWJlbD5cbiAgICAgICAgICAgICAgICA8L2lvbi1pdGVtPlxuICAgICAgICAgICAgICA8L2lvbi1tZW51LXRvZ2dsZT5cbiAgICAgICAgICAgIDwvaW9uLWxpc3Q+XG4gICAgICAgICAgPC9pb24tYWNjb3JkaW9uPlxuICAgICAgICA8L2lvbi1hY2NvcmRpb24tZ3JvdXA+XG5cbiAgICAgICAgPGlvbi1saXN0PlxuICAgICAgICAgIDxpb24taXRlbSAoY2xpY2spPVwibG9nb3V0KClcIj5cbiAgICAgICAgICAgIDxpb24taWNvbiBzbG90PVwic3RhcnRcIiBuYW1lPVwiZXhpdC1vdXRsaW5lXCIgY29sb3I9XCJkYW5nZXJcIj48L2lvbi1pY29uPlxuICAgICAgICAgICAgPGlvbi1sYWJlbD4ge3tcImNvbW1vbi5sb2dvdXRcIiB8IHRyYW5zbGF0ZX19PC9pb24tbGFiZWw+XG4gICAgICAgICAgICA8aW9uLWJ1dHRvbiAoY2xpY2spPVwibG9nb3V0KClcIj57e1wiY29tbW9uLmxvZ291dFwiIHwgdHJhbnNsYXRlfX08L2lvbi1idXR0b24+XG4gICAgICAgICAgPC9pb24taXRlbT5cbiAgICAgICAgPC9pb24tbGlzdD5cbiAgICAgICAgPGlvbi1ub3RlPiB7e1wic2lkZV9iYXIudmVyc2lvblwiIHwgdHJhbnNsYXRlfX0ge3sgYXBwVmVyc2lvbiB9fSh7e2J1aWxkTnVtYmVyfX0pIDwvaW9uLW5vdGU+XG4gICAgICAgIDwhLS1cblxuICAgICAgICA8aW9uLWxpc3QgaWQ9XCJpbmJveC1saXN0XCI+XG4gICAgICAgICAgPGlvbi1saXN0LWhlYWRlcj5teWNsdWI8L2lvbi1saXN0LWhlYWRlcj5cbiAgICAgICAgICAgICAgPGlvbi1tZW51LXRvZ2dsZSBhdXRvLWhpZGU9XCJmYWxzZVwiPlxuICAgICAgICAgICAgPGlvbi1pdGVtIHJvdXRlckRpcmVjdGlvbj1cInJvb3RcIiAgbGluZXM9XCJub25lXCIgZGV0YWlsPVwiZmFsc2VcIiByb3V0ZXJMaW5rQWN0aXZlPVwic2VsZWN0ZWRcIj5cbiAgICAgICAgICAgICAgPGlvbi1pY29uIHNsb3Q9XCJzdGFydFwiIG5hbWU9XCJuZXdzcGFwZXItb3V0bGluZVwiID48L2lvbi1pY29uPlxuICAgICAgICAgICAgICA8aW9uLWxhYmVsPk5ld3M8L2lvbi1sYWJlbD5cbiAgICAgICAgICAgIDwvaW9uLWl0ZW0+XG4gICAgICAgICAgICA8aW9uLWl0ZW0gcm91dGVyRGlyZWN0aW9uPVwicm9vdFwiIGxpbmVzPVwibm9uZVwiIGRldGFpbD1cImZhbHNlXCIgcm91dGVyTGlua0FjdGl2ZT1cInNlbGVjdGVkXCI+XG4gICAgICAgICAgICAgIDxpb24taWNvbiBzbG90PVwic3RhcnRcIiBuYW1lPVwiYmFyYmVsbC1vdXRsaW5lXCI+PC9pb24taWNvbj5cbiAgICAgICAgICAgICAgPGlvbi1sYWJlbD5UcmFpbmluZzwvaW9uLWxhYmVsPlxuICAgICAgICAgICAgPC9pb24taXRlbT5cbiAgICAgICAgICAgIDxpb24taXRlbSByb3V0ZXJEaXJlY3Rpb249XCJyb290XCIgIGxpbmVzPVwibm9uZVwiIGRldGFpbD1cImZhbHNlXCIgcm91dGVyTGlua0FjdGl2ZT1cInNlbGVjdGVkXCI+XG4gICAgICAgICAgICAgIDxpb24taWNvbiBzbG90PVwic3RhcnRcIiBuYW1lPVwidHJvcGh5LW91dGxpbmVcIj48L2lvbi1pY29uPlxuICAgICAgICAgICAgICA8aW9uLWxhYmVsPk1laXN0ZXJzY2hhZnQ8L2lvbi1sYWJlbD5cbiAgICAgICAgICAgIDwvaW9uLWl0ZW0+XG4gICAgICAgICAgICA8aW9uLWl0ZW0gcm91dGVyRGlyZWN0aW9uPVwicm9vdFwiICBsaW5lcz1cIm5vbmVcIiBkZXRhaWw9XCJmYWxzZVwiIHJvdXRlckxpbmtBY3RpdmU9XCJzZWxlY3RlZFwiPlxuICAgICAgICAgICAgICA8aW9uLWljb24gc2xvdD1cInN0YXJ0XCIgbmFtZT1cImNhbGVuZGFyLW91dGxpbmVcIj48L2lvbi1pY29uPlxuICAgICAgICAgICAgICA8aW9uLWxhYmVsPkV2ZW50czwvaW9uLWxhYmVsPlxuICAgICAgICAgICAgPC9pb24taXRlbT5cbiAgICAgICAgICA8L2lvbi1tZW51LXRvZ2dsZT5cbiAgICAgICAgPC9pb24tbGlzdD5cblxuICAgICAgICA8aW9uLWxpc3QgaWQ9XCJsYWJlbHMtbGlzdFwiPlxuICAgICAgICAgIDxpb24tbGlzdC1oZWFkZXI+QWRtaW5pc3RyYXRpb248L2lvbi1saXN0LWhlYWRlcj5cblxuICAgICAgICBcbiAgICAgICAgPC9pb24tbGlzdD4tLT5cbiAgICAgIDwvaW9uLWNvbnRlbnQ+XG4gICAgPC9pb24tbWVudT5cbiAgICA8aW9uLXJvdXRlci1vdXRsZXQgaWQ9XCJtYWluLWNvbnRlbnRcIj48L2lvbi1yb3V0ZXItb3V0bGV0PlxuICA8L2lvbi1zcGxpdC1wYW5lPlxuPC9pb24tYXBwPiIsImltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7IFByZWxvYWRBbGxNb2R1bGVzLCBSb3V0ZXJNb2R1bGUsIFJvdXRlcyB9IGZyb20gXCJAYW5ndWxhci9yb3V0ZXJcIjtcbmltcG9ydCB7XG4gIEF1dGhHdWFyZCxcbiAgcmVkaXJlY3RVbmF1dGhvcml6ZWRUbyxcbiAgZW1haWxWZXJpZmllZCxcbn0gZnJvbSBcIkBhbmd1bGFyL2ZpcmUvYXV0aC1ndWFyZFwiO1xuaW1wb3J0IHsgbWFwLCBwaXBlIH0gZnJvbSBcInJ4anNcIjtcblxuY29uc3QgcmVkaXJlY3RVbnZlcmlmaWVkVG8gPSAocmVkaXJlY3Q6IGFueVtdKSA9PiBwaXBlKGVtYWlsVmVyaWZpZWQsIG1hcChlbWFpbFZlcmlmaWVkID0+IGVtYWlsVmVyaWZpZWQgfHwgcmVkaXJlY3QpKTtcbmNvbnN0IHJlZGlyZWN0VW5hdXRob3JpemVkVG9Mb2dpbiA9ICgpID0+IHJlZGlyZWN0VW52ZXJpZmllZFRvKFsnL29uYm9hcmRpbmctZW1haWwnXSk7XG5jb25zdCByZWRpcmVjdFRvTG9naW4gPSAoKSA9PiByZWRpcmVjdFVuYXV0aG9yaXplZFRvKFtcImxvZ2luXCJdKTtcbmNvbnN0IHJvdXRlczogUm91dGVzID0gW1xuICB7XG4gICAgcGF0aDogXCJcIixcbiAgICBsb2FkQ2hpbGRyZW46ICgpID0+XG4gICAgICBpbXBvcnQoXCIuL3BhZ2VzL3RhYnMvdGFicy5tb2R1bGVcIikudGhlbigobSkgPT4gbS5UYWJzUGFnZU1vZHVsZSksXG4gICAgY2FuQWN0aXZhdGU6IFtBdXRoR3VhcmRdLFxuICAgIGRhdGE6IHsgYXV0aEd1YXJkUGlwZTogcmVkaXJlY3RUb0xvZ2lufSxcbiAgfSxcbiAge1xuICAgIHBhdGg6IFwibG9naW5cIixcbiAgICBsb2FkQ2hpbGRyZW46ICgpID0+XG4gICAgICBpbXBvcnQoXCIuL3BhZ2VzL2F1dGgvbG9naW4vbG9naW4ubW9kdWxlXCIpLnRoZW4oKG0pID0+IG0uTG9naW5QYWdlTW9kdWxlKSxcbiAgfSxcbiAge1xuICAgIHBhdGg6IFwibG9nb3V0XCIsXG4gICAgbG9hZENoaWxkcmVuOiAoKSA9PlxuICAgICAgaW1wb3J0KFwiLi9wYWdlcy9hdXRoL2xvZ291dC9sb2dvdXQubW9kdWxlXCIpLnRoZW4oXG4gICAgICAgIChtKSA9PiBtLkxvZ291dFBhZ2VNb2R1bGVcbiAgICAgICksXG4gIH0sXG4gIHtcbiAgICBwYXRoOiBcInNpZ251cFwiLFxuICAgIGxvYWRDaGlsZHJlbjogKCkgPT5cbiAgICAgIGltcG9ydChcIi4vcGFnZXMvYXV0aC9zaWdudXAvc2lnbnVwLm1vZHVsZVwiKS50aGVuKFxuICAgICAgICAobSkgPT4gbS5TaWdudXBQYWdlTW9kdWxlXG4gICAgICApLFxuICB9LFxuXG4gIHtcbiAgICBwYXRoOiBcImZvbGxvd1wiLFxuICAgIGxvYWRDaGlsZHJlbjogKCkgPT5cbiAgICAgIGltcG9ydChcIi4vcGFnZXMvZm9sbG93L2ZvbGxvdy5tb2R1bGVcIikudGhlbigobSkgPT4gbS5Gb2xsb3dQYWdlTW9kdWxlKSxcbiAgfSxcbiAge1xuICAgIHBhdGg6IFwiY2x1Yi1saXN0XCIsXG4gICAgbG9hZENoaWxkcmVuOiAoKSA9PlxuICAgICAgaW1wb3J0KFwiLi9wYWdlcy9jbHViLWxpc3QvY2x1Yi1saXN0Lm1vZHVsZVwiKS50aGVuKFxuICAgICAgICAobSkgPT4gbS5DbHViTGlzdFBhZ2VNb2R1bGVcbiAgICAgICksXG4gIH0sXG4gIHtcbiAgICBwYXRoOiBcInRlYW0tbGlzdFwiLFxuICAgIGxvYWRDaGlsZHJlbjogKCkgPT5cbiAgICAgIGltcG9ydChcIi4vcGFnZXMvdGVhbS1saXN0L3RlYW0tbGlzdC5tb2R1bGVcIikudGhlbihcbiAgICAgICAgKG0pID0+IG0uVGVhbUxpc3RQYWdlTW9kdWxlXG4gICAgICApLFxuICB9LFxuICB7XG4gICAgcGF0aDogXCJuZXdzXCIsXG4gICAgbG9hZENoaWxkcmVuOiAoKSA9PlxuICAgICAgaW1wb3J0KFwiLi9wYWdlcy9uZXdzL25ld3MvbmV3cy5tb2R1bGVcIikudGhlbigobSkgPT4gbS5OZXdzUGFnZU1vZHVsZSksXG4gICAgIFxuXG5cbiAgfSxcbiAge1xuICAgIHBhdGg6IFwicmVzZXQtcGFzc3dvcmRcIixcbiAgICBsb2FkQ2hpbGRyZW46ICgpID0+XG4gICAgICBpbXBvcnQoXCIuL3BhZ2VzL2F1dGgvcmVzZXQtcGFzc3dvcmQvcmVzZXQtcGFzc3dvcmQubW9kdWxlXCIpLnRoZW4oXG4gICAgICAgIChtKSA9PiBtLlJlc2V0UGFzc3dvcmRQYWdlTW9kdWxlXG4gICAgICApLFxuICB9LFxuICB7XG4gICAgcGF0aDogXCJwcm9maWxlXCIsXG4gICAgbG9hZENoaWxkcmVuOiAoKSA9PlxuICAgICAgaW1wb3J0KFwiLi9wYWdlcy9wcm9maWxlL3Byb2ZpbGUubW9kdWxlXCIpLnRoZW4oKG0pID0+IG0uUHJvZmlsZVBhZ2VNb2R1bGUpLFxuICAgIFxuICB9LFxuICB7XG4gICAgcGF0aDogXCJ0cmFpbmluZ3NcIixcbiAgICBsb2FkQ2hpbGRyZW46ICgpID0+XG4gICAgICBpbXBvcnQoXCIuL3BhZ2VzL3RyYWluaW5nL3RyYWluaW5ncy90cmFpbmluZ3MubW9kdWxlXCIpLnRoZW4oXG4gICAgICAgIChtKSA9PiBtLlRyYWluaW5nc1BhZ2VNb2R1bGVcbiAgICAgICksXG4gIH0sXG4gIHtcbiAgICBwYXRoOiBcImV2ZW50c1wiLFxuICAgIGxvYWRDaGlsZHJlbjogKCkgPT5cbiAgICAgIGltcG9ydChcIi4vcGFnZXMvZXZlbnQvZXZlbnRzL2V2ZW50cy5tb2R1bGVcIikudGhlbihcbiAgICAgICAgKG0pID0+IG0uRXZlbnRzUGFnZU1vZHVsZVxuICAgICAgKSxcbiAgfSxcbiAge1xuICAgIHBhdGg6IFwiY2hhbXBpb25zaGlwXCIsXG4gICAgbG9hZENoaWxkcmVuOiAoKSA9PlxuICAgICAgaW1wb3J0KFwiLi9wYWdlcy9jaGFtcGlvbnNoaXAvY2hhbXBpb25zaGlwL2NoYW1waW9uc2hpcC5tb2R1bGVcIikudGhlbihcbiAgICAgICAgKG0pID0+IG0uQ2hhbXBpb25zaGlwUGFnZU1vZHVsZVxuICAgICAgKSxcbiAgfSxcbiAge1xuICAgIHBhdGg6IFwib25ib2FyZGluZ1wiLFxuICAgIGxvYWRDaGlsZHJlbjogKCkgPT5cbiAgICAgIGltcG9ydChcIi4vcGFnZXMvb25ib2FyZGluZy9vbmJvYXJkaW5nL29uYm9hcmRpbmcubW9kdWxlXCIpLnRoZW4oXG4gICAgICAgIChtKSA9PiBtLk9uYm9hcmRpbmdQYWdlTW9kdWxlXG4gICAgICApLFxuICB9LFxuICB7XG4gICAgcGF0aDogJ29uYm9hcmRpbmctY2x1YicsXG4gICAgbG9hZENoaWxkcmVuOiAoKSA9PiBpbXBvcnQoJy4vcGFnZXMvb25ib2FyZGluZy9vbmJvYXJkaW5nLWNsdWIvb25ib2FyZGluZy1jbHViLm1vZHVsZScpLnRoZW4oIG0gPT4gbS5PbmJvYXJkaW5nQ2x1YlBhZ2VNb2R1bGUpLFxuICAgIFxuICB9LFxuICB7XG4gICAgcGF0aDogJ29uYm9hcmRpbmctZW1haWwnLFxuICAgIGxvYWRDaGlsZHJlbjogKCkgPT4gaW1wb3J0KCcuL3BhZ2VzL29uYm9hcmRpbmcvb25ib2FyZGluZy1lbWFpbC9vbmJvYXJkaW5nLWVtYWlsLm1vZHVsZScpLnRoZW4oIG0gPT4gbS5PbmJvYXJkaW5nRW1haWxQYWdlTW9kdWxlKSxcbiAgXG4gIH0sXG4gIHtcbiAgICBwYXRoOiBcIm9uYm9hcmRpbmctdGVhbVwiLFxuICAgIGxvYWRDaGlsZHJlbjogKCkgPT5cbiAgICAgIGltcG9ydChcIi4vcGFnZXMvb25ib2FyZGluZy9vbmJvYXJkaW5nLXRlYW0vb25ib2FyZGluZy10ZWFtLm1vZHVsZVwiKS50aGVuKFxuICAgICAgICAobSkgPT4gbS5PbmJvYXJkaW5nVGVhbVBhZ2VNb2R1bGVcbiAgICAgICksXG4gICAgICBcbiAgfSxcbiAge1xuICAgIHBhdGg6IFwiaW5mb1wiLFxuICAgIGxvYWRDaGlsZHJlbjogKCkgPT5cbiAgICAgIGltcG9ydChcIi4vcGFnZXMvaW5mby9pbmZvLm1vZHVsZVwiKS50aGVuKChtKSA9PiBtLkluZm9QYWdlTW9kdWxlKSxcbiAgfSxcbiAge1xuICAgIHBhdGg6IFwiY2hhbXBpb25zaGlwLWRldGFpbHNcIixcbiAgICBsb2FkQ2hpbGRyZW46ICgpID0+XG4gICAgICBpbXBvcnQoXG4gICAgICAgIFwiLi9wYWdlcy9jaGFtcGlvbnNoaXAvY2hhbXBpb25zaGlwLWRldGFpbC9jaGFtcGlvbnNoaXAtZGV0YWlsLm1vZHVsZVwiXG4gICAgICApLnRoZW4oKG0pID0+IG0uQ2hhbXBpb25zaGlwRGV0YWlsUGFnZU1vZHVsZSksXG4gIH0sXG5cbiAge1xuICAgIHBhdGg6IFwiaGVsZmVyXCIsXG4gICAgbG9hZENoaWxkcmVuOiAoKSA9PlxuICAgICAgaW1wb3J0KFwiLi9wYWdlcy9oZWxmZXIvaGVsZmVyL2hlbGZlci5tb2R1bGVcIikudGhlbihcbiAgICAgICAgKG0pID0+IG0uSGVsZmVyUGFnZU1vZHVsZVxuICAgICAgKSxcbiAgfSxcbiAge1xuICAgIHBhdGg6IFwibGluZXVwXCIsXG4gICAgbG9hZENoaWxkcmVuOiAoKSA9PlxuICAgICAgaW1wb3J0KFwiLi9wYWdlcy9jaGFtcGlvbnNoaXAvbGluZXVwL2xpbmV1cC5tb2R1bGVcIikudGhlbihcbiAgICAgICAgKG0pID0+IG0uTGluZXVwUGFnZU1vZHVsZVxuICAgICAgKSxcbiAgfSxcbiAge1xuICAgIHBhdGg6IFwiKipcIixcbiAgICBsb2FkQ2hpbGRyZW46ICgpID0+XG4gICAgICBpbXBvcnQoXCIuL3BhZ2VzL25vdC1mb3VuZC9ub3QtZm91bmQubW9kdWxlXCIpLnRoZW4oXG4gICAgICAgIChtKSA9PiBtLk5vdEZvdW5kUGFnZU1vZHVsZVxuICAgICAgKSxcbiAgfSxcblxuXTtcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW1xuICAgIFJvdXRlck1vZHVsZS5mb3JSb290KHJvdXRlcywgeyBwcmVsb2FkaW5nU3RyYXRlZ3k6IFByZWxvYWRBbGxNb2R1bGVzIH0pLFxuICBdLFxuICBleHBvcnRzOiBbUm91dGVyTW9kdWxlXSxcbn0pXG5leHBvcnQgY2xhc3MgQXBwUm91dGluZ01vZHVsZSB7fVxuIiwiaW1wb3J0ICdAZmlyZWJhc2UvaW5zdGFsbGF0aW9ucyc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IG9wZW5EQiwgZGVsZXRlREIgfSBmcm9tICdpZGInO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgYXJlQ29va2llc0VuYWJsZWQsIGdldE1vZHVsYXJJbnN0YW5jZSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IF9yZWdpc3RlckNvbXBvbmVudCwgcmVnaXN0ZXJWZXJzaW9uLCBfZ2V0UHJvdmlkZXIsIGdldEFwcCB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgREVGQVVMVF9TV19QQVRIID0gJy9maXJlYmFzZS1tZXNzYWdpbmctc3cuanMnO1xuY29uc3QgREVGQVVMVF9TV19TQ09QRSA9ICcvZmlyZWJhc2UtY2xvdWQtbWVzc2FnaW5nLXB1c2gtc2NvcGUnO1xuY29uc3QgREVGQVVMVF9WQVBJRF9LRVkgPSAnQkRPVTk5LWg2N0hjQTZKZUZYSGJTTk11N2UyeU5OdTNSem9NajhUTTRXODhqSVRmcTdabVB2SU0xSXYtNF9sMkx4UWNZd2hxYnkyeEdwV3d6amZBbkc0JztcbmNvbnN0IEVORFBPSU5UID0gJ2h0dHBzOi8vZmNtcmVnaXN0cmF0aW9ucy5nb29nbGVhcGlzLmNvbS92MSc7XG5jb25zdCBDT05TT0xFX0NBTVBBSUdOX0lEID0gJ2dvb2dsZS5jLmEuY19pZCc7XG5jb25zdCBDT05TT0xFX0NBTVBBSUdOX05BTUUgPSAnZ29vZ2xlLmMuYS5jX2wnO1xuY29uc3QgQ09OU09MRV9DQU1QQUlHTl9USU1FID0gJ2dvb2dsZS5jLmEudHMnO1xuLyoqIFNldCB0byAnMScgaWYgQW5hbHl0aWNzIGlzIGVuYWJsZWQgZm9yIHRoZSBjYW1wYWlnbiAqL1xuY29uc3QgQ09OU09MRV9DQU1QQUlHTl9BTkFMWVRJQ1NfRU5BQkxFRCA9ICdnb29nbGUuYy5hLmUnO1xuY29uc3QgREVGQVVMVF9SRUdJU1RSQVRJT05fVElNRU9VVCA9IDEwMDAwO1xudmFyIE1lc3NhZ2VUeXBlJDE7XG4oZnVuY3Rpb24gKE1lc3NhZ2VUeXBlKSB7XG4gIE1lc3NhZ2VUeXBlW01lc3NhZ2VUeXBlW1wiREFUQV9NRVNTQUdFXCJdID0gMV0gPSBcIkRBVEFfTUVTU0FHRVwiO1xuICBNZXNzYWdlVHlwZVtNZXNzYWdlVHlwZVtcIkRJU1BMQVlfTk9USUZJQ0FUSU9OXCJdID0gM10gPSBcIkRJU1BMQVlfTk9USUZJQ0FUSU9OXCI7XG59KShNZXNzYWdlVHlwZSQxIHx8IChNZXNzYWdlVHlwZSQxID0ge30pKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0XG4gKiBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2VcbiAqIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzXG4gKiBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyXG4gKiB0aGUgTGljZW5zZS5cbiAqL1xudmFyIE1lc3NhZ2VUeXBlO1xuKGZ1bmN0aW9uIChNZXNzYWdlVHlwZSkge1xuICBNZXNzYWdlVHlwZVtcIlBVU0hfUkVDRUlWRURcIl0gPSBcInB1c2gtcmVjZWl2ZWRcIjtcbiAgTWVzc2FnZVR5cGVbXCJOT1RJRklDQVRJT05fQ0xJQ0tFRFwiXSA9IFwibm90aWZpY2F0aW9uLWNsaWNrZWRcIjtcbn0pKE1lc3NhZ2VUeXBlIHx8IChNZXNzYWdlVHlwZSA9IHt9KSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBhcnJheVRvQmFzZTY0KGFycmF5KSB7XG4gIGNvbnN0IHVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSk7XG4gIGNvbnN0IGJhc2U2NFN0cmluZyA9IGJ0b2EoU3RyaW5nLmZyb21DaGFyQ29kZSguLi51aW50OEFycmF5KSk7XG4gIHJldHVybiBiYXNlNjRTdHJpbmcucmVwbGFjZSgvPS9nLCAnJykucmVwbGFjZSgvXFwrL2csICctJykucmVwbGFjZSgvXFwvL2csICdfJyk7XG59XG5mdW5jdGlvbiBiYXNlNjRUb0FycmF5KGJhc2U2NFN0cmluZykge1xuICBjb25zdCBwYWRkaW5nID0gJz0nLnJlcGVhdCgoNCAtIGJhc2U2NFN0cmluZy5sZW5ndGggJSA0KSAlIDQpO1xuICBjb25zdCBiYXNlNjQgPSAoYmFzZTY0U3RyaW5nICsgcGFkZGluZykucmVwbGFjZSgvXFwtL2csICcrJykucmVwbGFjZSgvXy9nLCAnLycpO1xuICBjb25zdCByYXdEYXRhID0gYXRvYihiYXNlNjQpO1xuICBjb25zdCBvdXRwdXRBcnJheSA9IG5ldyBVaW50OEFycmF5KHJhd0RhdGEubGVuZ3RoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByYXdEYXRhLmxlbmd0aDsgKytpKSB7XG4gICAgb3V0cHV0QXJyYXlbaV0gPSByYXdEYXRhLmNoYXJDb2RlQXQoaSk7XG4gIH1cbiAgcmV0dXJuIG91dHB1dEFycmF5O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgT0xEX0RCX05BTUUgPSAnZmNtX3Rva2VuX2RldGFpbHNfZGInO1xuLyoqXG4gKiBUaGUgbGFzdCBEQiB2ZXJzaW9uIG9mICdmY21fdG9rZW5fZGV0YWlsc19kYicgd2FzIDQuIFRoaXMgaXMgb25lIGhpZ2hlciwgc28gdGhhdCB0aGUgdXBncmFkZVxuICogY2FsbGJhY2sgaXMgY2FsbGVkIGZvciBhbGwgdmVyc2lvbnMgb2YgdGhlIG9sZCBEQi5cbiAqL1xuY29uc3QgT0xEX0RCX1ZFUlNJT04gPSA1O1xuY29uc3QgT0xEX09CSkVDVF9TVE9SRV9OQU1FID0gJ2ZjbV90b2tlbl9vYmplY3RfU3RvcmUnO1xuYXN5bmMgZnVuY3Rpb24gbWlncmF0ZU9sZERhdGFiYXNlKHNlbmRlcklkKSB7XG4gIGlmICgnZGF0YWJhc2VzJyBpbiBpbmRleGVkREIpIHtcbiAgICAvLyBpbmRleGVkRGIuZGF0YWJhc2VzKCkgaXMgYW4gSW5kZXhlZERCIHYzIEFQSSBhbmQgZG9lcyBub3QgZXhpc3QgaW4gYWxsIGJyb3dzZXJzLiBUT0RPOiBSZW1vdmVcbiAgICAvLyB0eXBlY2FzdCB3aGVuIGl0IGxhbmRzIGluIFRTIHR5cGVzLlxuICAgIGNvbnN0IGRhdGFiYXNlcyA9IGF3YWl0IGluZGV4ZWREQi5kYXRhYmFzZXMoKTtcbiAgICBjb25zdCBkYk5hbWVzID0gZGF0YWJhc2VzLm1hcChkYiA9PiBkYi5uYW1lKTtcbiAgICBpZiAoIWRiTmFtZXMuaW5jbHVkZXMoT0xEX0RCX05BTUUpKSB7XG4gICAgICAvLyBvbGQgREIgZGlkbid0IGV4aXN0LCBubyBuZWVkIHRvIG9wZW4uXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbiAgbGV0IHRva2VuRGV0YWlscyA9IG51bGw7XG4gIGNvbnN0IGRiID0gYXdhaXQgb3BlbkRCKE9MRF9EQl9OQU1FLCBPTERfREJfVkVSU0lPTiwge1xuICAgIHVwZ3JhZGU6IGFzeW5jIChkYiwgb2xkVmVyc2lvbiwgbmV3VmVyc2lvbiwgdXBncmFkZVRyYW5zYWN0aW9uKSA9PiB7XG4gICAgICB2YXIgX2E7XG4gICAgICBpZiAob2xkVmVyc2lvbiA8IDIpIHtcbiAgICAgICAgLy8gRGF0YWJhc2UgdG9vIG9sZCwgc2tpcCBtaWdyYXRpb24uXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICghZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhPTERfT0JKRUNUX1NUT1JFX05BTUUpKSB7XG4gICAgICAgIC8vIERhdGFiYXNlIGRpZCBub3QgZXhpc3QuIE5vdGhpbmcgdG8gZG8uXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9iamVjdFN0b3JlID0gdXBncmFkZVRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKE9MRF9PQkpFQ1RfU1RPUkVfTkFNRSk7XG4gICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IG9iamVjdFN0b3JlLmluZGV4KCdmY21TZW5kZXJJZCcpLmdldChzZW5kZXJJZCk7XG4gICAgICBhd2FpdCBvYmplY3RTdG9yZS5jbGVhcigpO1xuICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAvLyBObyBlbnRyeSBpbiB0aGUgZGF0YWJhc2UsIG5vdGhpbmcgdG8gbWlncmF0ZS5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKG9sZFZlcnNpb24gPT09IDIpIHtcbiAgICAgICAgY29uc3Qgb2xkRGV0YWlscyA9IHZhbHVlO1xuICAgICAgICBpZiAoIW9sZERldGFpbHMuYXV0aCB8fCAhb2xkRGV0YWlscy5wMjU2ZGggfHwgIW9sZERldGFpbHMuZW5kcG9pbnQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdG9rZW5EZXRhaWxzID0ge1xuICAgICAgICAgIHRva2VuOiBvbGREZXRhaWxzLmZjbVRva2VuLFxuICAgICAgICAgIGNyZWF0ZVRpbWU6IChfYSA9IG9sZERldGFpbHMuY3JlYXRlVGltZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogRGF0ZS5ub3coKSxcbiAgICAgICAgICBzdWJzY3JpcHRpb25PcHRpb25zOiB7XG4gICAgICAgICAgICBhdXRoOiBvbGREZXRhaWxzLmF1dGgsXG4gICAgICAgICAgICBwMjU2ZGg6IG9sZERldGFpbHMucDI1NmRoLFxuICAgICAgICAgICAgZW5kcG9pbnQ6IG9sZERldGFpbHMuZW5kcG9pbnQsXG4gICAgICAgICAgICBzd1Njb3BlOiBvbGREZXRhaWxzLnN3U2NvcGUsXG4gICAgICAgICAgICB2YXBpZEtleTogdHlwZW9mIG9sZERldGFpbHMudmFwaWRLZXkgPT09ICdzdHJpbmcnID8gb2xkRGV0YWlscy52YXBpZEtleSA6IGFycmF5VG9CYXNlNjQob2xkRGV0YWlscy52YXBpZEtleSlcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9IGVsc2UgaWYgKG9sZFZlcnNpb24gPT09IDMpIHtcbiAgICAgICAgY29uc3Qgb2xkRGV0YWlscyA9IHZhbHVlO1xuICAgICAgICB0b2tlbkRldGFpbHMgPSB7XG4gICAgICAgICAgdG9rZW46IG9sZERldGFpbHMuZmNtVG9rZW4sXG4gICAgICAgICAgY3JlYXRlVGltZTogb2xkRGV0YWlscy5jcmVhdGVUaW1lLFxuICAgICAgICAgIHN1YnNjcmlwdGlvbk9wdGlvbnM6IHtcbiAgICAgICAgICAgIGF1dGg6IGFycmF5VG9CYXNlNjQob2xkRGV0YWlscy5hdXRoKSxcbiAgICAgICAgICAgIHAyNTZkaDogYXJyYXlUb0Jhc2U2NChvbGREZXRhaWxzLnAyNTZkaCksXG4gICAgICAgICAgICBlbmRwb2ludDogb2xkRGV0YWlscy5lbmRwb2ludCxcbiAgICAgICAgICAgIHN3U2NvcGU6IG9sZERldGFpbHMuc3dTY29wZSxcbiAgICAgICAgICAgIHZhcGlkS2V5OiBhcnJheVRvQmFzZTY0KG9sZERldGFpbHMudmFwaWRLZXkpXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIGlmIChvbGRWZXJzaW9uID09PSA0KSB7XG4gICAgICAgIGNvbnN0IG9sZERldGFpbHMgPSB2YWx1ZTtcbiAgICAgICAgdG9rZW5EZXRhaWxzID0ge1xuICAgICAgICAgIHRva2VuOiBvbGREZXRhaWxzLmZjbVRva2VuLFxuICAgICAgICAgIGNyZWF0ZVRpbWU6IG9sZERldGFpbHMuY3JlYXRlVGltZSxcbiAgICAgICAgICBzdWJzY3JpcHRpb25PcHRpb25zOiB7XG4gICAgICAgICAgICBhdXRoOiBhcnJheVRvQmFzZTY0KG9sZERldGFpbHMuYXV0aCksXG4gICAgICAgICAgICBwMjU2ZGg6IGFycmF5VG9CYXNlNjQob2xkRGV0YWlscy5wMjU2ZGgpLFxuICAgICAgICAgICAgZW5kcG9pbnQ6IG9sZERldGFpbHMuZW5kcG9pbnQsXG4gICAgICAgICAgICBzd1Njb3BlOiBvbGREZXRhaWxzLnN3U2NvcGUsXG4gICAgICAgICAgICB2YXBpZEtleTogYXJyYXlUb0Jhc2U2NChvbGREZXRhaWxzLnZhcGlkS2V5KVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICBkYi5jbG9zZSgpO1xuICAvLyBEZWxldGUgYWxsIG9sZCBkYXRhYmFzZXMuXG4gIGF3YWl0IGRlbGV0ZURCKE9MRF9EQl9OQU1FKTtcbiAgYXdhaXQgZGVsZXRlREIoJ2ZjbV92YXBpZF9kZXRhaWxzX2RiJyk7XG4gIGF3YWl0IGRlbGV0ZURCKCd1bmRlZmluZWQnKTtcbiAgcmV0dXJuIGNoZWNrVG9rZW5EZXRhaWxzKHRva2VuRGV0YWlscykgPyB0b2tlbkRldGFpbHMgOiBudWxsO1xufVxuZnVuY3Rpb24gY2hlY2tUb2tlbkRldGFpbHModG9rZW5EZXRhaWxzKSB7XG4gIGlmICghdG9rZW5EZXRhaWxzIHx8ICF0b2tlbkRldGFpbHMuc3Vic2NyaXB0aW9uT3B0aW9ucykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCB7XG4gICAgc3Vic2NyaXB0aW9uT3B0aW9uc1xuICB9ID0gdG9rZW5EZXRhaWxzO1xuICByZXR1cm4gdHlwZW9mIHRva2VuRGV0YWlscy5jcmVhdGVUaW1lID09PSAnbnVtYmVyJyAmJiB0b2tlbkRldGFpbHMuY3JlYXRlVGltZSA+IDAgJiYgdHlwZW9mIHRva2VuRGV0YWlscy50b2tlbiA9PT0gJ3N0cmluZycgJiYgdG9rZW5EZXRhaWxzLnRva2VuLmxlbmd0aCA+IDAgJiYgdHlwZW9mIHN1YnNjcmlwdGlvbk9wdGlvbnMuYXV0aCA9PT0gJ3N0cmluZycgJiYgc3Vic2NyaXB0aW9uT3B0aW9ucy5hdXRoLmxlbmd0aCA+IDAgJiYgdHlwZW9mIHN1YnNjcmlwdGlvbk9wdGlvbnMucDI1NmRoID09PSAnc3RyaW5nJyAmJiBzdWJzY3JpcHRpb25PcHRpb25zLnAyNTZkaC5sZW5ndGggPiAwICYmIHR5cGVvZiBzdWJzY3JpcHRpb25PcHRpb25zLmVuZHBvaW50ID09PSAnc3RyaW5nJyAmJiBzdWJzY3JpcHRpb25PcHRpb25zLmVuZHBvaW50Lmxlbmd0aCA+IDAgJiYgdHlwZW9mIHN1YnNjcmlwdGlvbk9wdGlvbnMuc3dTY29wZSA9PT0gJ3N0cmluZycgJiYgc3Vic2NyaXB0aW9uT3B0aW9ucy5zd1Njb3BlLmxlbmd0aCA+IDAgJiYgdHlwZW9mIHN1YnNjcmlwdGlvbk9wdGlvbnMudmFwaWRLZXkgPT09ICdzdHJpbmcnICYmIHN1YnNjcmlwdGlvbk9wdGlvbnMudmFwaWRLZXkubGVuZ3RoID4gMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIEV4cG9ydGVkIGZvciB0ZXN0cy5cbmNvbnN0IERBVEFCQVNFX05BTUUgPSAnZmlyZWJhc2UtbWVzc2FnaW5nLWRhdGFiYXNlJztcbmNvbnN0IERBVEFCQVNFX1ZFUlNJT04gPSAxO1xuY29uc3QgT0JKRUNUX1NUT1JFX05BTUUgPSAnZmlyZWJhc2UtbWVzc2FnaW5nLXN0b3JlJztcbmxldCBkYlByb21pc2UgPSBudWxsO1xuZnVuY3Rpb24gZ2V0RGJQcm9taXNlKCkge1xuICBpZiAoIWRiUHJvbWlzZSkge1xuICAgIGRiUHJvbWlzZSA9IG9wZW5EQihEQVRBQkFTRV9OQU1FLCBEQVRBQkFTRV9WRVJTSU9OLCB7XG4gICAgICB1cGdyYWRlOiAodXBncmFkZURiLCBvbGRWZXJzaW9uKSA9PiB7XG4gICAgICAgIC8vIFdlIGRvbid0IHVzZSAnYnJlYWsnIGluIHRoaXMgc3dpdGNoIHN0YXRlbWVudCwgdGhlIGZhbGwtdGhyb3VnaCBiZWhhdmlvciBpcyB3aGF0IHdlIHdhbnQsXG4gICAgICAgIC8vIGJlY2F1c2UgaWYgdGhlcmUgYXJlIG11bHRpcGxlIHZlcnNpb25zIGJldHdlZW4gdGhlIG9sZCB2ZXJzaW9uIGFuZCB0aGUgY3VycmVudCB2ZXJzaW9uLCB3ZVxuICAgICAgICAvLyB3YW50IEFMTCB0aGUgbWlncmF0aW9ucyB0aGF0IGNvcnJlc3BvbmQgdG8gdGhvc2UgdmVyc2lvbnMgdG8gcnVuLCBub3Qgb25seSB0aGUgbGFzdCBvbmUuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZWZhdWx0LWNhc2VcbiAgICAgICAgc3dpdGNoIChvbGRWZXJzaW9uKSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgdXBncmFkZURiLmNyZWF0ZU9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIHJldHVybiBkYlByb21pc2U7XG59XG4vKiogR2V0cyByZWNvcmQocykgZnJvbSB0aGUgb2JqZWN0U3RvcmUgdGhhdCBtYXRjaCB0aGUgZ2l2ZW4ga2V5LiAqL1xuYXN5bmMgZnVuY3Rpb24gZGJHZXQoZmlyZWJhc2VEZXBlbmRlbmNpZXMpIHtcbiAgY29uc3Qga2V5ID0gZ2V0S2V5KGZpcmViYXNlRGVwZW5kZW5jaWVzKTtcbiAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcbiAgY29uc3QgdG9rZW5EZXRhaWxzID0gYXdhaXQgZGIudHJhbnNhY3Rpb24oT0JKRUNUX1NUT1JFX05BTUUpLm9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKS5nZXQoa2V5KTtcbiAgaWYgKHRva2VuRGV0YWlscykge1xuICAgIHJldHVybiB0b2tlbkRldGFpbHM7XG4gIH0gZWxzZSB7XG4gICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSB0b2tlbkRldGFpbHMgb2JqZWN0IGluIHRoZSBvbGQgREIuXG4gICAgY29uc3Qgb2xkVG9rZW5EZXRhaWxzID0gYXdhaXQgbWlncmF0ZU9sZERhdGFiYXNlKGZpcmViYXNlRGVwZW5kZW5jaWVzLmFwcENvbmZpZy5zZW5kZXJJZCk7XG4gICAgaWYgKG9sZFRva2VuRGV0YWlscykge1xuICAgICAgYXdhaXQgZGJTZXQoZmlyZWJhc2VEZXBlbmRlbmNpZXMsIG9sZFRva2VuRGV0YWlscyk7XG4gICAgICByZXR1cm4gb2xkVG9rZW5EZXRhaWxzO1xuICAgIH1cbiAgfVxufVxuLyoqIEFzc2lnbnMgb3Igb3ZlcndyaXRlcyB0aGUgcmVjb3JkIGZvciB0aGUgZ2l2ZW4ga2V5IHdpdGggdGhlIGdpdmVuIHZhbHVlLiAqL1xuYXN5bmMgZnVuY3Rpb24gZGJTZXQoZmlyZWJhc2VEZXBlbmRlbmNpZXMsIHRva2VuRGV0YWlscykge1xuICBjb25zdCBrZXkgPSBnZXRLZXkoZmlyZWJhc2VEZXBlbmRlbmNpZXMpO1xuICBjb25zdCBkYiA9IGF3YWl0IGdldERiUHJvbWlzZSgpO1xuICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKE9CSkVDVF9TVE9SRV9OQU1FLCAncmVhZHdyaXRlJyk7XG4gIGF3YWl0IHR4Lm9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKS5wdXQodG9rZW5EZXRhaWxzLCBrZXkpO1xuICBhd2FpdCB0eC5kb25lO1xuICByZXR1cm4gdG9rZW5EZXRhaWxzO1xufVxuLyoqIFJlbW92ZXMgcmVjb3JkKHMpIGZyb20gdGhlIG9iamVjdFN0b3JlIHRoYXQgbWF0Y2ggdGhlIGdpdmVuIGtleS4gKi9cbmFzeW5jIGZ1bmN0aW9uIGRiUmVtb3ZlKGZpcmViYXNlRGVwZW5kZW5jaWVzKSB7XG4gIGNvbnN0IGtleSA9IGdldEtleShmaXJlYmFzZURlcGVuZGVuY2llcyk7XG4gIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XG4gIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24oT0JKRUNUX1NUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcbiAgYXdhaXQgdHgub2JqZWN0U3RvcmUoT0JKRUNUX1NUT1JFX05BTUUpLmRlbGV0ZShrZXkpO1xuICBhd2FpdCB0eC5kb25lO1xufVxuZnVuY3Rpb24gZ2V0S2V5KHtcbiAgYXBwQ29uZmlnXG59KSB7XG4gIHJldHVybiBhcHBDb25maWcuYXBwSWQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBFUlJPUl9NQVAgPSB7XG4gIFtcIm1pc3NpbmctYXBwLWNvbmZpZy12YWx1ZXNcIiAvKiBFcnJvckNvZGUuTUlTU0lOR19BUFBfQ09ORklHX1ZBTFVFUyAqL106ICdNaXNzaW5nIEFwcCBjb25maWd1cmF0aW9uIHZhbHVlOiBcInskdmFsdWVOYW1lfVwiJyxcbiAgW1wib25seS1hdmFpbGFibGUtaW4td2luZG93XCIgLyogRXJyb3JDb2RlLkFWQUlMQUJMRV9JTl9XSU5ET1cgKi9dOiAnVGhpcyBtZXRob2QgaXMgYXZhaWxhYmxlIGluIGEgV2luZG93IGNvbnRleHQuJyxcbiAgW1wib25seS1hdmFpbGFibGUtaW4tc3dcIiAvKiBFcnJvckNvZGUuQVZBSUxBQkxFX0lOX1NXICovXTogJ1RoaXMgbWV0aG9kIGlzIGF2YWlsYWJsZSBpbiBhIHNlcnZpY2Ugd29ya2VyIGNvbnRleHQuJyxcbiAgW1wicGVybWlzc2lvbi1kZWZhdWx0XCIgLyogRXJyb3JDb2RlLlBFUk1JU1NJT05fREVGQVVMVCAqL106ICdUaGUgbm90aWZpY2F0aW9uIHBlcm1pc3Npb24gd2FzIG5vdCBncmFudGVkIGFuZCBkaXNtaXNzZWQgaW5zdGVhZC4nLFxuICBbXCJwZXJtaXNzaW9uLWJsb2NrZWRcIiAvKiBFcnJvckNvZGUuUEVSTUlTU0lPTl9CTE9DS0VEICovXTogJ1RoZSBub3RpZmljYXRpb24gcGVybWlzc2lvbiB3YXMgbm90IGdyYW50ZWQgYW5kIGJsb2NrZWQgaW5zdGVhZC4nLFxuICBbXCJ1bnN1cHBvcnRlZC1icm93c2VyXCIgLyogRXJyb3JDb2RlLlVOU1VQUE9SVEVEX0JST1dTRVIgKi9dOiBcIlRoaXMgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgdGhlIEFQSSdzIHJlcXVpcmVkIHRvIHVzZSB0aGUgRmlyZWJhc2UgU0RLLlwiLFxuICBbXCJpbmRleGVkLWRiLXVuc3VwcG9ydGVkXCIgLyogRXJyb3JDb2RlLklOREVYRURfREJfVU5TVVBQT1JURUQgKi9dOiBcIlRoaXMgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgaW5kZXhlZERiLm9wZW4oKSAoZXguIFNhZmFyaSBpRnJhbWUsIEZpcmVmb3ggUHJpdmF0ZSBCcm93c2luZywgZXRjKVwiLFxuICBbXCJmYWlsZWQtc2VydmljZS13b3JrZXItcmVnaXN0cmF0aW9uXCIgLyogRXJyb3JDb2RlLkZBSUxFRF9ERUZBVUxUX1JFR0lTVFJBVElPTiAqL106ICdXZSBhcmUgdW5hYmxlIHRvIHJlZ2lzdGVyIHRoZSBkZWZhdWx0IHNlcnZpY2Ugd29ya2VyLiB7JGJyb3dzZXJFcnJvck1lc3NhZ2V9JyxcbiAgW1widG9rZW4tc3Vic2NyaWJlLWZhaWxlZFwiIC8qIEVycm9yQ29kZS5UT0tFTl9TVUJTQ1JJQkVfRkFJTEVEICovXTogJ0EgcHJvYmxlbSBvY2N1cnJlZCB3aGlsZSBzdWJzY3JpYmluZyB0aGUgdXNlciB0byBGQ006IHskZXJyb3JJbmZvfScsXG4gIFtcInRva2VuLXN1YnNjcmliZS1uby10b2tlblwiIC8qIEVycm9yQ29kZS5UT0tFTl9TVUJTQ1JJQkVfTk9fVE9LRU4gKi9dOiAnRkNNIHJldHVybmVkIG5vIHRva2VuIHdoZW4gc3Vic2NyaWJpbmcgdGhlIHVzZXIgdG8gcHVzaC4nLFxuICBbXCJ0b2tlbi11bnN1YnNjcmliZS1mYWlsZWRcIiAvKiBFcnJvckNvZGUuVE9LRU5fVU5TVUJTQ1JJQkVfRkFJTEVEICovXTogJ0EgcHJvYmxlbSBvY2N1cnJlZCB3aGlsZSB1bnN1YnNjcmliaW5nIHRoZSAnICsgJ3VzZXIgZnJvbSBGQ006IHskZXJyb3JJbmZvfScsXG4gIFtcInRva2VuLXVwZGF0ZS1mYWlsZWRcIiAvKiBFcnJvckNvZGUuVE9LRU5fVVBEQVRFX0ZBSUxFRCAqL106ICdBIHByb2JsZW0gb2NjdXJyZWQgd2hpbGUgdXBkYXRpbmcgdGhlIHVzZXIgZnJvbSBGQ006IHskZXJyb3JJbmZvfScsXG4gIFtcInRva2VuLXVwZGF0ZS1uby10b2tlblwiIC8qIEVycm9yQ29kZS5UT0tFTl9VUERBVEVfTk9fVE9LRU4gKi9dOiAnRkNNIHJldHVybmVkIG5vIHRva2VuIHdoZW4gdXBkYXRpbmcgdGhlIHVzZXIgdG8gcHVzaC4nLFxuICBbXCJ1c2Utc3ctYWZ0ZXItZ2V0LXRva2VuXCIgLyogRXJyb3JDb2RlLlVTRV9TV19BRlRFUl9HRVRfVE9LRU4gKi9dOiAnVGhlIHVzZVNlcnZpY2VXb3JrZXIoKSBtZXRob2QgbWF5IG9ubHkgYmUgY2FsbGVkIG9uY2UgYW5kIG11c3QgYmUgJyArICdjYWxsZWQgYmVmb3JlIGNhbGxpbmcgZ2V0VG9rZW4oKSB0byBlbnN1cmUgeW91ciBzZXJ2aWNlIHdvcmtlciBpcyB1c2VkLicsXG4gIFtcImludmFsaWQtc3ctcmVnaXN0cmF0aW9uXCIgLyogRXJyb3JDb2RlLklOVkFMSURfU1dfUkVHSVNUUkFUSU9OICovXTogJ1RoZSBpbnB1dCB0byB1c2VTZXJ2aWNlV29ya2VyKCkgbXVzdCBiZSBhIFNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24uJyxcbiAgW1wiaW52YWxpZC1iZy1oYW5kbGVyXCIgLyogRXJyb3JDb2RlLklOVkFMSURfQkdfSEFORExFUiAqL106ICdUaGUgaW5wdXQgdG8gc2V0QmFja2dyb3VuZE1lc3NhZ2VIYW5kbGVyKCkgbXVzdCBiZSBhIGZ1bmN0aW9uLicsXG4gIFtcImludmFsaWQtdmFwaWQta2V5XCIgLyogRXJyb3JDb2RlLklOVkFMSURfVkFQSURfS0VZICovXTogJ1RoZSBwdWJsaWMgVkFQSUQga2V5IG11c3QgYmUgYSBzdHJpbmcuJyxcbiAgW1widXNlLXZhcGlkLWtleS1hZnRlci1nZXQtdG9rZW5cIiAvKiBFcnJvckNvZGUuVVNFX1ZBUElEX0tFWV9BRlRFUl9HRVRfVE9LRU4gKi9dOiAnVGhlIHVzZVB1YmxpY1ZhcGlkS2V5KCkgbWV0aG9kIG1heSBvbmx5IGJlIGNhbGxlZCBvbmNlIGFuZCBtdXN0IGJlICcgKyAnY2FsbGVkIGJlZm9yZSBjYWxsaW5nIGdldFRva2VuKCkgdG8gZW5zdXJlIHlvdXIgVkFQSUQga2V5IGlzIHVzZWQuJ1xufTtcbmNvbnN0IEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdtZXNzYWdpbmcnLCAnTWVzc2FnaW5nJywgRVJST1JfTUFQKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RHZXRUb2tlbihmaXJlYmFzZURlcGVuZGVuY2llcywgc3Vic2NyaXB0aW9uT3B0aW9ucykge1xuICBjb25zdCBoZWFkZXJzID0gYXdhaXQgZ2V0SGVhZGVycyhmaXJlYmFzZURlcGVuZGVuY2llcyk7XG4gIGNvbnN0IGJvZHkgPSBnZXRCb2R5KHN1YnNjcmlwdGlvbk9wdGlvbnMpO1xuICBjb25zdCBzdWJzY3JpYmVPcHRpb25zID0ge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGhlYWRlcnMsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSlcbiAgfTtcbiAgbGV0IHJlc3BvbnNlRGF0YTtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGdldEVuZHBvaW50KGZpcmViYXNlRGVwZW5kZW5jaWVzLmFwcENvbmZpZyksIHN1YnNjcmliZU9wdGlvbnMpO1xuICAgIHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJ0b2tlbi1zdWJzY3JpYmUtZmFpbGVkXCIgLyogRXJyb3JDb2RlLlRPS0VOX1NVQlNDUklCRV9GQUlMRUQgKi8sIHtcbiAgICAgIGVycm9ySW5mbzogZXJyID09PSBudWxsIHx8IGVyciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyLnRvU3RyaW5nKClcbiAgICB9KTtcbiAgfVxuICBpZiAocmVzcG9uc2VEYXRhLmVycm9yKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IHJlc3BvbnNlRGF0YS5lcnJvci5tZXNzYWdlO1xuICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwidG9rZW4tc3Vic2NyaWJlLWZhaWxlZFwiIC8qIEVycm9yQ29kZS5UT0tFTl9TVUJTQ1JJQkVfRkFJTEVEICovLCB7XG4gICAgICBlcnJvckluZm86IG1lc3NhZ2VcbiAgICB9KTtcbiAgfVxuICBpZiAoIXJlc3BvbnNlRGF0YS50b2tlbikge1xuICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwidG9rZW4tc3Vic2NyaWJlLW5vLXRva2VuXCIgLyogRXJyb3JDb2RlLlRPS0VOX1NVQlNDUklCRV9OT19UT0tFTiAqLyk7XG4gIH1cbiAgcmV0dXJuIHJlc3BvbnNlRGF0YS50b2tlbjtcbn1cbmFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RVcGRhdGVUb2tlbihmaXJlYmFzZURlcGVuZGVuY2llcywgdG9rZW5EZXRhaWxzKSB7XG4gIGNvbnN0IGhlYWRlcnMgPSBhd2FpdCBnZXRIZWFkZXJzKGZpcmViYXNlRGVwZW5kZW5jaWVzKTtcbiAgY29uc3QgYm9keSA9IGdldEJvZHkodG9rZW5EZXRhaWxzLnN1YnNjcmlwdGlvbk9wdGlvbnMpO1xuICBjb25zdCB1cGRhdGVPcHRpb25zID0ge1xuICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICBoZWFkZXJzLFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpXG4gIH07XG4gIGxldCByZXNwb25zZURhdGE7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtnZXRFbmRwb2ludChmaXJlYmFzZURlcGVuZGVuY2llcy5hcHBDb25maWcpfS8ke3Rva2VuRGV0YWlscy50b2tlbn1gLCB1cGRhdGVPcHRpb25zKTtcbiAgICByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwidG9rZW4tdXBkYXRlLWZhaWxlZFwiIC8qIEVycm9yQ29kZS5UT0tFTl9VUERBVEVfRkFJTEVEICovLCB7XG4gICAgICBlcnJvckluZm86IGVyciA9PT0gbnVsbCB8fCBlcnIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVyci50b1N0cmluZygpXG4gICAgfSk7XG4gIH1cbiAgaWYgKHJlc3BvbnNlRGF0YS5lcnJvcikge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSByZXNwb25zZURhdGEuZXJyb3IubWVzc2FnZTtcbiAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcInRva2VuLXVwZGF0ZS1mYWlsZWRcIiAvKiBFcnJvckNvZGUuVE9LRU5fVVBEQVRFX0ZBSUxFRCAqLywge1xuICAgICAgZXJyb3JJbmZvOiBtZXNzYWdlXG4gICAgfSk7XG4gIH1cbiAgaWYgKCFyZXNwb25zZURhdGEudG9rZW4pIHtcbiAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcInRva2VuLXVwZGF0ZS1uby10b2tlblwiIC8qIEVycm9yQ29kZS5UT0tFTl9VUERBVEVfTk9fVE9LRU4gKi8pO1xuICB9XG4gIHJldHVybiByZXNwb25zZURhdGEudG9rZW47XG59XG5hc3luYyBmdW5jdGlvbiByZXF1ZXN0RGVsZXRlVG9rZW4oZmlyZWJhc2VEZXBlbmRlbmNpZXMsIHRva2VuKSB7XG4gIGNvbnN0IGhlYWRlcnMgPSBhd2FpdCBnZXRIZWFkZXJzKGZpcmViYXNlRGVwZW5kZW5jaWVzKTtcbiAgY29uc3QgdW5zdWJzY3JpYmVPcHRpb25zID0ge1xuICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgaGVhZGVyc1xuICB9O1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7Z2V0RW5kcG9pbnQoZmlyZWJhc2VEZXBlbmRlbmNpZXMuYXBwQ29uZmlnKX0vJHt0b2tlbn1gLCB1bnN1YnNjcmliZU9wdGlvbnMpO1xuICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICBpZiAocmVzcG9uc2VEYXRhLmVycm9yKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gcmVzcG9uc2VEYXRhLmVycm9yLm1lc3NhZ2U7XG4gICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcInRva2VuLXVuc3Vic2NyaWJlLWZhaWxlZFwiIC8qIEVycm9yQ29kZS5UT0tFTl9VTlNVQlNDUklCRV9GQUlMRUQgKi8sIHtcbiAgICAgICAgZXJyb3JJbmZvOiBtZXNzYWdlXG4gICAgICB9KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwidG9rZW4tdW5zdWJzY3JpYmUtZmFpbGVkXCIgLyogRXJyb3JDb2RlLlRPS0VOX1VOU1VCU0NSSUJFX0ZBSUxFRCAqLywge1xuICAgICAgZXJyb3JJbmZvOiBlcnIgPT09IG51bGwgfHwgZXJyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnIudG9TdHJpbmcoKVxuICAgIH0pO1xuICB9XG59XG5mdW5jdGlvbiBnZXRFbmRwb2ludCh7XG4gIHByb2plY3RJZFxufSkge1xuICByZXR1cm4gYCR7RU5EUE9JTlR9L3Byb2plY3RzLyR7cHJvamVjdElkfS9yZWdpc3RyYXRpb25zYDtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdldEhlYWRlcnMoe1xuICBhcHBDb25maWcsXG4gIGluc3RhbGxhdGlvbnNcbn0pIHtcbiAgY29uc3QgYXV0aFRva2VuID0gYXdhaXQgaW5zdGFsbGF0aW9ucy5nZXRUb2tlbigpO1xuICByZXR1cm4gbmV3IEhlYWRlcnMoe1xuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgJ3gtZ29vZy1hcGkta2V5JzogYXBwQ29uZmlnLmFwaUtleSxcbiAgICAneC1nb29nLWZpcmViYXNlLWluc3RhbGxhdGlvbnMtYXV0aCc6IGBGSVMgJHthdXRoVG9rZW59YFxuICB9KTtcbn1cbmZ1bmN0aW9uIGdldEJvZHkoe1xuICBwMjU2ZGgsXG4gIGF1dGgsXG4gIGVuZHBvaW50LFxuICB2YXBpZEtleVxufSkge1xuICBjb25zdCBib2R5ID0ge1xuICAgIHdlYjoge1xuICAgICAgZW5kcG9pbnQsXG4gICAgICBhdXRoLFxuICAgICAgcDI1NmRoXG4gICAgfVxuICB9O1xuICBpZiAodmFwaWRLZXkgIT09IERFRkFVTFRfVkFQSURfS0VZKSB7XG4gICAgYm9keS53ZWIuYXBwbGljYXRpb25QdWJLZXkgPSB2YXBpZEtleTtcbiAgfVxuICByZXR1cm4gYm9keTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFVwZGF0ZVJlZ2lzdHJhdGlvbiB3aWxsIGJlIGNhbGxlZCBvbmNlIGV2ZXJ5IHdlZWsuXG5jb25zdCBUT0tFTl9FWFBJUkFUSU9OX01TID0gNyAqIDI0ICogNjAgKiA2MCAqIDEwMDA7IC8vIDcgZGF5c1xuYXN5bmMgZnVuY3Rpb24gZ2V0VG9rZW5JbnRlcm5hbChtZXNzYWdpbmcpIHtcbiAgY29uc3QgcHVzaFN1YnNjcmlwdGlvbiA9IGF3YWl0IGdldFB1c2hTdWJzY3JpcHRpb24obWVzc2FnaW5nLnN3UmVnaXN0cmF0aW9uLCBtZXNzYWdpbmcudmFwaWRLZXkpO1xuICBjb25zdCBzdWJzY3JpcHRpb25PcHRpb25zID0ge1xuICAgIHZhcGlkS2V5OiBtZXNzYWdpbmcudmFwaWRLZXksXG4gICAgc3dTY29wZTogbWVzc2FnaW5nLnN3UmVnaXN0cmF0aW9uLnNjb3BlLFxuICAgIGVuZHBvaW50OiBwdXNoU3Vic2NyaXB0aW9uLmVuZHBvaW50LFxuICAgIGF1dGg6IGFycmF5VG9CYXNlNjQocHVzaFN1YnNjcmlwdGlvbi5nZXRLZXkoJ2F1dGgnKSksXG4gICAgcDI1NmRoOiBhcnJheVRvQmFzZTY0KHB1c2hTdWJzY3JpcHRpb24uZ2V0S2V5KCdwMjU2ZGgnKSlcbiAgfTtcbiAgY29uc3QgdG9rZW5EZXRhaWxzID0gYXdhaXQgZGJHZXQobWVzc2FnaW5nLmZpcmViYXNlRGVwZW5kZW5jaWVzKTtcbiAgaWYgKCF0b2tlbkRldGFpbHMpIHtcbiAgICAvLyBObyB0b2tlbiwgZ2V0IGEgbmV3IG9uZS5cbiAgICByZXR1cm4gZ2V0TmV3VG9rZW4obWVzc2FnaW5nLmZpcmViYXNlRGVwZW5kZW5jaWVzLCBzdWJzY3JpcHRpb25PcHRpb25zKTtcbiAgfSBlbHNlIGlmICghaXNUb2tlblZhbGlkKHRva2VuRGV0YWlscy5zdWJzY3JpcHRpb25PcHRpb25zLCBzdWJzY3JpcHRpb25PcHRpb25zKSkge1xuICAgIC8vIEludmFsaWQgdG9rZW4sIGdldCBhIG5ldyBvbmUuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHJlcXVlc3REZWxldGVUb2tlbihtZXNzYWdpbmcuZmlyZWJhc2VEZXBlbmRlbmNpZXMsIHRva2VuRGV0YWlscy50b2tlbik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gU3VwcHJlc3MgZXJyb3JzIGJlY2F1c2Ugb2YgIzIzNjRcbiAgICAgIGNvbnNvbGUud2FybihlKTtcbiAgICB9XG4gICAgcmV0dXJuIGdldE5ld1Rva2VuKG1lc3NhZ2luZy5maXJlYmFzZURlcGVuZGVuY2llcywgc3Vic2NyaXB0aW9uT3B0aW9ucyk7XG4gIH0gZWxzZSBpZiAoRGF0ZS5ub3coKSA+PSB0b2tlbkRldGFpbHMuY3JlYXRlVGltZSArIFRPS0VOX0VYUElSQVRJT05fTVMpIHtcbiAgICAvLyBXZWVrbHkgdG9rZW4gcmVmcmVzaFxuICAgIHJldHVybiB1cGRhdGVUb2tlbihtZXNzYWdpbmcsIHtcbiAgICAgIHRva2VuOiB0b2tlbkRldGFpbHMudG9rZW4sXG4gICAgICBjcmVhdGVUaW1lOiBEYXRlLm5vdygpLFxuICAgICAgc3Vic2NyaXB0aW9uT3B0aW9uc1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIC8vIFZhbGlkIHRva2VuLCBub3RoaW5nIHRvIGRvLlxuICAgIHJldHVybiB0b2tlbkRldGFpbHMudG9rZW47XG4gIH1cbn1cbi8qKlxuICogVGhpcyBtZXRob2QgZGVsZXRlcyB0aGUgdG9rZW4gZnJvbSB0aGUgZGF0YWJhc2UsIHVuc3Vic2NyaWJlcyB0aGUgdG9rZW4gZnJvbSBGQ00sIGFuZCB1bnJlZ2lzdGVyc1xuICogdGhlIHB1c2ggc3Vic2NyaXB0aW9uIGlmIGl0IGV4aXN0cy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZGVsZXRlVG9rZW5JbnRlcm5hbChtZXNzYWdpbmcpIHtcbiAgY29uc3QgdG9rZW5EZXRhaWxzID0gYXdhaXQgZGJHZXQobWVzc2FnaW5nLmZpcmViYXNlRGVwZW5kZW5jaWVzKTtcbiAgaWYgKHRva2VuRGV0YWlscykge1xuICAgIGF3YWl0IHJlcXVlc3REZWxldGVUb2tlbihtZXNzYWdpbmcuZmlyZWJhc2VEZXBlbmRlbmNpZXMsIHRva2VuRGV0YWlscy50b2tlbik7XG4gICAgYXdhaXQgZGJSZW1vdmUobWVzc2FnaW5nLmZpcmViYXNlRGVwZW5kZW5jaWVzKTtcbiAgfVxuICAvLyBVbnN1YnNjcmliZSBmcm9tIHRoZSBwdXNoIHN1YnNjcmlwdGlvbi5cbiAgY29uc3QgcHVzaFN1YnNjcmlwdGlvbiA9IGF3YWl0IG1lc3NhZ2luZy5zd1JlZ2lzdHJhdGlvbi5wdXNoTWFuYWdlci5nZXRTdWJzY3JpcHRpb24oKTtcbiAgaWYgKHB1c2hTdWJzY3JpcHRpb24pIHtcbiAgICByZXR1cm4gcHVzaFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICB9XG4gIC8vIElmIHRoZXJlJ3Mgbm8gU1csIGNvbnNpZGVyIGl0IGEgc3VjY2Vzcy5cbiAgcmV0dXJuIHRydWU7XG59XG5hc3luYyBmdW5jdGlvbiB1cGRhdGVUb2tlbihtZXNzYWdpbmcsIHRva2VuRGV0YWlscykge1xuICB0cnkge1xuICAgIGNvbnN0IHVwZGF0ZWRUb2tlbiA9IGF3YWl0IHJlcXVlc3RVcGRhdGVUb2tlbihtZXNzYWdpbmcuZmlyZWJhc2VEZXBlbmRlbmNpZXMsIHRva2VuRGV0YWlscyk7XG4gICAgY29uc3QgdXBkYXRlZFRva2VuRGV0YWlscyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdG9rZW5EZXRhaWxzKSwge1xuICAgICAgdG9rZW46IHVwZGF0ZWRUb2tlbixcbiAgICAgIGNyZWF0ZVRpbWU6IERhdGUubm93KClcbiAgICB9KTtcbiAgICBhd2FpdCBkYlNldChtZXNzYWdpbmcuZmlyZWJhc2VEZXBlbmRlbmNpZXMsIHVwZGF0ZWRUb2tlbkRldGFpbHMpO1xuICAgIHJldHVybiB1cGRhdGVkVG9rZW47XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBlO1xuICB9XG59XG5hc3luYyBmdW5jdGlvbiBnZXROZXdUb2tlbihmaXJlYmFzZURlcGVuZGVuY2llcywgc3Vic2NyaXB0aW9uT3B0aW9ucykge1xuICBjb25zdCB0b2tlbiA9IGF3YWl0IHJlcXVlc3RHZXRUb2tlbihmaXJlYmFzZURlcGVuZGVuY2llcywgc3Vic2NyaXB0aW9uT3B0aW9ucyk7XG4gIGNvbnN0IHRva2VuRGV0YWlscyA9IHtcbiAgICB0b2tlbixcbiAgICBjcmVhdGVUaW1lOiBEYXRlLm5vdygpLFxuICAgIHN1YnNjcmlwdGlvbk9wdGlvbnNcbiAgfTtcbiAgYXdhaXQgZGJTZXQoZmlyZWJhc2VEZXBlbmRlbmNpZXMsIHRva2VuRGV0YWlscyk7XG4gIHJldHVybiB0b2tlbkRldGFpbHMudG9rZW47XG59XG4vKipcbiAqIEdldHMgYSBQdXNoU3Vic2NyaXB0aW9uIGZvciB0aGUgY3VycmVudCB1c2VyLlxuICovXG5hc3luYyBmdW5jdGlvbiBnZXRQdXNoU3Vic2NyaXB0aW9uKHN3UmVnaXN0cmF0aW9uLCB2YXBpZEtleSkge1xuICBjb25zdCBzdWJzY3JpcHRpb24gPSBhd2FpdCBzd1JlZ2lzdHJhdGlvbi5wdXNoTWFuYWdlci5nZXRTdWJzY3JpcHRpb24oKTtcbiAgaWYgKHN1YnNjcmlwdGlvbikge1xuICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gIH1cbiAgcmV0dXJuIHN3UmVnaXN0cmF0aW9uLnB1c2hNYW5hZ2VyLnN1YnNjcmliZSh7XG4gICAgdXNlclZpc2libGVPbmx5OiB0cnVlLFxuICAgIC8vIENocm9tZSA8PSA3NSBkb2Vzbid0IHN1cHBvcnQgYmFzZTY0LWVuY29kZWQgVkFQSUQga2V5LiBGb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgVkFQSUQga2V5XG4gICAgLy8gc3VibWl0dGVkIHRvIHB1c2hNYW5hZ2VyI3N1YnNjcmliZSBtdXN0IGJlIG9mIHR5cGUgVWludDhBcnJheS5cbiAgICBhcHBsaWNhdGlvblNlcnZlcktleTogYmFzZTY0VG9BcnJheSh2YXBpZEtleSlcbiAgfSk7XG59XG4vKipcbiAqIENoZWNrcyBpZiB0aGUgc2F2ZWQgdG9rZW5EZXRhaWxzIG9iamVjdCBtYXRjaGVzIHRoZSBjb25maWd1cmF0aW9uIHByb3ZpZGVkLlxuICovXG5mdW5jdGlvbiBpc1Rva2VuVmFsaWQoZGJPcHRpb25zLCBjdXJyZW50T3B0aW9ucykge1xuICBjb25zdCBpc1ZhcGlkS2V5RXF1YWwgPSBjdXJyZW50T3B0aW9ucy52YXBpZEtleSA9PT0gZGJPcHRpb25zLnZhcGlkS2V5O1xuICBjb25zdCBpc0VuZHBvaW50RXF1YWwgPSBjdXJyZW50T3B0aW9ucy5lbmRwb2ludCA9PT0gZGJPcHRpb25zLmVuZHBvaW50O1xuICBjb25zdCBpc0F1dGhFcXVhbCA9IGN1cnJlbnRPcHRpb25zLmF1dGggPT09IGRiT3B0aW9ucy5hdXRoO1xuICBjb25zdCBpc1AyNTZkaEVxdWFsID0gY3VycmVudE9wdGlvbnMucDI1NmRoID09PSBkYk9wdGlvbnMucDI1NmRoO1xuICByZXR1cm4gaXNWYXBpZEtleUVxdWFsICYmIGlzRW5kcG9pbnRFcXVhbCAmJiBpc0F1dGhFcXVhbCAmJiBpc1AyNTZkaEVxdWFsO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuZnVuY3Rpb24gZXh0ZXJuYWxpemVQYXlsb2FkKGludGVybmFsUGF5bG9hZCkge1xuICBjb25zdCBwYXlsb2FkID0ge1xuICAgIGZyb206IGludGVybmFsUGF5bG9hZC5mcm9tLFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjYW1lbGNhc2VcbiAgICBjb2xsYXBzZUtleTogaW50ZXJuYWxQYXlsb2FkLmNvbGxhcHNlX2tleSxcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2FtZWxjYXNlXG4gICAgbWVzc2FnZUlkOiBpbnRlcm5hbFBheWxvYWQuZmNtTWVzc2FnZUlkXG4gIH07XG4gIHByb3BhZ2F0ZU5vdGlmaWNhdGlvblBheWxvYWQocGF5bG9hZCwgaW50ZXJuYWxQYXlsb2FkKTtcbiAgcHJvcGFnYXRlRGF0YVBheWxvYWQocGF5bG9hZCwgaW50ZXJuYWxQYXlsb2FkKTtcbiAgcHJvcGFnYXRlRmNtT3B0aW9ucyhwYXlsb2FkLCBpbnRlcm5hbFBheWxvYWQpO1xuICByZXR1cm4gcGF5bG9hZDtcbn1cbmZ1bmN0aW9uIHByb3BhZ2F0ZU5vdGlmaWNhdGlvblBheWxvYWQocGF5bG9hZCwgbWVzc2FnZVBheWxvYWRJbnRlcm5hbCkge1xuICBpZiAoIW1lc3NhZ2VQYXlsb2FkSW50ZXJuYWwubm90aWZpY2F0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHBheWxvYWQubm90aWZpY2F0aW9uID0ge307XG4gIGNvbnN0IHRpdGxlID0gbWVzc2FnZVBheWxvYWRJbnRlcm5hbC5ub3RpZmljYXRpb24udGl0bGU7XG4gIGlmICghIXRpdGxlKSB7XG4gICAgcGF5bG9hZC5ub3RpZmljYXRpb24udGl0bGUgPSB0aXRsZTtcbiAgfVxuICBjb25zdCBib2R5ID0gbWVzc2FnZVBheWxvYWRJbnRlcm5hbC5ub3RpZmljYXRpb24uYm9keTtcbiAgaWYgKCEhYm9keSkge1xuICAgIHBheWxvYWQubm90aWZpY2F0aW9uLmJvZHkgPSBib2R5O1xuICB9XG4gIGNvbnN0IGltYWdlID0gbWVzc2FnZVBheWxvYWRJbnRlcm5hbC5ub3RpZmljYXRpb24uaW1hZ2U7XG4gIGlmICghIWltYWdlKSB7XG4gICAgcGF5bG9hZC5ub3RpZmljYXRpb24uaW1hZ2UgPSBpbWFnZTtcbiAgfVxuICBjb25zdCBpY29uID0gbWVzc2FnZVBheWxvYWRJbnRlcm5hbC5ub3RpZmljYXRpb24uaWNvbjtcbiAgaWYgKCEhaWNvbikge1xuICAgIHBheWxvYWQubm90aWZpY2F0aW9uLmljb24gPSBpY29uO1xuICB9XG59XG5mdW5jdGlvbiBwcm9wYWdhdGVEYXRhUGF5bG9hZChwYXlsb2FkLCBtZXNzYWdlUGF5bG9hZEludGVybmFsKSB7XG4gIGlmICghbWVzc2FnZVBheWxvYWRJbnRlcm5hbC5kYXRhKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHBheWxvYWQuZGF0YSA9IG1lc3NhZ2VQYXlsb2FkSW50ZXJuYWwuZGF0YTtcbn1cbmZ1bmN0aW9uIHByb3BhZ2F0ZUZjbU9wdGlvbnMocGF5bG9hZCwgbWVzc2FnZVBheWxvYWRJbnRlcm5hbCkge1xuICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lO1xuICAvLyBmY21PcHRpb25zLmxpbmsgdmFsdWUgaXMgd3JpdHRlbiBpbnRvIG5vdGlmaWNhdGlvbi5jbGlja19hY3Rpb24uIHNlZSBtb3JlIGluIGIvMjMyMDcyMTExXG4gIGlmICghbWVzc2FnZVBheWxvYWRJbnRlcm5hbC5mY21PcHRpb25zICYmICEoKF9hID0gbWVzc2FnZVBheWxvYWRJbnRlcm5hbC5ub3RpZmljYXRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jbGlja19hY3Rpb24pKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHBheWxvYWQuZmNtT3B0aW9ucyA9IHt9O1xuICBjb25zdCBsaW5rID0gKF9jID0gKF9iID0gbWVzc2FnZVBheWxvYWRJbnRlcm5hbC5mY21PcHRpb25zKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubGluaykgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogKF9kID0gbWVzc2FnZVBheWxvYWRJbnRlcm5hbC5ub3RpZmljYXRpb24pID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5jbGlja19hY3Rpb247XG4gIGlmICghIWxpbmspIHtcbiAgICBwYXlsb2FkLmZjbU9wdGlvbnMubGluayA9IGxpbms7XG4gIH1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNhbWVsY2FzZVxuICBjb25zdCBhbmFseXRpY3NMYWJlbCA9IChfZSA9IG1lc3NhZ2VQYXlsb2FkSW50ZXJuYWwuZmNtT3B0aW9ucykgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLmFuYWx5dGljc19sYWJlbDtcbiAgaWYgKCEhYW5hbHl0aWNzTGFiZWwpIHtcbiAgICBwYXlsb2FkLmZjbU9wdGlvbnMuYW5hbHl0aWNzTGFiZWwgPSBhbmFseXRpY3NMYWJlbDtcbiAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuZnVuY3Rpb24gaXNDb25zb2xlTWVzc2FnZShkYXRhKSB7XG4gIC8vIFRoaXMgbWVzc2FnZSBoYXMgYSBjYW1wYWlnbiBJRCwgbWVhbmluZyBpdCB3YXMgc2VudCB1c2luZyB0aGUgRmlyZWJhc2UgQ29uc29sZS5cbiAgcmV0dXJuIHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiAhIWRhdGEgJiYgQ09OU09MRV9DQU1QQUlHTl9JRCBpbiBkYXRhO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuX21lcmdlU3RyaW5ncygnQXpTQ2J3NjNnMVIwbkN3ODVqRzgnLCAnSWF5YTN5TEt3bWd2aDdjRjBxNCcpO1xuZnVuY3Rpb24gX21lcmdlU3RyaW5ncyhzMSwgczIpIHtcbiAgY29uc3QgcmVzdWx0QXJyYXkgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzMS5sZW5ndGg7IGkrKykge1xuICAgIHJlc3VsdEFycmF5LnB1c2goczEuY2hhckF0KGkpKTtcbiAgICBpZiAoaSA8IHMyLmxlbmd0aCkge1xuICAgICAgcmVzdWx0QXJyYXkucHVzaChzMi5jaGFyQXQoaSkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0QXJyYXkuam9pbignJyk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBleHRyYWN0QXBwQ29uZmlnKGFwcCkge1xuICBpZiAoIWFwcCB8fCAhYXBwLm9wdGlvbnMpIHtcbiAgICB0aHJvdyBnZXRNaXNzaW5nVmFsdWVFcnJvcignQXBwIENvbmZpZ3VyYXRpb24gT2JqZWN0Jyk7XG4gIH1cbiAgaWYgKCFhcHAubmFtZSkge1xuICAgIHRocm93IGdldE1pc3NpbmdWYWx1ZUVycm9yKCdBcHAgTmFtZScpO1xuICB9XG4gIC8vIFJlcXVpcmVkIGFwcCBjb25maWcga2V5c1xuICBjb25zdCBjb25maWdLZXlzID0gWydwcm9qZWN0SWQnLCAnYXBpS2V5JywgJ2FwcElkJywgJ21lc3NhZ2luZ1NlbmRlcklkJ107XG4gIGNvbnN0IHtcbiAgICBvcHRpb25zXG4gIH0gPSBhcHA7XG4gIGZvciAoY29uc3Qga2V5TmFtZSBvZiBjb25maWdLZXlzKSB7XG4gICAgaWYgKCFvcHRpb25zW2tleU5hbWVdKSB7XG4gICAgICB0aHJvdyBnZXRNaXNzaW5nVmFsdWVFcnJvcihrZXlOYW1lKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBhcHBOYW1lOiBhcHAubmFtZSxcbiAgICBwcm9qZWN0SWQ6IG9wdGlvbnMucHJvamVjdElkLFxuICAgIGFwaUtleTogb3B0aW9ucy5hcGlLZXksXG4gICAgYXBwSWQ6IG9wdGlvbnMuYXBwSWQsXG4gICAgc2VuZGVySWQ6IG9wdGlvbnMubWVzc2FnaW5nU2VuZGVySWRcbiAgfTtcbn1cbmZ1bmN0aW9uIGdldE1pc3NpbmdWYWx1ZUVycm9yKHZhbHVlTmFtZSkge1xuICByZXR1cm4gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJtaXNzaW5nLWFwcC1jb25maWctdmFsdWVzXCIgLyogRXJyb3JDb2RlLk1JU1NJTkdfQVBQX0NPTkZJR19WQUxVRVMgKi8sIHtcbiAgICB2YWx1ZU5hbWVcbiAgfSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBNZXNzYWdpbmdTZXJ2aWNlIHtcbiAgY29uc3RydWN0b3IoYXBwLCBpbnN0YWxsYXRpb25zLCBhbmFseXRpY3NQcm92aWRlcikge1xuICAgIC8vIGxvZ2dpbmcgaXMgb25seSBkb25lIHdpdGggZW5kIHVzZXIgY29uc2VudC4gRGVmYXVsdCB0byBmYWxzZS5cbiAgICB0aGlzLmRlbGl2ZXJ5TWV0cmljc0V4cG9ydGVkVG9CaWdRdWVyeUVuYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLm9uQmFja2dyb3VuZE1lc3NhZ2VIYW5kbGVyID0gbnVsbDtcbiAgICB0aGlzLm9uTWVzc2FnZUhhbmRsZXIgPSBudWxsO1xuICAgIHRoaXMubG9nRXZlbnRzID0gW107XG4gICAgdGhpcy5pc0xvZ1NlcnZpY2VTdGFydGVkID0gZmFsc2U7XG4gICAgY29uc3QgYXBwQ29uZmlnID0gZXh0cmFjdEFwcENvbmZpZyhhcHApO1xuICAgIHRoaXMuZmlyZWJhc2VEZXBlbmRlbmNpZXMgPSB7XG4gICAgICBhcHAsXG4gICAgICBhcHBDb25maWcsXG4gICAgICBpbnN0YWxsYXRpb25zLFxuICAgICAgYW5hbHl0aWNzUHJvdmlkZXJcbiAgICB9O1xuICB9XG4gIF9kZWxldGUoKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5hc3luYyBmdW5jdGlvbiByZWdpc3RlckRlZmF1bHRTdyhtZXNzYWdpbmcpIHtcbiAgdHJ5IHtcbiAgICBtZXNzYWdpbmcuc3dSZWdpc3RyYXRpb24gPSBhd2FpdCBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcihERUZBVUxUX1NXX1BBVEgsIHtcbiAgICAgIHNjb3BlOiBERUZBVUxUX1NXX1NDT1BFXG4gICAgfSk7XG4gICAgLy8gVGhlIHRpbWluZyB3aGVuIGJyb3dzZXIgdXBkYXRlcyBzdyB3aGVuIHN3IGhhcyBhbiB1cGRhdGUgaXMgdW5yZWxpYWJsZSBmcm9tIGV4cGVyaW1lbnQuIEl0XG4gICAgLy8gbGVhZHMgdG8gdmVyc2lvbiBjb25mbGljdCB3aGVuIHRoZSBTREsgdXBncmFkZXMgdG8gYSBuZXdlciB2ZXJzaW9uIGluIHRoZSBtYWluIHBhZ2UsIGJ1dCBzd1xuICAgIC8vIGlzIHN0dWNrIHdpdGggdGhlIG9sZCB2ZXJzaW9uLiBGb3IgZXhhbXBsZSxcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2lzc3Vlcy8yNTkwIFRoZSBmb2xsb3dpbmcgbGluZSByZWxpYWJseSB1cGRhdGVzXG4gICAgLy8gc3cgaWYgdGhlcmUgd2FzIGFuIHVwZGF0ZS5cbiAgICBtZXNzYWdpbmcuc3dSZWdpc3RyYXRpb24udXBkYXRlKCkuY2F0Y2goKCkgPT4ge1xuICAgICAgLyogaXQgaXMgbm9uIGJsb2NraW5nIGFuZCB3ZSBkb24ndCBjYXJlIGlmIGl0IGZhaWxlZCAqL1xuICAgIH0pO1xuICAgIGF3YWl0IHdhaXRGb3JSZWdpc3RyYXRpb25BY3RpdmUobWVzc2FnaW5nLnN3UmVnaXN0cmF0aW9uKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZmFpbGVkLXNlcnZpY2Utd29ya2VyLXJlZ2lzdHJhdGlvblwiIC8qIEVycm9yQ29kZS5GQUlMRURfREVGQVVMVF9SRUdJU1RSQVRJT04gKi8sIHtcbiAgICAgIGJyb3dzZXJFcnJvck1lc3NhZ2U6IGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5tZXNzYWdlXG4gICAgfSk7XG4gIH1cbn1cbi8qKlxuICogV2FpdHMgZm9yIHJlZ2lzdHJhdGlvbiB0byBiZWNvbWUgYWN0aXZlLiBNRE4gZG9jdW1lbnRhdGlvbiBjbGFpbXMgdGhhdFxuICogYSBzZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gc2hvdWxkIGJlIHJlYWR5IHRvIHVzZSBhZnRlciBhd2FpdGluZ1xuICogbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoKSBidXQgdGhhdCBkb2Vzbid0IHNlZW0gdG8gYmUgdGhlIGNhc2UgaW5cbiAqIHByYWN0aWNlLCBjYXVzaW5nIHRoZSBTREsgdG8gdGhyb3cgZXJyb3JzIHdoZW4gY2FsbGluZ1xuICogc3dSZWdpc3RyYXRpb24ucHVzaE1hbmFnZXIuc3Vic2NyaWJlKCkgdG9vIHNvb24gYWZ0ZXIgcmVnaXN0ZXIoKS4gVGhlIG9ubHlcbiAqIHNvbHV0aW9uIHNlZW1zIHRvIGJlIHdhaXRpbmcgZm9yIHRoZSBzZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gYHN0YXRlYFxuICogdG8gYmVjb21lIFwiYWN0aXZlXCIuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHdhaXRGb3JSZWdpc3RyYXRpb25BY3RpdmUocmVnaXN0cmF0aW9uKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgcmVqZWN0VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gcmVqZWN0KG5ldyBFcnJvcihgU2VydmljZSB3b3JrZXIgbm90IHJlZ2lzdGVyZWQgYWZ0ZXIgJHtERUZBVUxUX1JFR0lTVFJBVElPTl9USU1FT1VUfSBtc2ApKSwgREVGQVVMVF9SRUdJU1RSQVRJT05fVElNRU9VVCk7XG4gICAgY29uc3QgaW5jb21pbmdTdyA9IHJlZ2lzdHJhdGlvbi5pbnN0YWxsaW5nIHx8IHJlZ2lzdHJhdGlvbi53YWl0aW5nO1xuICAgIGlmIChyZWdpc3RyYXRpb24uYWN0aXZlKSB7XG4gICAgICBjbGVhclRpbWVvdXQocmVqZWN0VGltZW91dCk7XG4gICAgICByZXNvbHZlKCk7XG4gICAgfSBlbHNlIGlmIChpbmNvbWluZ1N3KSB7XG4gICAgICBpbmNvbWluZ1N3Lm9uc3RhdGVjaGFuZ2UgPSBldiA9PiB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKCgoX2EgPSBldi50YXJnZXQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zdGF0ZSkgPT09ICdhY3RpdmF0ZWQnKSB7XG4gICAgICAgICAgaW5jb21pbmdTdy5vbnN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICBjbGVhclRpbWVvdXQocmVqZWN0VGltZW91dCk7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBjbGVhclRpbWVvdXQocmVqZWN0VGltZW91dCk7XG4gICAgICByZWplY3QobmV3IEVycm9yKCdObyBpbmNvbWluZyBzZXJ2aWNlIHdvcmtlciBmb3VuZC4nKSk7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVN3UmVnKG1lc3NhZ2luZywgc3dSZWdpc3RyYXRpb24pIHtcbiAgaWYgKCFzd1JlZ2lzdHJhdGlvbiAmJiAhbWVzc2FnaW5nLnN3UmVnaXN0cmF0aW9uKSB7XG4gICAgYXdhaXQgcmVnaXN0ZXJEZWZhdWx0U3cobWVzc2FnaW5nKTtcbiAgfVxuICBpZiAoIXN3UmVnaXN0cmF0aW9uICYmICEhbWVzc2FnaW5nLnN3UmVnaXN0cmF0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICghKHN3UmVnaXN0cmF0aW9uIGluc3RhbmNlb2YgU2VydmljZVdvcmtlclJlZ2lzdHJhdGlvbikpIHtcbiAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludmFsaWQtc3ctcmVnaXN0cmF0aW9uXCIgLyogRXJyb3JDb2RlLklOVkFMSURfU1dfUkVHSVNUUkFUSU9OICovKTtcbiAgfVxuICBtZXNzYWdpbmcuc3dSZWdpc3RyYXRpb24gPSBzd1JlZ2lzdHJhdGlvbjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVZhcGlkS2V5KG1lc3NhZ2luZywgdmFwaWRLZXkpIHtcbiAgaWYgKCEhdmFwaWRLZXkpIHtcbiAgICBtZXNzYWdpbmcudmFwaWRLZXkgPSB2YXBpZEtleTtcbiAgfSBlbHNlIGlmICghbWVzc2FnaW5nLnZhcGlkS2V5KSB7XG4gICAgbWVzc2FnaW5nLnZhcGlkS2V5ID0gREVGQVVMVF9WQVBJRF9LRVk7XG4gIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldFRva2VuJDEobWVzc2FnaW5nLCBvcHRpb25zKSB7XG4gIGlmICghbmF2aWdhdG9yKSB7XG4gICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJvbmx5LWF2YWlsYWJsZS1pbi13aW5kb3dcIiAvKiBFcnJvckNvZGUuQVZBSUxBQkxFX0lOX1dJTkRPVyAqLyk7XG4gIH1cbiAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uID09PSAnZGVmYXVsdCcpIHtcbiAgICBhd2FpdCBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oKTtcbiAgfVxuICBpZiAoTm90aWZpY2F0aW9uLnBlcm1pc3Npb24gIT09ICdncmFudGVkJykge1xuICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwicGVybWlzc2lvbi1ibG9ja2VkXCIgLyogRXJyb3JDb2RlLlBFUk1JU1NJT05fQkxPQ0tFRCAqLyk7XG4gIH1cbiAgYXdhaXQgdXBkYXRlVmFwaWRLZXkobWVzc2FnaW5nLCBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMudmFwaWRLZXkpO1xuICBhd2FpdCB1cGRhdGVTd1JlZyhtZXNzYWdpbmcsIG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5zZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uKTtcbiAgcmV0dXJuIGdldFRva2VuSW50ZXJuYWwobWVzc2FnaW5nKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGxvZ1RvU2Npb24obWVzc2FnaW5nLCBtZXNzYWdlVHlwZSwgZGF0YSkge1xuICBjb25zdCBldmVudFR5cGUgPSBnZXRFdmVudFR5cGUobWVzc2FnZVR5cGUpO1xuICBjb25zdCBhbmFseXRpY3MgPSBhd2FpdCBtZXNzYWdpbmcuZmlyZWJhc2VEZXBlbmRlbmNpZXMuYW5hbHl0aWNzUHJvdmlkZXIuZ2V0KCk7XG4gIGFuYWx5dGljcy5sb2dFdmVudChldmVudFR5cGUsIHtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbiAgICBtZXNzYWdlX2lkOiBkYXRhW0NPTlNPTEVfQ0FNUEFJR05fSURdLFxuICAgIG1lc3NhZ2VfbmFtZTogZGF0YVtDT05TT0xFX0NBTVBBSUdOX05BTUVdLFxuICAgIG1lc3NhZ2VfdGltZTogZGF0YVtDT05TT0xFX0NBTVBBSUdOX1RJTUVdLFxuICAgIG1lc3NhZ2VfZGV2aWNlX3RpbWU6IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApXG4gICAgLyogZXNsaW50LWVuYWJsZSBjYW1lbGNhc2UgKi9cbiAgfSk7XG59XG5mdW5jdGlvbiBnZXRFdmVudFR5cGUobWVzc2FnZVR5cGUpIHtcbiAgc3dpdGNoIChtZXNzYWdlVHlwZSkge1xuICAgIGNhc2UgTWVzc2FnZVR5cGUuTk9USUZJQ0FUSU9OX0NMSUNLRUQ6XG4gICAgICByZXR1cm4gJ25vdGlmaWNhdGlvbl9vcGVuJztcbiAgICBjYXNlIE1lc3NhZ2VUeXBlLlBVU0hfUkVDRUlWRUQ6XG4gICAgICByZXR1cm4gJ25vdGlmaWNhdGlvbl9mb3JlZ3JvdW5kJztcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIG1lc3NhZ2VFdmVudExpc3RlbmVyKG1lc3NhZ2luZywgZXZlbnQpIHtcbiAgY29uc3QgaW50ZXJuYWxQYXlsb2FkID0gZXZlbnQuZGF0YTtcbiAgaWYgKCFpbnRlcm5hbFBheWxvYWQuaXNGaXJlYmFzZU1lc3NhZ2luZykge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAobWVzc2FnaW5nLm9uTWVzc2FnZUhhbmRsZXIgJiYgaW50ZXJuYWxQYXlsb2FkLm1lc3NhZ2VUeXBlID09PSBNZXNzYWdlVHlwZS5QVVNIX1JFQ0VJVkVEKSB7XG4gICAgaWYgKHR5cGVvZiBtZXNzYWdpbmcub25NZXNzYWdlSGFuZGxlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgbWVzc2FnaW5nLm9uTWVzc2FnZUhhbmRsZXIoZXh0ZXJuYWxpemVQYXlsb2FkKGludGVybmFsUGF5bG9hZCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBtZXNzYWdpbmcub25NZXNzYWdlSGFuZGxlci5uZXh0KGV4dGVybmFsaXplUGF5bG9hZChpbnRlcm5hbFBheWxvYWQpKTtcbiAgICB9XG4gIH1cbiAgLy8gTG9nIHRvIFNjaW9uIGlmIGFwcGxpY2FibGVcbiAgY29uc3QgZGF0YVBheWxvYWQgPSBpbnRlcm5hbFBheWxvYWQuZGF0YTtcbiAgaWYgKGlzQ29uc29sZU1lc3NhZ2UoZGF0YVBheWxvYWQpICYmIGRhdGFQYXlsb2FkW0NPTlNPTEVfQ0FNUEFJR05fQU5BTFlUSUNTX0VOQUJMRURdID09PSAnMScpIHtcbiAgICBhd2FpdCBsb2dUb1NjaW9uKG1lc3NhZ2luZywgaW50ZXJuYWxQYXlsb2FkLm1lc3NhZ2VUeXBlLCBkYXRhUGF5bG9hZCk7XG4gIH1cbn1cbmNvbnN0IG5hbWUgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmdcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjAuMTIuMTdcIjtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IFdpbmRvd01lc3NhZ2luZ0ZhY3RvcnkgPSBjb250YWluZXIgPT4ge1xuICBjb25zdCBtZXNzYWdpbmcgPSBuZXcgTWVzc2FnaW5nU2VydmljZShjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpLCBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2luc3RhbGxhdGlvbnMtaW50ZXJuYWwnKS5nZXRJbW1lZGlhdGUoKSwgY29udGFpbmVyLmdldFByb3ZpZGVyKCdhbmFseXRpY3MtaW50ZXJuYWwnKSk7XG4gIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBlID0+IG1lc3NhZ2VFdmVudExpc3RlbmVyKG1lc3NhZ2luZywgZSkpO1xuICByZXR1cm4gbWVzc2FnaW5nO1xufTtcbmNvbnN0IFdpbmRvd01lc3NhZ2luZ0ludGVybmFsRmFjdG9yeSA9IGNvbnRhaW5lciA9PiB7XG4gIGNvbnN0IG1lc3NhZ2luZyA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignbWVzc2FnaW5nJykuZ2V0SW1tZWRpYXRlKCk7XG4gIGNvbnN0IG1lc3NhZ2luZ0ludGVybmFsID0ge1xuICAgIGdldFRva2VuOiBvcHRpb25zID0+IGdldFRva2VuJDEobWVzc2FnaW5nLCBvcHRpb25zKVxuICB9O1xuICByZXR1cm4gbWVzc2FnaW5nSW50ZXJuYWw7XG59O1xuZnVuY3Rpb24gcmVnaXN0ZXJNZXNzYWdpbmdJbldpbmRvdygpIHtcbiAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ21lc3NhZ2luZycsIFdpbmRvd01lc3NhZ2luZ0ZhY3RvcnksIFwiUFVCTElDXCIgLyogQ29tcG9uZW50VHlwZS5QVUJMSUMgKi8pKTtcbiAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ21lc3NhZ2luZy1pbnRlcm5hbCcsIFdpbmRvd01lc3NhZ2luZ0ludGVybmFsRmFjdG9yeSwgXCJQUklWQVRFXCIgLyogQ29tcG9uZW50VHlwZS5QUklWQVRFICovKSk7XG4gIHJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uKTtcbiAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtMjAxNywgY2pzMjAxNywgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cbiAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sICdlc20yMDE3Jyk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENoZWNrcyBpZiBhbGwgcmVxdWlyZWQgQVBJcyBleGlzdCBpbiB0aGUgYnJvd3Nlci5cbiAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgYm9vbGVhbi5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGlzV2luZG93U3VwcG9ydGVkKCkge1xuICB0cnkge1xuICAgIC8vIFRoaXMgdGhyb3dzIGlmIG9wZW4oKSBpcyB1bnN1cHBvcnRlZCwgc28gYWRkaW5nIGl0IHRvIHRoZSBjb25kaXRpb25hbFxuICAgIC8vIHN0YXRlbWVudCBiZWxvdyBjYW4gY2F1c2UgYW4gdW5jYXVnaHQgZXJyb3IuXG4gICAgYXdhaXQgdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSgpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIGZpcmViYXNlLWpzLXNkay9pc3N1ZXMvMjM5MyByZXZlYWxzIHRoYXQgaWRiI29wZW4gaW4gU2FmYXJpIGlmcmFtZSBhbmQgRmlyZWZveCBwcml2YXRlIGJyb3dzaW5nXG4gIC8vIG1pZ2h0IGJlIHByb2hpYml0ZWQgdG8gcnVuLiBJbiB0aGVzZSBjb250ZXh0cywgYW4gZXJyb3Igd291bGQgYmUgdGhyb3duIGR1cmluZyB0aGUgbWVzc2FnaW5nXG4gIC8vIGluc3RhbnRpYXRpbmcgcGhhc2UsIGluZm9ybWluZyB0aGUgZGV2ZWxvcGVycyB0byBpbXBvcnQvY2FsbCBpc1N1cHBvcnRlZCBmb3Igc3BlY2lhbCBoYW5kbGluZy5cbiAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIGlzSW5kZXhlZERCQXZhaWxhYmxlKCkgJiYgYXJlQ29va2llc0VuYWJsZWQoKSAmJiAnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yICYmICdQdXNoTWFuYWdlcicgaW4gd2luZG93ICYmICdOb3RpZmljYXRpb24nIGluIHdpbmRvdyAmJiAnZmV0Y2gnIGluIHdpbmRvdyAmJiBTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSgnc2hvd05vdGlmaWNhdGlvbicpICYmIFB1c2hTdWJzY3JpcHRpb24ucHJvdG90eXBlLmhhc093blByb3BlcnR5KCdnZXRLZXknKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVRva2VuJDEobWVzc2FnaW5nKSB7XG4gIGlmICghbmF2aWdhdG9yKSB7XG4gICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJvbmx5LWF2YWlsYWJsZS1pbi13aW5kb3dcIiAvKiBFcnJvckNvZGUuQVZBSUxBQkxFX0lOX1dJTkRPVyAqLyk7XG4gIH1cbiAgaWYgKCFtZXNzYWdpbmcuc3dSZWdpc3RyYXRpb24pIHtcbiAgICBhd2FpdCByZWdpc3RlckRlZmF1bHRTdyhtZXNzYWdpbmcpO1xuICB9XG4gIHJldHVybiBkZWxldGVUb2tlbkludGVybmFsKG1lc3NhZ2luZyk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBvbk1lc3NhZ2UkMShtZXNzYWdpbmcsIG5leHRPck9ic2VydmVyKSB7XG4gIGlmICghbmF2aWdhdG9yKSB7XG4gICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJvbmx5LWF2YWlsYWJsZS1pbi13aW5kb3dcIiAvKiBFcnJvckNvZGUuQVZBSUxBQkxFX0lOX1dJTkRPVyAqLyk7XG4gIH1cbiAgbWVzc2FnaW5nLm9uTWVzc2FnZUhhbmRsZXIgPSBuZXh0T3JPYnNlcnZlcjtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBtZXNzYWdpbmcub25NZXNzYWdlSGFuZGxlciA9IG51bGw7XG4gIH07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJldHJpZXZlcyBhIEZpcmViYXNlIENsb3VkIE1lc3NhZ2luZyBpbnN0YW5jZS5cbiAqXG4gKiBAcmV0dXJucyBUaGUgRmlyZWJhc2UgQ2xvdWQgTWVzc2FnaW5nIGluc3RhbmNlIGFzc29jaWF0ZWQgd2l0aCB0aGUgcHJvdmlkZWQgZmlyZWJhc2UgYXBwLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gZ2V0TWVzc2FnaW5nSW5XaW5kb3coYXBwID0gZ2V0QXBwKCkpIHtcbiAgLy8gQ29uc2Npb3VzIGRlY2lzaW9uIHRvIG1ha2UgdGhpcyBhc3luYyBjaGVjayBub24tYmxvY2tpbmcgZHVyaW5nIHRoZSBtZXNzYWdpbmcgaW5zdGFuY2VcbiAgLy8gaW5pdGlhbGl6YXRpb24gcGhhc2UgZm9yIHBlcmZvcm1hbmNlIGNvbnNpZGVyYXRpb24uIEFuIGVycm9yIHdvdWxkIGJlIHRocm93biBsYXR0ZXIgZm9yXG4gIC8vIGRldmVsb3BlcidzIGluZm9ybWF0aW9uLiBEZXZlbG9wZXJzIGNhbiB0aGVuIGNob29zZSB0byBpbXBvcnQgYW5kIGNhbGwgYGlzU3VwcG9ydGVkYCBmb3JcbiAgLy8gc3BlY2lhbCBoYW5kbGluZy5cbiAgaXNXaW5kb3dTdXBwb3J0ZWQoKS50aGVuKGlzU3VwcG9ydGVkID0+IHtcbiAgICAvLyBJZiBgaXNXaW5kb3dTdXBwb3J0ZWQoKWAgcmVzb2x2ZWQsIGJ1dCByZXR1cm5lZCBmYWxzZS5cbiAgICBpZiAoIWlzU3VwcG9ydGVkKSB7XG4gICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcInVuc3VwcG9ydGVkLWJyb3dzZXJcIiAvKiBFcnJvckNvZGUuVU5TVVBQT1JURURfQlJPV1NFUiAqLyk7XG4gICAgfVxuICB9LCBfID0+IHtcbiAgICAvLyBJZiBgaXNXaW5kb3dTdXBwb3J0ZWQoKWAgcmVqZWN0ZWQuXG4gICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbmRleGVkLWRiLXVuc3VwcG9ydGVkXCIgLyogRXJyb3JDb2RlLklOREVYRURfREJfVU5TVVBQT1JURUQgKi8pO1xuICB9KTtcbiAgcmV0dXJuIF9nZXRQcm92aWRlcihnZXRNb2R1bGFySW5zdGFuY2UoYXBwKSwgJ21lc3NhZ2luZycpLmdldEltbWVkaWF0ZSgpO1xufVxuLyoqXG4gKiBTdWJzY3JpYmVzIHRoZSB7QGxpbmsgTWVzc2FnaW5nfSBpbnN0YW5jZSB0byBwdXNoIG5vdGlmaWNhdGlvbnMuIFJldHVybnMgYSBGaXJlYmFzZSBDbG91ZFxuICogTWVzc2FnaW5nIHJlZ2lzdHJhdGlvbiB0b2tlbiB0aGF0IGNhbiBiZSB1c2VkIHRvIHNlbmQgcHVzaCBtZXNzYWdlcyB0byB0aGF0IHtAbGluayBNZXNzYWdpbmd9XG4gKiBpbnN0YW5jZS5cbiAqXG4gKiBJZiBub3RpZmljYXRpb24gcGVybWlzc2lvbiBpc24ndCBhbHJlYWR5IGdyYW50ZWQsIHRoaXMgbWV0aG9kIGFza3MgdGhlIHVzZXIgZm9yIHBlcm1pc3Npb24uIFRoZVxuICogcmV0dXJuZWQgcHJvbWlzZSByZWplY3RzIGlmIHRoZSB1c2VyIGRvZXMgbm90IGFsbG93IHRoZSBhcHAgdG8gc2hvdyBub3RpZmljYXRpb25zLlxuICpcbiAqIEBwYXJhbSBtZXNzYWdpbmcgLSBUaGUge0BsaW5rIE1lc3NhZ2luZ30gaW5zdGFuY2UuXG4gKiBAcGFyYW0gb3B0aW9ucyAtIFByb3ZpZGVzIGFuIG9wdGlvbmFsIHZhcGlkIGtleSBhbmQgYW4gb3B0aW9uYWwgc2VydmljZSB3b3JrZXIgcmVnaXN0cmF0aW9uLlxuICpcbiAqIEByZXR1cm5zIFRoZSBwcm9taXNlIHJlc29sdmVzIHdpdGggYW4gRkNNIHJlZ2lzdHJhdGlvbiB0b2tlbi5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldFRva2VuKG1lc3NhZ2luZywgb3B0aW9ucykge1xuICBtZXNzYWdpbmcgPSBnZXRNb2R1bGFySW5zdGFuY2UobWVzc2FnaW5nKTtcbiAgcmV0dXJuIGdldFRva2VuJDEobWVzc2FnaW5nLCBvcHRpb25zKTtcbn1cbi8qKlxuICogRGVsZXRlcyB0aGUgcmVnaXN0cmF0aW9uIHRva2VuIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHtAbGluayBNZXNzYWdpbmd9IGluc3RhbmNlIGFuZCB1bnN1YnNjcmliZXNcbiAqIHRoZSB7QGxpbmsgTWVzc2FnaW5nfSBpbnN0YW5jZSBmcm9tIHRoZSBwdXNoIHN1YnNjcmlwdGlvbi5cbiAqXG4gKiBAcGFyYW0gbWVzc2FnaW5nIC0gVGhlIHtAbGluayBNZXNzYWdpbmd9IGluc3RhbmNlLlxuICpcbiAqIEByZXR1cm5zIFRoZSBwcm9taXNlIHJlc29sdmVzIHdoZW4gdGhlIHRva2VuIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBkZWxldGVkLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gZGVsZXRlVG9rZW4obWVzc2FnaW5nKSB7XG4gIG1lc3NhZ2luZyA9IGdldE1vZHVsYXJJbnN0YW5jZShtZXNzYWdpbmcpO1xuICByZXR1cm4gZGVsZXRlVG9rZW4kMShtZXNzYWdpbmcpO1xufVxuLyoqXG4gKiBXaGVuIGEgcHVzaCBtZXNzYWdlIGlzIHJlY2VpdmVkIGFuZCB0aGUgdXNlciBpcyBjdXJyZW50bHkgb24gYSBwYWdlIGZvciB5b3VyIG9yaWdpbiwgdGhlXG4gKiBtZXNzYWdlIGlzIHBhc3NlZCB0byB0aGUgcGFnZSBhbmQgYW4gYG9uTWVzc2FnZSgpYCBldmVudCBpcyBkaXNwYXRjaGVkIHdpdGggdGhlIHBheWxvYWQgb2ZcbiAqIHRoZSBwdXNoIG1lc3NhZ2UuXG4gKlxuICpcbiAqIEBwYXJhbSBtZXNzYWdpbmcgLSBUaGUge0BsaW5rIE1lc3NhZ2luZ30gaW5zdGFuY2UuXG4gKiBAcGFyYW0gbmV4dE9yT2JzZXJ2ZXIgLSBUaGlzIGZ1bmN0aW9uLCBvciBvYnNlcnZlciBvYmplY3Qgd2l0aCBgbmV4dGAgZGVmaW5lZCxcbiAqICAgICBpcyBjYWxsZWQgd2hlbiBhIG1lc3NhZ2UgaXMgcmVjZWl2ZWQgYW5kIHRoZSB1c2VyIGlzIGN1cnJlbnRseSB2aWV3aW5nIHlvdXIgcGFnZS5cbiAqIEByZXR1cm5zIFRvIHN0b3AgbGlzdGVuaW5nIGZvciBtZXNzYWdlcyBleGVjdXRlIHRoaXMgcmV0dXJuZWQgZnVuY3Rpb24uXG4gKlxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBvbk1lc3NhZ2UobWVzc2FnaW5nLCBuZXh0T3JPYnNlcnZlcikge1xuICBtZXNzYWdpbmcgPSBnZXRNb2R1bGFySW5zdGFuY2UobWVzc2FnaW5nKTtcbiAgcmV0dXJuIG9uTWVzc2FnZSQxKG1lc3NhZ2luZywgbmV4dE9yT2JzZXJ2ZXIpO1xufVxuXG4vKipcbiAqIFRoZSBGaXJlYmFzZSBDbG91ZCBNZXNzYWdpbmcgV2ViIFNESy5cbiAqIFRoaXMgU0RLIGRvZXMgbm90IHdvcmsgaW4gYSBOb2RlLmpzIGVudmlyb25tZW50LlxuICpcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICovXG5yZWdpc3Rlck1lc3NhZ2luZ0luV2luZG93KCk7XG5leHBvcnQgeyBkZWxldGVUb2tlbiwgZ2V0TWVzc2FnaW5nSW5XaW5kb3cgYXMgZ2V0TWVzc2FnaW5nLCBnZXRUb2tlbiwgaXNXaW5kb3dTdXBwb3J0ZWQgYXMgaXNTdXBwb3J0ZWQsIG9uTWVzc2FnZSB9O1xuIiwiaW1wb3J0IHsgybVnZXRBbGxJbnN0YW5jZXNPZiBhcyBfZ2V0QWxsSW5zdGFuY2VzT2YsIMm1Z2V0RGVmYXVsdEluc3RhbmNlT2YgYXMgX2dldERlZmF1bHRJbnN0YW5jZU9mLCBWRVJTSU9OLCDJtUFuZ3VsYXJGaXJlU2NoZWR1bGVycyBhcyBfQW5ndWxhckZpcmVTY2hlZHVsZXJzLCDJtXpvbmVXcmFwIGFzIF96b25lV3JhcCB9IGZyb20gJ0Bhbmd1bGFyL2ZpcmUnO1xuaW1wb3J0IHsgdGltZXIsIGZyb20gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGNvbmNhdE1hcCwgZGlzdGluY3QgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBpc1BsYXRmb3JtU2VydmVyIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCAqIGFzIGkwIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSW5qZWN0aW9uVG9rZW4sIE9wdGlvbmFsLCBQTEFURk9STV9JRCwgTmdNb2R1bGUsIG1ha2VFbnZpcm9ubWVudFByb3ZpZGVycywgTmdab25lLCBJbmplY3RvciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRmlyZWJhc2VBcHAsIEZpcmViYXNlQXBwcyB9IGZyb20gJ0Bhbmd1bGFyL2ZpcmUvYXBwJztcbmltcG9ydCB7IHJlZ2lzdGVyVmVyc2lvbiB9IGZyb20gJ2ZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBkZWxldGVUb2tlbiBhcyBkZWxldGVUb2tlbiQxLCBnZXRNZXNzYWdpbmcgYXMgZ2V0TWVzc2FnaW5nJDEsIGdldFRva2VuIGFzIGdldFRva2VuJDEsIGlzU3VwcG9ydGVkIGFzIGlzU3VwcG9ydGVkJDEsIG9uTWVzc2FnZSBhcyBvbk1lc3NhZ2UkMSB9IGZyb20gJ2ZpcmViYXNlL21lc3NhZ2luZyc7XG5leHBvcnQgKiBmcm9tICdmaXJlYmFzZS9tZXNzYWdpbmcnO1xuY2xhc3MgTWVzc2FnaW5nIHtcbiAgY29uc3RydWN0b3IobWVzc2FnaW5nKSB7XG4gICAgcmV0dXJuIG1lc3NhZ2luZztcbiAgfVxufVxuY29uc3QgTUVTU0FHSU5HX1BST1ZJREVSX05BTUUgPSAnbWVzc2FnaW5nJztcbmNsYXNzIE1lc3NhZ2luZ0luc3RhbmNlcyB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHJldHVybiBfZ2V0QWxsSW5zdGFuY2VzT2YoTUVTU0FHSU5HX1BST1ZJREVSX05BTUUpO1xuICB9XG59XG5jb25zdCBtZXNzYWdpbmdJbnN0YW5jZSQgPSB0aW1lcigwLCAzMDApLnBpcGUoY29uY2F0TWFwKCgpID0+IGZyb20oX2dldEFsbEluc3RhbmNlc09mKE1FU1NBR0lOR19QUk9WSURFUl9OQU1FKSkpLCBkaXN0aW5jdCgpKTtcbmNvbnN0IFBST1ZJREVEX01FU1NBR0lOR19JTlNUQU5DRVMgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ2FuZ3VsYXJmaXJlMi5tZXNzYWdpbmctaW5zdGFuY2VzJyk7XG5mdW5jdGlvbiBkZWZhdWx0TWVzc2FnaW5nSW5zdGFuY2VGYWN0b3J5KHByb3ZpZGVkLCBkZWZhdWx0QXBwLCBwbGF0Zm9ybUlkKSB7XG4gIGlmIChpc1BsYXRmb3JtU2VydmVyKHBsYXRmb3JtSWQpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgZGVmYXVsdE1lc3NhZ2luZyA9IF9nZXREZWZhdWx0SW5zdGFuY2VPZihNRVNTQUdJTkdfUFJPVklERVJfTkFNRSwgcHJvdmlkZWQsIGRlZmF1bHRBcHApO1xuICByZXR1cm4gZGVmYXVsdE1lc3NhZ2luZyAmJiBuZXcgTWVzc2FnaW5nKGRlZmF1bHRNZXNzYWdpbmcpO1xufVxuZnVuY3Rpb24gbWVzc2FnaW5nSW5zdGFuY2VGYWN0b3J5KGZuKSB7XG4gIHJldHVybiAoem9uZSwgaW5qZWN0b3IsIHBsYXRmb3JtSWQpID0+IHtcbiAgICBpZiAoaXNQbGF0Zm9ybVNlcnZlcihwbGF0Zm9ybUlkKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IG1lc3NhZ2luZyA9IHpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gZm4oaW5qZWN0b3IpKTtcbiAgICByZXR1cm4gbmV3IE1lc3NhZ2luZyhtZXNzYWdpbmcpO1xuICB9O1xufVxuY29uc3QgTUVTU0FHSU5HX0lOU1RBTkNFU19QUk9WSURFUiA9IHtcbiAgcHJvdmlkZTogTWVzc2FnaW5nSW5zdGFuY2VzLFxuICBkZXBzOiBbW25ldyBPcHRpb25hbCgpLCBQUk9WSURFRF9NRVNTQUdJTkdfSU5TVEFOQ0VTXV1cbn07XG5jb25zdCBERUZBVUxUX01FU1NBR0lOR19JTlNUQU5DRV9QUk9WSURFUiA9IHtcbiAgcHJvdmlkZTogTWVzc2FnaW5nLFxuICB1c2VGYWN0b3J5OiBkZWZhdWx0TWVzc2FnaW5nSW5zdGFuY2VGYWN0b3J5LFxuICBkZXBzOiBbW25ldyBPcHRpb25hbCgpLCBQUk9WSURFRF9NRVNTQUdJTkdfSU5TVEFOQ0VTXSwgRmlyZWJhc2VBcHAsIFBMQVRGT1JNX0lEXVxufTtcbmNsYXNzIE1lc3NhZ2luZ01vZHVsZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHJlZ2lzdGVyVmVyc2lvbignYW5ndWxhcmZpcmUnLCBWRVJTSU9OLmZ1bGwsICdmY20nKTtcbiAgfVxuICBzdGF0aWMgybVmYWMgPSBmdW5jdGlvbiBNZXNzYWdpbmdNb2R1bGVfRmFjdG9yeShfX25nRmFjdG9yeVR5cGVfXykge1xuICAgIHJldHVybiBuZXcgKF9fbmdGYWN0b3J5VHlwZV9fIHx8IE1lc3NhZ2luZ01vZHVsZSkoKTtcbiAgfTtcbiAgc3RhdGljIMm1bW9kID0gLyogQF9fUFVSRV9fICovaTAuybXJtWRlZmluZU5nTW9kdWxlKHtcbiAgICB0eXBlOiBNZXNzYWdpbmdNb2R1bGVcbiAgfSk7XG4gIHN0YXRpYyDJtWluaiA9IC8qIEBfX1BVUkVfXyAqL2kwLsm1ybVkZWZpbmVJbmplY3Rvcih7XG4gICAgcHJvdmlkZXJzOiBbREVGQVVMVF9NRVNTQUdJTkdfSU5TVEFOQ0VfUFJPVklERVIsIE1FU1NBR0lOR19JTlNUQU5DRVNfUFJPVklERVJdXG4gIH0pO1xufVxuKCgpID0+IHtcbiAgKHR5cGVvZiBuZ0Rldk1vZGUgPT09IFwidW5kZWZpbmVkXCIgfHwgbmdEZXZNb2RlKSAmJiBpMC7JtXNldENsYXNzTWV0YWRhdGEoTWVzc2FnaW5nTW9kdWxlLCBbe1xuICAgIHR5cGU6IE5nTW9kdWxlLFxuICAgIGFyZ3M6IFt7XG4gICAgICBwcm92aWRlcnM6IFtERUZBVUxUX01FU1NBR0lOR19JTlNUQU5DRV9QUk9WSURFUiwgTUVTU0FHSU5HX0lOU1RBTkNFU19QUk9WSURFUl1cbiAgICB9XVxuICB9XSwgKCkgPT4gW10sIG51bGwpO1xufSkoKTtcbmZ1bmN0aW9uIHByb3ZpZGVNZXNzYWdpbmcoZm4sIC4uLmRlcHMpIHtcbiAgcmVnaXN0ZXJWZXJzaW9uKCdhbmd1bGFyZmlyZScsIFZFUlNJT04uZnVsbCwgJ2ZjbScpO1xuICByZXR1cm4gbWFrZUVudmlyb25tZW50UHJvdmlkZXJzKFtERUZBVUxUX01FU1NBR0lOR19JTlNUQU5DRV9QUk9WSURFUiwgTUVTU0FHSU5HX0lOU1RBTkNFU19QUk9WSURFUiwge1xuICAgIHByb3ZpZGU6IFBST1ZJREVEX01FU1NBR0lOR19JTlNUQU5DRVMsXG4gICAgdXNlRmFjdG9yeTogbWVzc2FnaW5nSW5zdGFuY2VGYWN0b3J5KGZuKSxcbiAgICBtdWx0aTogdHJ1ZSxcbiAgICBkZXBzOiBbTmdab25lLCBJbmplY3RvciwgUExBVEZPUk1fSUQsIF9Bbmd1bGFyRmlyZVNjaGVkdWxlcnMsIEZpcmViYXNlQXBwcywgLi4uZGVwc11cbiAgfV0pO1xufVxuXG4vLyBETyBOT1QgTU9ESUZZLCB0aGlzIGZpbGUgaXMgYXV0b2dlbmVyYXRlZCBieSB0b29scy9idWlsZC50c1xuY29uc3QgZGVsZXRlVG9rZW4gPSBfem9uZVdyYXAoZGVsZXRlVG9rZW4kMSwgdHJ1ZSwgMik7XG5jb25zdCBnZXRNZXNzYWdpbmcgPSBfem9uZVdyYXAoZ2V0TWVzc2FnaW5nJDEsIHRydWUpO1xuY29uc3QgZ2V0VG9rZW4gPSBfem9uZVdyYXAoZ2V0VG9rZW4kMSwgdHJ1ZSk7XG5jb25zdCBpc1N1cHBvcnRlZCA9IF96b25lV3JhcChpc1N1cHBvcnRlZCQxLCBmYWxzZSk7XG5jb25zdCBvbk1lc3NhZ2UgPSBfem9uZVdyYXAob25NZXNzYWdlJDEsIGZhbHNlKTtcblxuLyoqXG4gKiBHZW5lcmF0ZWQgYnVuZGxlIGluZGV4LiBEbyBub3QgZWRpdC5cbiAqL1xuXG5leHBvcnQgeyBNZXNzYWdpbmcsIE1lc3NhZ2luZ0luc3RhbmNlcywgTWVzc2FnaW5nTW9kdWxlLCBkZWxldGVUb2tlbiwgZ2V0TWVzc2FnaW5nLCBnZXRUb2tlbiwgaXNTdXBwb3J0ZWQsIG1lc3NhZ2luZ0luc3RhbmNlJCwgb25NZXNzYWdlLCBwcm92aWRlTWVzc2FnaW5nIH07XG4iLCJpbXBvcnQgeyDJtWdldEFsbEluc3RhbmNlc09mIGFzIF9nZXRBbGxJbnN0YW5jZXNPZiwgybV6b25lV3JhcCBhcyBfem9uZVdyYXAsIFZFUlNJT04sIMm1Z2V0RGVmYXVsdEluc3RhbmNlT2YgYXMgX2dldERlZmF1bHRJbnN0YW5jZU9mLCDJtUFuZ3VsYXJGaXJlU2NoZWR1bGVycyBhcyBfQW5ndWxhckZpcmVTY2hlZHVsZXJzIH0gZnJvbSAnQGFuZ3VsYXIvZmlyZSc7XG5pbXBvcnQgeyB0aW1lciwgZnJvbSwgb2YgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGNvbmNhdE1hcCwgZGlzdGluY3QsIGZpbHRlciwgc3dpdGNoTWFwLCBtYXAsIGdyb3VwQnksIG1lcmdlTWFwLCBkaXN0aW5jdFVudGlsQ2hhbmdlZCwgc3RhcnRXaXRoLCBwYWlyd2lzZSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IGlzUGxhdGZvcm1Ccm93c2VyIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCAqIGFzIGkwIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSW5qZWN0YWJsZSwgT3B0aW9uYWwsIEluamVjdGlvblRva2VuLCBQTEFURk9STV9JRCwgTmdNb2R1bGUsIG1ha2VFbnZpcm9ubWVudFByb3ZpZGVycywgTmdab25lLCBJbmplY3RvciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRmlyZWJhc2VBcHAsIEZpcmViYXNlQXBwcyB9IGZyb20gJ0Bhbmd1bGFyL2ZpcmUvYXBwJztcbmltcG9ydCB7IHJlZ2lzdGVyVmVyc2lvbiB9IGZyb20gJ2ZpcmViYXNlL2FwcCc7XG5pbXBvcnQgKiBhcyBpMiBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyJztcbmltcG9ydCAqIGFzIGkxJDEgZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IEFjdGl2YXRpb25FbmQsIMm1RW1wdHlPdXRsZXRDb21wb25lbnQgYXMgX0VtcHR5T3V0bGV0Q29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IGdldEFuYWx5dGljcyBhcyBnZXRBbmFseXRpY3MkMSwgZ2V0R29vZ2xlQW5hbHl0aWNzQ2xpZW50SWQgYXMgZ2V0R29vZ2xlQW5hbHl0aWNzQ2xpZW50SWQkMSwgaW5pdGlhbGl6ZUFuYWx5dGljcyBhcyBpbml0aWFsaXplQW5hbHl0aWNzJDEsIGlzU3VwcG9ydGVkIGFzIGlzU3VwcG9ydGVkJDEsIGxvZ0V2ZW50IGFzIGxvZ0V2ZW50JDEsIHNldEFuYWx5dGljc0NvbGxlY3Rpb25FbmFibGVkIGFzIHNldEFuYWx5dGljc0NvbGxlY3Rpb25FbmFibGVkJDEsIHNldENvbnNlbnQgYXMgc2V0Q29uc2VudCQxLCBzZXRDdXJyZW50U2NyZWVuIGFzIHNldEN1cnJlbnRTY3JlZW4kMSwgc2V0RGVmYXVsdEV2ZW50UGFyYW1ldGVycyBhcyBzZXREZWZhdWx0RXZlbnRQYXJhbWV0ZXJzJDEsIHNldFVzZXJJZCBhcyBzZXRVc2VySWQkMSwgc2V0VXNlclByb3BlcnRpZXMgYXMgc2V0VXNlclByb3BlcnRpZXMkMSwgc2V0dGluZ3MgYXMgc2V0dGluZ3MkMSB9IGZyb20gJ2ZpcmViYXNlL2FuYWx5dGljcyc7XG5leHBvcnQgKiBmcm9tICdmaXJlYmFzZS9hbmFseXRpY3MnO1xuaW1wb3J0ICogYXMgaTEgZnJvbSAnQGFuZ3VsYXIvZmlyZS9hdXRoJztcbmltcG9ydCB7IGF1dGhTdGF0ZSB9IGZyb20gJ0Bhbmd1bGFyL2ZpcmUvYXV0aCc7XG5jbGFzcyBBbmFseXRpY3Mge1xuICBjb25zdHJ1Y3RvcihhbmFseXRpY3MpIHtcbiAgICByZXR1cm4gYW5hbHl0aWNzO1xuICB9XG59XG5jb25zdCBBTkFMWVRJQ1NfUFJPVklERVJfTkFNRSA9ICdhbmFseXRpY3MnO1xuY2xhc3MgQW5hbHl0aWNzSW5zdGFuY2VzIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgcmV0dXJuIF9nZXRBbGxJbnN0YW5jZXNPZihBTkFMWVRJQ1NfUFJPVklERVJfTkFNRSk7XG4gIH1cbn1cbmNvbnN0IGFuYWx5dGljSW5zdGFuY2UkID0gdGltZXIoMCwgMzAwKS5waXBlKGNvbmNhdE1hcCgoKSA9PiBmcm9tKF9nZXRBbGxJbnN0YW5jZXNPZihBTkFMWVRJQ1NfUFJPVklERVJfTkFNRSkpKSwgZGlzdGluY3QoKSk7XG5cbi8vIERPIE5PVCBNT0RJRlksIHRoaXMgZmlsZSBpcyBhdXRvZ2VuZXJhdGVkIGJ5IHRvb2xzL2J1aWxkLnRzXG5jb25zdCBnZXRBbmFseXRpY3MgPSBfem9uZVdyYXAoZ2V0QW5hbHl0aWNzJDEsIHRydWUpO1xuY29uc3QgZ2V0R29vZ2xlQW5hbHl0aWNzQ2xpZW50SWQgPSBfem9uZVdyYXAoZ2V0R29vZ2xlQW5hbHl0aWNzQ2xpZW50SWQkMSwgdHJ1ZSk7XG5jb25zdCBpbml0aWFsaXplQW5hbHl0aWNzID0gX3pvbmVXcmFwKGluaXRpYWxpemVBbmFseXRpY3MkMSwgdHJ1ZSk7XG5jb25zdCBpc1N1cHBvcnRlZCA9IF96b25lV3JhcChpc1N1cHBvcnRlZCQxLCBmYWxzZSk7XG5jb25zdCBsb2dFdmVudCA9IF96b25lV3JhcChsb2dFdmVudCQxLCBmYWxzZSwgMik7XG5jb25zdCBzZXRBbmFseXRpY3NDb2xsZWN0aW9uRW5hYmxlZCA9IF96b25lV3JhcChzZXRBbmFseXRpY3NDb2xsZWN0aW9uRW5hYmxlZCQxLCB0cnVlLCAyKTtcbmNvbnN0IHNldENvbnNlbnQgPSBfem9uZVdyYXAoc2V0Q29uc2VudCQxLCB0cnVlLCAyKTtcbmNvbnN0IHNldEN1cnJlbnRTY3JlZW4gPSBfem9uZVdyYXAoc2V0Q3VycmVudFNjcmVlbiQxLCB0cnVlLCAyKTtcbmNvbnN0IHNldERlZmF1bHRFdmVudFBhcmFtZXRlcnMgPSBfem9uZVdyYXAoc2V0RGVmYXVsdEV2ZW50UGFyYW1ldGVycyQxLCB0cnVlLCAyKTtcbmNvbnN0IHNldFVzZXJJZCA9IF96b25lV3JhcChzZXRVc2VySWQkMSwgdHJ1ZSwgMik7XG5jb25zdCBzZXRVc2VyUHJvcGVydGllcyA9IF96b25lV3JhcChzZXRVc2VyUHJvcGVydGllcyQxLCB0cnVlLCAyKTtcbmNvbnN0IHNldHRpbmdzID0gX3pvbmVXcmFwKHNldHRpbmdzJDEsIHRydWUpO1xuY2xhc3MgVXNlclRyYWNraW5nU2VydmljZSB7XG4gIGluaXRpYWxpemVkO1xuICBkaXNwb3NhYmxlcyA9IFtdO1xuICBjb25zdHJ1Y3RvcihhdXRoLCB6b25lLCBpbmplY3Rvcikge1xuICAgIHJlZ2lzdGVyVmVyc2lvbignYW5ndWxhcmZpcmUnLCBWRVJTSU9OLmZ1bGwsICd1c2VyLXRyYWNraW5nJyk7XG4gICAgbGV0IHJlc29sdmVJbml0aWFsaXplZDtcbiAgICB0aGlzLmluaXRpYWxpemVkID0gem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIHJlc29sdmVJbml0aWFsaXplZCA9IHJlc29sdmU7XG4gICAgfSkpO1xuICAgIC8vIFRoZSBBUFBfSU5JVElBTElaRVIgdGhhdCBpcyBtYWtpbmcgaXNTdXBwb3J0ZWQoKSBzeW5jIGZvciB0aGUgc2FrZSBvZiBjb252ZW5pZW50IERJXG4gICAgLy8gbWF5IG5vdCBiZSBkb25lIHdoZW4gc2VydmljZXMgYXJlIGluaXRpYWxpemVkLiBHdWFyZCB0aGUgZnVuY3Rpb25hbGl0eSBieSBmaXJzdCBlbnN1cmluZ1xuICAgIC8vIHRoYXQgdGhlIChnbG9iYWwpIHByb21pc2UgaGFzIHJlc29sdmVkLCB0aGVuIGdldCBBbmFseXRpY3MgZnJvbSB0aGUgaW5qZWN0b3IuXG4gICAgaXNTdXBwb3J0ZWQoKS50aGVuKCgpID0+IHtcbiAgICAgIGNvbnN0IGFuYWx5dGljcyA9IGluamVjdG9yLmdldChBbmFseXRpY3MpO1xuICAgICAgaWYgKGFuYWx5dGljcykge1xuICAgICAgICB0aGlzLmRpc3Bvc2FibGVzID0gW1xuICAgICAgICAvLyBUT0RPIGFkZCBjcmVkZW50aWFsIHRyYWNraW5nIGJhY2sgaW5cbiAgICAgICAgYXV0aFN0YXRlKGF1dGgpLnN1YnNjcmliZSh1c2VyID0+IHtcbiAgICAgICAgICBzZXRVc2VySWQoYW5hbHl0aWNzLCB1c2VyPy51aWQpO1xuICAgICAgICAgIHJlc29sdmVJbml0aWFsaXplZCgpO1xuICAgICAgICB9KV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlSW5pdGlhbGl6ZWQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLmRpc3Bvc2FibGVzLmZvckVhY2goaXQgPT4gaXQudW5zdWJzY3JpYmUoKSk7XG4gIH1cbiAgc3RhdGljIMm1ZmFjID0gZnVuY3Rpb24gVXNlclRyYWNraW5nU2VydmljZV9GYWN0b3J5KF9fbmdGYWN0b3J5VHlwZV9fKSB7XG4gICAgcmV0dXJuIG5ldyAoX19uZ0ZhY3RvcnlUeXBlX18gfHwgVXNlclRyYWNraW5nU2VydmljZSkoaTAuybXJtWluamVjdChpMS5BdXRoKSwgaTAuybXJtWluamVjdChpMC5OZ1pvbmUpLCBpMC7Jtcm1aW5qZWN0KGkwLkluamVjdG9yKSk7XG4gIH07XG4gIHN0YXRpYyDJtXByb3YgPSAvKiBAX19QVVJFX18gKi9pMC7Jtcm1ZGVmaW5lSW5qZWN0YWJsZSh7XG4gICAgdG9rZW46IFVzZXJUcmFja2luZ1NlcnZpY2UsXG4gICAgZmFjdG9yeTogVXNlclRyYWNraW5nU2VydmljZS7JtWZhY1xuICB9KTtcbn1cbigoKSA9PiB7XG4gICh0eXBlb2YgbmdEZXZNb2RlID09PSBcInVuZGVmaW5lZFwiIHx8IG5nRGV2TW9kZSkgJiYgaTAuybVzZXRDbGFzc01ldGFkYXRhKFVzZXJUcmFja2luZ1NlcnZpY2UsIFt7XG4gICAgdHlwZTogSW5qZWN0YWJsZVxuICB9XSwgKCkgPT4gW3tcbiAgICB0eXBlOiBpMS5BdXRoXG4gIH0sIHtcbiAgICB0eXBlOiBpMC5OZ1pvbmVcbiAgfSwge1xuICAgIHR5cGU6IGkwLkluamVjdG9yXG4gIH1dLCBudWxsKTtcbn0pKCk7XG5jb25zdCBGSVJFQkFTRV9FVkVOVF9PUklHSU5fS0VZID0gJ2ZpcmViYXNlX2V2ZW50X29yaWdpbic7XG5jb25zdCBGSVJFQkFTRV9QUkVWSU9VU19TQ1JFRU5fQ0xBU1NfS0VZID0gJ2ZpcmViYXNlX3ByZXZpb3VzX2NsYXNzJztcbmNvbnN0IEZJUkVCQVNFX1BSRVZJT1VTX1NDUkVFTl9JTlNUQU5DRV9JRF9LRVkgPSAnZmlyZWJhc2VfcHJldmlvdXNfaWQnO1xuY29uc3QgRklSRUJBU0VfUFJFVklPVVNfU0NSRUVOX05BTUVfS0VZID0gJ2ZpcmViYXNlX3ByZXZpb3VzX3NjcmVlbic7XG5jb25zdCBGSVJFQkFTRV9TQ1JFRU5fQ0xBU1NfS0VZID0gJ2ZpcmViYXNlX3NjcmVlbl9jbGFzcyc7XG5jb25zdCBGSVJFQkFTRV9TQ1JFRU5fSU5TVEFOQ0VfSURfS0VZID0gJ2ZpcmViYXNlX3NjcmVlbl9pZCc7XG5jb25zdCBGSVJFQkFTRV9TQ1JFRU5fTkFNRV9LRVkgPSAnZmlyZWJhc2Vfc2NyZWVuJztcbmNvbnN0IE9VVExFVF9LRVkgPSAnb3V0bGV0JztcbmNvbnN0IFBBR0VfUEFUSF9LRVkgPSAncGFnZV9wYXRoJztcbmNvbnN0IFBBR0VfVElUTEVfS0VZID0gJ3BhZ2VfdGl0bGUnO1xuY29uc3QgU0NSRUVOX0NMQVNTX0tFWSA9ICdzY3JlZW5fY2xhc3MnO1xuY29uc3QgU0NSRUVOX05BTUVfS0VZID0gJ3NjcmVlbl9uYW1lJztcbmNvbnN0IFNDUkVFTl9WSUVXX0VWRU5UID0gJ3NjcmVlbl92aWV3JztcbmNvbnN0IEVWRU5UX09SSUdJTl9BVVRPID0gJ2F1dG8nO1xuY29uc3QgU0NSRUVOX0lOU1RBTkNFX0RFTElNSVRFUiA9ICcjJztcbi8vIHRoaXMgaXMgYW4gSU5UNjQgaW4gaU9TL0FuZHJvaWQgYnV0IHVzZSBJTlQzMiBjYXVzZSBqYXZhc2NyaXB0XG5sZXQgbmV4dFNjcmVlbkluc3RhbmNlSUQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoMiAqKiAzMiAtIDEpKSAtIDIgKiogMzE7XG5jb25zdCBrbm93blNjcmVlbkluc3RhbmNlSURzID0ge307XG5jb25zdCBnZXRTY3JlZW5JbnN0YW5jZUlEID0gcGFyYW1zID0+IHtcbiAgLy8gdW5pcXVlIHRoZSBzY3JlZW4gY2xhc3MgYWdhaW5zdCB0aGUgb3V0bGV0IG5hbWVcbiAgY29uc3Qgc2NyZWVuSW5zdGFuY2VLZXkgPSBbcGFyYW1zW1NDUkVFTl9DTEFTU19LRVldLCBwYXJhbXNbT1VUTEVUX0tFWV1dLmpvaW4oU0NSRUVOX0lOU1RBTkNFX0RFTElNSVRFUik7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnNcbiAgaWYgKGtub3duU2NyZWVuSW5zdGFuY2VJRHMuaGFzT3duUHJvcGVydHkoc2NyZWVuSW5zdGFuY2VLZXkpKSB7XG4gICAgcmV0dXJuIGtub3duU2NyZWVuSW5zdGFuY2VJRHNbc2NyZWVuSW5zdGFuY2VLZXldO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHJldCA9IG5leHRTY3JlZW5JbnN0YW5jZUlEKys7XG4gICAga25vd25TY3JlZW5JbnN0YW5jZUlEc1tzY3JlZW5JbnN0YW5jZUtleV0gPSByZXQ7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxufTtcbmNvbnN0IMm1c2NyZWVuVmlld0V2ZW50ID0gKHJvdXRlciwgdGl0bGUsIGNvbXBvbmVudEZhY3RvcnlSZXNvbHZlcikgPT4ge1xuICBjb25zdCBhY3RpdmF0aW9uRW5kRXZlbnRzID0gcm91dGVyLmV2ZW50cy5waXBlKGZpbHRlcihlID0+IGUgaW5zdGFuY2VvZiBBY3RpdmF0aW9uRW5kKSk7XG4gIHJldHVybiBhY3RpdmF0aW9uRW5kRXZlbnRzLnBpcGUoc3dpdGNoTWFwKGFjdGl2YXRpb25FbmQgPT4ge1xuICAgIC8vIHJvdXRlciBwYXJzZVVybCBpcyBoYXZpbmcgdHJvdWJsZSB3aXRoIG91dGxldHMgd2hlbiB0aGV5J3JlIGVtcHR5XG4gICAgLy8gZS5nLCAvYXNkZi8xKGJvYjovL3NhbGx5OmFzZGYpLCBzbyBwdXQgYW5vdGhlciBzbGFzaCBpbiB3aGVuIGVtcHR5XG4gICAgY29uc3QgdXJsVHJlZSA9IHJvdXRlci5wYXJzZVVybChyb3V0ZXIudXJsLnJlcGxhY2UoLyg/OlxcKCkuKyg/OlxcKSkvZywgYSA9PiBhLnJlcGxhY2UoJzovLycsICc6Ly8vJykpKTtcbiAgICBjb25zdCBwYWdlUGF0aCA9IHVybFRyZWUucm9vdC5jaGlsZHJlblthY3RpdmF0aW9uRW5kLnNuYXBzaG90Lm91dGxldF0/LnRvU3RyaW5nKCkgfHwgJyc7XG4gICAgY29uc3QgYWN0dWFsU25hcHNob3QgPSByb3V0ZXIucm91dGVyU3RhdGUucm9vdC5jaGlsZHJlbi5tYXAoaXQgPT4gaXQpLmZpbmQoaXQgPT4gaXQub3V0bGV0ID09PSBhY3RpdmF0aW9uRW5kLnNuYXBzaG90Lm91dGxldCk7XG4gICAgaWYgKCFhY3R1YWxTbmFwc2hvdCkge1xuICAgICAgcmV0dXJuIG9mKG51bGwpO1xuICAgIH1cbiAgICBsZXQgYWN0dWFsRGVlcCA9IGFjdHVhbFNuYXBzaG90O1xuICAgIHdoaWxlIChhY3R1YWxEZWVwLmZpcnN0Q2hpbGQpIHtcbiAgICAgIGFjdHVhbERlZXAgPSBhY3R1YWxEZWVwLmZpcnN0Q2hpbGQ7XG4gICAgfVxuICAgIGNvbnN0IHNjcmVlbk5hbWUgPSBhY3R1YWxEZWVwLnBhdGhGcm9tUm9vdC5tYXAocyA9PiBzLnJvdXRlQ29uZmlnPy5wYXRoKS5maWx0ZXIoaXQgPT4gaXQpLmpvaW4oJy8nKSB8fCAnLyc7XG4gICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgW1NDUkVFTl9OQU1FX0tFWV06IHNjcmVlbk5hbWUsXG4gICAgICBbUEFHRV9QQVRIX0tFWV06IGAvJHtwYWdlUGF0aH1gLFxuICAgICAgW0ZJUkVCQVNFX0VWRU5UX09SSUdJTl9LRVldOiBFVkVOVF9PUklHSU5fQVVUTyxcbiAgICAgIFtGSVJFQkFTRV9TQ1JFRU5fTkFNRV9LRVldOiBzY3JlZW5OYW1lLFxuICAgICAgW09VVExFVF9LRVldOiBhY3RpdmF0aW9uRW5kLnNuYXBzaG90Lm91dGxldFxuICAgIH07XG4gICAgaWYgKHRpdGxlKSB7XG4gICAgICBwYXJhbXNbUEFHRV9USVRMRV9LRVldID0gdGl0bGUuZ2V0VGl0bGUoKTtcbiAgICB9XG4gICAgbGV0IGNvbXBvbmVudCA9IGFjdHVhbFNuYXBzaG90LmNvbXBvbmVudDtcbiAgICBpZiAoY29tcG9uZW50KSB7XG4gICAgICBpZiAoY29tcG9uZW50ID09PSBfRW1wdHlPdXRsZXRDb21wb25lbnQpIHtcbiAgICAgICAgbGV0IGRlZXBTbmFwc2hvdCA9IGFjdGl2YXRpb25FbmQuc25hcHNob3Q7XG4gICAgICAgIC8vIFRPRE8gd2hlbiBtaWdodCB0aGVyZSBiZSBtdXRwbGUgY2hpbGRyZW4sIGRpZmZlcmVudCBvdXRsZXRzPyBleHBsb3JlXG4gICAgICAgIHdoaWxlIChkZWVwU25hcHNob3QuZmlyc3RDaGlsZCkge1xuICAgICAgICAgIGRlZXBTbmFwc2hvdCA9IGRlZXBTbmFwc2hvdC5maXJzdENoaWxkO1xuICAgICAgICB9XG4gICAgICAgIGNvbXBvbmVudCA9IGRlZXBTbmFwc2hvdC5jb21wb25lbnQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbXBvbmVudCA9IGFjdGl2YXRpb25FbmQuc25hcHNob3QuY29tcG9uZW50O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGNvbXBvbmVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBvZih7XG4gICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgW1NDUkVFTl9DTEFTU19LRVldOiBjb21wb25lbnRcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoY29tcG9uZW50KSB7XG4gICAgICBjb25zdCBjb21wb25lbnRGYWN0b3J5ID0gY29tcG9uZW50RmFjdG9yeVJlc29sdmVyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KGNvbXBvbmVudCk7XG4gICAgICByZXR1cm4gb2Yoe1xuICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgIFtTQ1JFRU5fQ0xBU1NfS0VZXTogY29tcG9uZW50RmFjdG9yeS5zZWxlY3RvclxuICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGxhenkgbG9hZHMgY2F1c2UgZXh0cmEgYWN0aXZhdGlvbnMsIGlnbm9yZVxuICAgIHJldHVybiBvZihudWxsKTtcbiAgfSksIGZpbHRlcihpdCA9PiAhIWl0KSwgbWFwKHBhcmFtcyA9PiAoe1xuICAgIFtGSVJFQkFTRV9TQ1JFRU5fQ0xBU1NfS0VZXTogcGFyYW1zW1NDUkVFTl9DTEFTU19LRVldLFxuICAgIFtGSVJFQkFTRV9TQ1JFRU5fSU5TVEFOQ0VfSURfS0VZXTogZ2V0U2NyZWVuSW5zdGFuY2VJRChwYXJhbXMpLFxuICAgIC4uLnBhcmFtc1xuICB9KSksIGdyb3VwQnkoaXQgPT4gaXRbT1VUTEVUX0tFWV0pLCBtZXJnZU1hcChpdCA9PiBpdC5waXBlKGRpc3RpbmN0VW50aWxDaGFuZ2VkKChhLCBiKSA9PiBKU09OLnN0cmluZ2lmeShhKSA9PT0gSlNPTi5zdHJpbmdpZnkoYikpLCBzdGFydFdpdGgodW5kZWZpbmVkKSwgcGFpcndpc2UoKSwgbWFwKChbcHJpb3IsIGN1cnJlbnRdKSA9PiBwcmlvciA/IHtcbiAgICBbRklSRUJBU0VfUFJFVklPVVNfU0NSRUVOX0NMQVNTX0tFWV06IHByaW9yW1NDUkVFTl9DTEFTU19LRVldLFxuICAgIFtGSVJFQkFTRV9QUkVWSU9VU19TQ1JFRU5fTkFNRV9LRVldOiBwcmlvcltTQ1JFRU5fTkFNRV9LRVldLFxuICAgIFtGSVJFQkFTRV9QUkVWSU9VU19TQ1JFRU5fSU5TVEFOQ0VfSURfS0VZXTogcHJpb3JbRklSRUJBU0VfU0NSRUVOX0lOU1RBTkNFX0lEX0tFWV0sXG4gICAgLi4uY3VycmVudFxuICB9IDogY3VycmVudCkpKSk7XG59O1xuY2xhc3MgU2NyZWVuVHJhY2tpbmdTZXJ2aWNlIHtcbiAgZGlzcG9zYWJsZTtcbiAgY29uc3RydWN0b3Iocm91dGVyLCB0aXRsZSwgY29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCB6b25lLCB1c2VyVHJhY2tpbmdTZXJ2aWNlLCBpbmplY3Rvcikge1xuICAgIHJlZ2lzdGVyVmVyc2lvbignYW5ndWxhcmZpcmUnLCBWRVJTSU9OLmZ1bGwsICdzY3JlZW4tdHJhY2tpbmcnKTtcbiAgICAvLyBUaGUgQVBQX0lOSVRJQUxJWkVSIHRoYXQgaXMgbWFraW5nIGlzU3VwcG9ydGVkKCkgc3luYyBmb3IgdGhlIHNha2Ugb2YgY29udmVuaWVudCBESVxuICAgIC8vIG1heSBub3QgYmUgZG9uZSB3aGVuIHNlcnZpY2VzIGFyZSBpbml0aWFsaXplZC4gR3VhcmQgdGhlIGZ1bmN0aW9uYWxpdHkgYnkgZmlyc3QgZW5zdXJpbmdcbiAgICAvLyB0aGF0IHRoZSAoZ2xvYmFsKSBwcm9taXNlIGhhcyByZXNvbHZlZCwgdGhlbiBnZXQgQW5hbHl0aWNzIGZyb20gdGhlIGluamVjdG9yLlxuICAgIGlzU3VwcG9ydGVkKCkudGhlbigoKSA9PiB7XG4gICAgICBjb25zdCBhbmFseXRpY3MgPSBpbmplY3Rvci5nZXQoQW5hbHl0aWNzKTtcbiAgICAgIGlmICghcm91dGVyIHx8ICFhbmFseXRpY3MpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgIHRoaXMuZGlzcG9zYWJsZSA9IMm1c2NyZWVuVmlld0V2ZW50KHJvdXRlciwgdGl0bGUsIGNvbXBvbmVudEZhY3RvcnlSZXNvbHZlcikucGlwZShzd2l0Y2hNYXAoYXN5bmMgcGFyYW1zID0+IHtcbiAgICAgICAgICBpZiAodXNlclRyYWNraW5nU2VydmljZSkge1xuICAgICAgICAgICAgYXdhaXQgdXNlclRyYWNraW5nU2VydmljZS5pbml0aWFsaXplZDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGxvZ0V2ZW50KGFuYWx5dGljcywgU0NSRUVOX1ZJRVdfRVZFTlQsIHBhcmFtcyk7XG4gICAgICAgIH0pKS5zdWJzY3JpYmUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIG5nT25EZXN0cm95KCkge1xuICAgIGlmICh0aGlzLmRpc3Bvc2FibGUpIHtcbiAgICAgIHRoaXMuZGlzcG9zYWJsZS51bnN1YnNjcmliZSgpO1xuICAgIH1cbiAgfVxuICBzdGF0aWMgybVmYWMgPSBmdW5jdGlvbiBTY3JlZW5UcmFja2luZ1NlcnZpY2VfRmFjdG9yeShfX25nRmFjdG9yeVR5cGVfXykge1xuICAgIHJldHVybiBuZXcgKF9fbmdGYWN0b3J5VHlwZV9fIHx8IFNjcmVlblRyYWNraW5nU2VydmljZSkoaTAuybXJtWluamVjdChpMSQxLlJvdXRlciwgOCksIGkwLsm1ybVpbmplY3QoaTIuVGl0bGUsIDgpLCBpMC7Jtcm1aW5qZWN0KGkwLkNvbXBvbmVudEZhY3RvcnlSZXNvbHZlciksIGkwLsm1ybVpbmplY3QoaTAuTmdab25lKSwgaTAuybXJtWluamVjdChVc2VyVHJhY2tpbmdTZXJ2aWNlLCA4KSwgaTAuybXJtWluamVjdChpMC5JbmplY3RvcikpO1xuICB9O1xuICBzdGF0aWMgybVwcm92ID0gLyogQF9fUFVSRV9fICovaTAuybXJtWRlZmluZUluamVjdGFibGUoe1xuICAgIHRva2VuOiBTY3JlZW5UcmFja2luZ1NlcnZpY2UsXG4gICAgZmFjdG9yeTogU2NyZWVuVHJhY2tpbmdTZXJ2aWNlLsm1ZmFjXG4gIH0pO1xufVxuKCgpID0+IHtcbiAgKHR5cGVvZiBuZ0Rldk1vZGUgPT09IFwidW5kZWZpbmVkXCIgfHwgbmdEZXZNb2RlKSAmJiBpMC7JtXNldENsYXNzTWV0YWRhdGEoU2NyZWVuVHJhY2tpbmdTZXJ2aWNlLCBbe1xuICAgIHR5cGU6IEluamVjdGFibGVcbiAgfV0sICgpID0+IFt7XG4gICAgdHlwZTogaTEkMS5Sb3V0ZXIsXG4gICAgZGVjb3JhdG9yczogW3tcbiAgICAgIHR5cGU6IE9wdGlvbmFsXG4gICAgfV1cbiAgfSwge1xuICAgIHR5cGU6IGkyLlRpdGxlLFxuICAgIGRlY29yYXRvcnM6IFt7XG4gICAgICB0eXBlOiBPcHRpb25hbFxuICAgIH1dXG4gIH0sIHtcbiAgICB0eXBlOiBpMC5Db21wb25lbnRGYWN0b3J5UmVzb2x2ZXJcbiAgfSwge1xuICAgIHR5cGU6IGkwLk5nWm9uZVxuICB9LCB7XG4gICAgdHlwZTogVXNlclRyYWNraW5nU2VydmljZSxcbiAgICBkZWNvcmF0b3JzOiBbe1xuICAgICAgdHlwZTogT3B0aW9uYWxcbiAgICB9XVxuICB9LCB7XG4gICAgdHlwZTogaTAuSW5qZWN0b3JcbiAgfV0sIG51bGwpO1xufSkoKTtcbmNvbnN0IFBST1ZJREVEX0FOQUxZVElDU19JTlNUQU5DRVMgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ2FuZ3VsYXJmaXJlMi5hbmFseXRpY3MtaW5zdGFuY2VzJyk7XG5mdW5jdGlvbiBkZWZhdWx0QW5hbHl0aWNzSW5zdGFuY2VGYWN0b3J5KHByb3ZpZGVkLCBkZWZhdWx0QXBwLCBwbGF0Zm9ybUlkKSB7XG4gIGlmICghaXNQbGF0Zm9ybUJyb3dzZXIocGxhdGZvcm1JZCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBkZWZhdWx0QW5hbHl0aWNzID0gX2dldERlZmF1bHRJbnN0YW5jZU9mKEFOQUxZVElDU19QUk9WSURFUl9OQU1FLCBwcm92aWRlZCwgZGVmYXVsdEFwcCk7XG4gIHJldHVybiBkZWZhdWx0QW5hbHl0aWNzICYmIG5ldyBBbmFseXRpY3MoZGVmYXVsdEFuYWx5dGljcyk7XG59XG5mdW5jdGlvbiBhbmFseXRpY3NJbnN0YW5jZUZhY3RvcnkoZm4pIHtcbiAgcmV0dXJuICh6b25lLCBpbmplY3RvciwgcGxhdGZvcm1JZCkgPT4ge1xuICAgIGlmICghaXNQbGF0Zm9ybUJyb3dzZXIocGxhdGZvcm1JZCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBhbmFseXRpY3MgPSB6b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IGZuKGluamVjdG9yKSk7XG4gICAgcmV0dXJuIG5ldyBBbmFseXRpY3MoYW5hbHl0aWNzKTtcbiAgfTtcbn1cbmNvbnN0IEFOQUxZVElDU19JTlNUQU5DRVNfUFJPVklERVIgPSB7XG4gIHByb3ZpZGU6IEFuYWx5dGljc0luc3RhbmNlcyxcbiAgZGVwczogW1tuZXcgT3B0aW9uYWwoKSwgUFJPVklERURfQU5BTFlUSUNTX0lOU1RBTkNFU11dXG59O1xuY29uc3QgREVGQVVMVF9BTkFMWVRJQ1NfSU5TVEFOQ0VfUFJPVklERVIgPSB7XG4gIHByb3ZpZGU6IEFuYWx5dGljcyxcbiAgdXNlRmFjdG9yeTogZGVmYXVsdEFuYWx5dGljc0luc3RhbmNlRmFjdG9yeSxcbiAgZGVwczogW1tuZXcgT3B0aW9uYWwoKSwgUFJPVklERURfQU5BTFlUSUNTX0lOU1RBTkNFU10sIEZpcmViYXNlQXBwLCBQTEFURk9STV9JRF1cbn07XG5jbGFzcyBBbmFseXRpY3NNb2R1bGUge1xuICBjb25zdHJ1Y3Rvcihfc2NyZWVuVHJhY2tpbmdTZXJ2aWNlLCBfdXNlclRyYWNraW5nU2VydmljZSkge1xuICAgIHJlZ2lzdGVyVmVyc2lvbignYW5ndWxhcmZpcmUnLCBWRVJTSU9OLmZ1bGwsICdhbmFseXRpY3MnKTtcbiAgfVxuICBzdGF0aWMgybVmYWMgPSBmdW5jdGlvbiBBbmFseXRpY3NNb2R1bGVfRmFjdG9yeShfX25nRmFjdG9yeVR5cGVfXykge1xuICAgIHJldHVybiBuZXcgKF9fbmdGYWN0b3J5VHlwZV9fIHx8IEFuYWx5dGljc01vZHVsZSkoaTAuybXJtWluamVjdChTY3JlZW5UcmFja2luZ1NlcnZpY2UsIDgpLCBpMC7Jtcm1aW5qZWN0KFVzZXJUcmFja2luZ1NlcnZpY2UsIDgpKTtcbiAgfTtcbiAgc3RhdGljIMm1bW9kID0gLyogQF9fUFVSRV9fICovaTAuybXJtWRlZmluZU5nTW9kdWxlKHtcbiAgICB0eXBlOiBBbmFseXRpY3NNb2R1bGVcbiAgfSk7XG4gIHN0YXRpYyDJtWluaiA9IC8qIEBfX1BVUkVfXyAqL2kwLsm1ybVkZWZpbmVJbmplY3Rvcih7XG4gICAgcHJvdmlkZXJzOiBbREVGQVVMVF9BTkFMWVRJQ1NfSU5TVEFOQ0VfUFJPVklERVIsIEFOQUxZVElDU19JTlNUQU5DRVNfUFJPVklERVJdXG4gIH0pO1xufVxuKCgpID0+IHtcbiAgKHR5cGVvZiBuZ0Rldk1vZGUgPT09IFwidW5kZWZpbmVkXCIgfHwgbmdEZXZNb2RlKSAmJiBpMC7JtXNldENsYXNzTWV0YWRhdGEoQW5hbHl0aWNzTW9kdWxlLCBbe1xuICAgIHR5cGU6IE5nTW9kdWxlLFxuICAgIGFyZ3M6IFt7XG4gICAgICBwcm92aWRlcnM6IFtERUZBVUxUX0FOQUxZVElDU19JTlNUQU5DRV9QUk9WSURFUiwgQU5BTFlUSUNTX0lOU1RBTkNFU19QUk9WSURFUl1cbiAgICB9XVxuICB9XSwgKCkgPT4gW3tcbiAgICB0eXBlOiBTY3JlZW5UcmFja2luZ1NlcnZpY2UsXG4gICAgZGVjb3JhdG9yczogW3tcbiAgICAgIHR5cGU6IE9wdGlvbmFsXG4gICAgfV1cbiAgfSwge1xuICAgIHR5cGU6IFVzZXJUcmFja2luZ1NlcnZpY2UsXG4gICAgZGVjb3JhdG9yczogW3tcbiAgICAgIHR5cGU6IE9wdGlvbmFsXG4gICAgfV1cbiAgfV0sIG51bGwpO1xufSkoKTtcbmZ1bmN0aW9uIHByb3ZpZGVBbmFseXRpY3MoZm4sIC4uLmRlcHMpIHtcbiAgcmVnaXN0ZXJWZXJzaW9uKCdhbmd1bGFyZmlyZScsIFZFUlNJT04uZnVsbCwgJ2FuYWx5dGljcycpO1xuICByZXR1cm4gbWFrZUVudmlyb25tZW50UHJvdmlkZXJzKFtERUZBVUxUX0FOQUxZVElDU19JTlNUQU5DRV9QUk9WSURFUiwgQU5BTFlUSUNTX0lOU1RBTkNFU19QUk9WSURFUiwge1xuICAgIHByb3ZpZGU6IFBST1ZJREVEX0FOQUxZVElDU19JTlNUQU5DRVMsXG4gICAgdXNlRmFjdG9yeTogYW5hbHl0aWNzSW5zdGFuY2VGYWN0b3J5KGZuKSxcbiAgICBtdWx0aTogdHJ1ZSxcbiAgICBkZXBzOiBbTmdab25lLCBJbmplY3RvciwgUExBVEZPUk1fSUQsIF9Bbmd1bGFyRmlyZVNjaGVkdWxlcnMsIEZpcmViYXNlQXBwcywgLi4uZGVwc11cbiAgfV0pO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlZCBidW5kbGUgaW5kZXguIERvIG5vdCBlZGl0LlxuICovXG5cbmV4cG9ydCB7IEFuYWx5dGljcywgQW5hbHl0aWNzSW5zdGFuY2VzLCBBbmFseXRpY3NNb2R1bGUsIFNjcmVlblRyYWNraW5nU2VydmljZSwgVXNlclRyYWNraW5nU2VydmljZSwgYW5hbHl0aWNJbnN0YW5jZSQsIGdldEFuYWx5dGljcywgZ2V0R29vZ2xlQW5hbHl0aWNzQ2xpZW50SWQsIGluaXRpYWxpemVBbmFseXRpY3MsIGlzU3VwcG9ydGVkLCBsb2dFdmVudCwgcHJvdmlkZUFuYWx5dGljcywgc2V0QW5hbHl0aWNzQ29sbGVjdGlvbkVuYWJsZWQsIHNldENvbnNlbnQsIHNldEN1cnJlbnRTY3JlZW4sIHNldERlZmF1bHRFdmVudFBhcmFtZXRlcnMsIHNldFVzZXJJZCwgc2V0VXNlclByb3BlcnRpZXMsIHNldHRpbmdzLCDJtXNjcmVlblZpZXdFdmVudCB9O1xuIiwiaW1wb3J0ICogYXMgaTAgZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBJbmplY3RhYmxlLCBJbmplY3QgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCAqIGFzIGkxIGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmNsYXNzIFRyYW5zbGF0ZUh0dHBMb2FkZXIge1xuICBodHRwO1xuICBwcmVmaXg7XG4gIHN1ZmZpeDtcbiAgY29uc3RydWN0b3IoaHR0cCwgcHJlZml4ID0gXCIvYXNzZXRzL2kxOG4vXCIsIHN1ZmZpeCA9IFwiLmpzb25cIikge1xuICAgIHRoaXMuaHR0cCA9IGh0dHA7XG4gICAgdGhpcy5wcmVmaXggPSBwcmVmaXg7XG4gICAgdGhpcy5zdWZmaXggPSBzdWZmaXg7XG4gIH1cbiAgLyoqXG4gICAqIEdldHMgdGhlIHRyYW5zbGF0aW9ucyBmcm9tIHRoZSBzZXJ2ZXJcbiAgICovXG4gIGdldFRyYW5zbGF0aW9uKGxhbmcpIHtcbiAgICByZXR1cm4gdGhpcy5odHRwLmdldChgJHt0aGlzLnByZWZpeH0ke2xhbmd9JHt0aGlzLnN1ZmZpeH1gKTtcbiAgfVxuICBzdGF0aWMgybVmYWMgPSBmdW5jdGlvbiBUcmFuc2xhdGVIdHRwTG9hZGVyX0ZhY3RvcnkoX19uZ0ZhY3RvcnlUeXBlX18pIHtcbiAgICByZXR1cm4gbmV3IChfX25nRmFjdG9yeVR5cGVfXyB8fCBUcmFuc2xhdGVIdHRwTG9hZGVyKShpMC7Jtcm1aW5qZWN0KGkxLkh0dHBDbGllbnQpLCBpMC7Jtcm1aW5qZWN0KFN0cmluZyksIGkwLsm1ybVpbmplY3QoU3RyaW5nKSk7XG4gIH07XG4gIHN0YXRpYyDJtXByb3YgPSAvKiBAX19QVVJFX18gKi9pMC7Jtcm1ZGVmaW5lSW5qZWN0YWJsZSh7XG4gICAgdG9rZW46IFRyYW5zbGF0ZUh0dHBMb2FkZXIsXG4gICAgZmFjdG9yeTogVHJhbnNsYXRlSHR0cExvYWRlci7JtWZhY1xuICB9KTtcbn1cbigoKSA9PiB7XG4gICh0eXBlb2YgbmdEZXZNb2RlID09PSBcInVuZGVmaW5lZFwiIHx8IG5nRGV2TW9kZSkgJiYgaTAuybVzZXRDbGFzc01ldGFkYXRhKFRyYW5zbGF0ZUh0dHBMb2FkZXIsIFt7XG4gICAgdHlwZTogSW5qZWN0YWJsZVxuICB9XSwgKCkgPT4gW3tcbiAgICB0eXBlOiBpMS5IdHRwQ2xpZW50XG4gIH0sIHtcbiAgICB0eXBlOiB1bmRlZmluZWQsXG4gICAgZGVjb3JhdG9yczogW3tcbiAgICAgIHR5cGU6IEluamVjdCxcbiAgICAgIGFyZ3M6IFtTdHJpbmddXG4gICAgfV1cbiAgfSwge1xuICAgIHR5cGU6IHVuZGVmaW5lZCxcbiAgICBkZWNvcmF0b3JzOiBbe1xuICAgICAgdHlwZTogSW5qZWN0LFxuICAgICAgYXJnczogW1N0cmluZ11cbiAgICB9XVxuICB9XSwgbnVsbCk7XG59KSgpO1xuXG4vKipcbiAqIEdlbmVyYXRlZCBidW5kbGUgaW5kZXguIERvIG5vdCBlZGl0LlxuICovXG5cbmV4cG9ydCB7IFRyYW5zbGF0ZUh0dHBMb2FkZXIgfTtcbiIsImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYXBwLXRlYW0tY3JlYXRlJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vdGVhbS1jcmVhdGUucGFnZS5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi90ZWFtLWNyZWF0ZS5wYWdlLnNjc3MnXSxcbiAgICBzdGFuZGFsb25lOiBmYWxzZVxufSlcbmV4cG9ydCBjbGFzcyBUZWFtQ3JlYXRlUGFnZSBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cbiAgY29uc3RydWN0b3IoKSB7IH1cblxuICBuZ09uSW5pdCgpIHtcbiAgfVxuXG59XG4iLCI8aW9uLWhlYWRlciBbdHJhbnNsdWNlbnRdPVwidHJ1ZVwiPlxuICA8aW9uLXRvb2xiYXI+XG4gICAgPGlvbi10aXRsZT50ZWFtLWNyZWF0ZTwvaW9uLXRpdGxlPlxuICA8L2lvbi10b29sYmFyPlxuPC9pb24taGVhZGVyPlxuXG48aW9uLWNvbnRlbnQgW2Z1bGxzY3JlZW5dPVwidHJ1ZVwiPlxuICA8aW9uLWhlYWRlciBjb2xsYXBzZT1cImNvbmRlbnNlXCI+XG4gICAgPGlvbi10b29sYmFyPlxuICAgICAgPGlvbi10aXRsZSBzaXplPVwibGFyZ2VcIj50ZWFtLWNyZWF0ZTwvaW9uLXRpdGxlPlxuICAgIDwvaW9uLXRvb2xiYXI+XG4gIDwvaW9uLWhlYWRlcj5cbjwvaW9uLWNvbnRlbnQ+XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSwgQ1VTVE9NX0VMRU1FTlRTX1NDSEVNQSwgQVBQX0lOSVRJQUxJWkVSLCBJbmplY3RvciB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBCcm93c2VyTW9kdWxlIH0gZnJvbSBcIkBhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXJcIjtcbmltcG9ydCB7IFJvdXRlUmV1c2VTdHJhdGVneSB9IGZyb20gXCJAYW5ndWxhci9yb3V0ZXJcIjtcblxuaW1wb3J0IHsgSW9uaWNNb2R1bGUsIElvbmljUm91dGVTdHJhdGVneSwgaXNQbGF0Zm9ybSB9IGZyb20gXCJAaW9uaWMvYW5ndWxhclwiO1xuaW1wb3J0IHsgRm9ybXNNb2R1bGUgfSBmcm9tIFwiQGFuZ3VsYXIvZm9ybXNcIjtcblxuaW1wb3J0IHsgQXBwQ29tcG9uZW50IH0gZnJvbSBcIi4vYXBwLmNvbXBvbmVudFwiO1xuaW1wb3J0IHsgQXBwUm91dGluZ01vZHVsZSB9IGZyb20gXCIuL2FwcC1yb3V0aW5nLm1vZHVsZVwiO1xuaW1wb3J0IHsgU2VydmljZVdvcmtlck1vZHVsZSB9IGZyb20gXCJAYW5ndWxhci9zZXJ2aWNlLXdvcmtlclwiO1xuaW1wb3J0IHsgZW52aXJvbm1lbnQgfSBmcm9tIFwiLi4vZW52aXJvbm1lbnRzL2Vudmlyb25tZW50XCI7XG5pbXBvcnQgeyBIdHRwQ2xpZW50LCBwcm92aWRlSHR0cENsaWVudCwgd2l0aEludGVyY2VwdG9yc0Zyb21EaSB9IGZyb20gXCJAYW5ndWxhci9jb21tb24vaHR0cFwiO1xuXG5pbXBvcnQgeyBGb250QXdlc29tZU1vZHVsZSB9IGZyb20gXCJAZm9ydGF3ZXNvbWUvYW5ndWxhci1mb250YXdlc29tZVwiO1xuXG5pbXBvcnQgeyBwcm92aWRlRmlyZWJhc2VBcHAsIGdldEFwcCwgaW5pdGlhbGl6ZUFwcCB9IGZyb20gXCJAYW5ndWxhci9maXJlL2FwcFwiO1xuaW1wb3J0IHsgZ2V0RmlyZXN0b3JlLCBwcm92aWRlRmlyZXN0b3JlIH0gZnJvbSBcIkBhbmd1bGFyL2ZpcmUvZmlyZXN0b3JlXCI7XG5pbXBvcnQgeyBwcm92aWRlQXV0aCwgZ2V0QXV0aCwgaW5pdGlhbGl6ZUF1dGggfSBmcm9tIFwiQGFuZ3VsYXIvZmlyZS9hdXRoXCI7XG5pbXBvcnQgeyBpbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlIH0gZnJvbSBcImZpcmViYXNlL2F1dGhcIjtcbmltcG9ydCB7IHByb3ZpZGVTdG9yYWdlLCBnZXRTdG9yYWdlIH0gZnJvbSBcIkBhbmd1bGFyL2ZpcmUvc3RvcmFnZVwiO1xuaW1wb3J0IHsgcHJvdmlkZU1lc3NhZ2luZywgZ2V0TWVzc2FnaW5nIH0gZnJvbSBcIkBhbmd1bGFyL2ZpcmUvbWVzc2FnaW5nXCI7XG5pbXBvcnQgeyBnZXRBbmFseXRpY3MsIHByb3ZpZGVBbmFseXRpY3MgfSBmcm9tIFwiQGFuZ3VsYXIvZmlyZS9hbmFseXRpY3NcIjtcblxuLy8gTU9EQUxzXG4vLyBpbXBvcnQgeyBPbmJvYXJkaW5nUGFnZSB9IGZyb20gXCIuL3BhZ2VzL29uYm9hcmRpbmcvb25ib2FyZGluZy5wYWdlXCI7XG5pbXBvcnQgeyBOZXdzRGV0YWlsUGFnZSB9IGZyb20gXCIuL3BhZ2VzL25ld3MvbmV3cy1kZXRhaWwvbmV3cy1kZXRhaWwucGFnZVwiO1xuaW1wb3J0IHsgTWVtYmVyUGFnZSB9IGZyb20gXCIuL3BhZ2VzL21lbWJlci9tZW1iZXIucGFnZVwiO1xuaW1wb3J0IHsgSGVsZmVyUHVua3RlUGFnZSB9IGZyb20gXCIuL3BhZ2VzL2hlbGZlci9oZWxmZXItcHVua3RlL2hlbGZlci1wdW5rdGUucGFnZVwiO1xuLy8gaW1wb3J0IHsgQ2hhbXBpb25zaGlwRGV0YWlsUGFnZSB9IGZyb20gXCIuL3BhZ2VzL2NoYW1waW9uc2hpcC9jaGFtcGlvbnNoaXAtZGV0YWlsL2NoYW1waW9uc2hpcC1kZXRhaWwucGFnZVwiO1xuaW1wb3J0IHsgVHJhaW5pbmdEZXRhaWxQYWdlIH0gZnJvbSBcIi4vcGFnZXMvdHJhaW5pbmcvdHJhaW5pbmctZGV0YWlsL3RyYWluaW5nLWRldGFpbC5wYWdlXCI7XG5pbXBvcnQgeyBUcmFpbmluZ0NyZWF0ZVBhZ2UgfSBmcm9tIFwiLi9wYWdlcy90cmFpbmluZy90cmFpbmluZy1jcmVhdGUvdHJhaW5pbmctY3JlYXRlLnBhZ2VcIjtcbmltcG9ydCB7IFRyYWluaW5nRXhlcmNpc2VzUGFnZSB9IGZyb20gXCIuL3BhZ2VzL3RyYWluaW5nL3RyYWluaW5nLWV4ZXJjaXNlcy90cmFpbmluZy1leGVyY2lzZXMucGFnZVwiO1xuaW1wb3J0IHsgRXZlbnRBZGRQYWdlIH0gZnJvbSBcIi4vcGFnZXMvZXZlbnQvZXZlbnQtYWRkL2V2ZW50LWFkZC5wYWdlXCI7XG5pbXBvcnQgeyBFdmVudERldGFpbFBhZ2UgfSBmcm9tIFwiLi9wYWdlcy9ldmVudC9ldmVudC1kZXRhaWwvZXZlbnQtZGV0YWlsLnBhZ2VcIjtcbmltcG9ydCB7IENsdWJQYWdlIH0gZnJvbSBcIi4vcGFnZXMvY2x1Yi9jbHViLnBhZ2VcIjtcbmltcG9ydCB7IFRlYW1QYWdlIH0gZnJvbSBcIi4vcGFnZXMvdGVhbS90ZWFtLWRldGFpbC90ZWFtLnBhZ2VcIjtcbmltcG9ydCB7IENhcGFjaXRvciB9IGZyb20gXCJAY2FwYWNpdG9yL2NvcmVcIjtcbmltcG9ydCB7IFRyYW5zbGF0ZU1vZHVsZSwgVHJhbnNsYXRlTG9hZGVyLCBNaXNzaW5nVHJhbnNsYXRpb25IYW5kbGVyLCBNaXNzaW5nVHJhbnNsYXRpb25IYW5kbGVyUGFyYW1zIH0gZnJvbSBcIkBuZ3gtdHJhbnNsYXRlL2NvcmVcIjtcbmltcG9ydCB7IFRyYW5zbGF0ZVNlcnZpY2UgfSBmcm9tICdAbmd4LXRyYW5zbGF0ZS9jb3JlJztcbmltcG9ydCB7IExPQ0FUSU9OX0lOSVRJQUxJWkVEIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcblxuaW1wb3J0IHsgVHJhbnNsYXRlSHR0cExvYWRlciB9IGZyb20gXCJAbmd4LXRyYW5zbGF0ZS9odHRwLWxvYWRlclwiO1xuaW1wb3J0IHsgSGVsZmVyRGV0YWlsUGFnZSB9IGZyb20gXCIuL3BhZ2VzL2hlbGZlci9oZWxmZXItZGV0YWlsL2hlbGZlci1kZXRhaWwucGFnZVwiO1xuaW1wb3J0IHsgSGVsZmVyQWRkUGFnZSB9IGZyb20gXCIuL3BhZ2VzL2hlbGZlci9oZWxmZXItYWRkL2hlbGZlci1hZGQucGFnZVwiO1xuaW1wb3J0IHsgQ2x1Yk1lbWJlckxpc3RQYWdlIH0gZnJvbSBcIi4vcGFnZXMvY2x1Yi1tZW1iZXItbGlzdC9jbHViLW1lbWJlci1saXN0LnBhZ2VcIjtcbmltcG9ydCB7IFRlYW1NZW1iZXJMaXN0UGFnZSB9IGZyb20gXCIuL3BhZ2VzL3RlYW0tbWVtYmVyLWxpc3QvdGVhbS1tZW1iZXItbGlzdC5wYWdlXCI7XG5pbXBvcnQgeyBDbHViQWRtaW5MaXN0UGFnZSB9IGZyb20gXCIuL3BhZ2VzL2NsdWItYWRtaW4tbGlzdC9jbHViLWFkbWluLWxpc3QucGFnZVwiO1xuaW1wb3J0IHsgVGVhbUFkbWluTGlzdFBhZ2UgfSBmcm9tIFwiLi9wYWdlcy90ZWFtLWFkbWluLWxpc3QvdGVhbS1hZG1pbi1saXN0LnBhZ2VcIjtcbmltcG9ydCB7IENsdWJUZWFtTGlzdFBhZ2UgfSBmcm9tIFwiLi9wYWdlcy9jbHViLXRlYW0tbGlzdC9jbHViLXRlYW0tbGlzdC5wYWdlXCI7XG5pbXBvcnQgeyBUZWFtRXhlcmNpc2VzUGFnZSB9IGZyb20gXCIuL3BhZ2VzL3RlYW0vdGVhbS1leGVyY2lzZXMvdGVhbS1leGVyY2lzZXMucGFnZVwiO1xuaW1wb3J0IHsgQ2x1YlJlcXVlc3RMaXN0UGFnZSB9IGZyb20gXCIuL3BhZ2VzL2NsdWItcmVxdWVzdC1saXN0L2NsdWItcmVxdWVzdC1saXN0LnBhZ2VcIjtcbmltcG9ydCB7IFRlYW1DcmVhdGVQYWdlIH0gZnJvbSBcIi4vcGFnZXMvdGVhbS90ZWFtLWNyZWF0ZS90ZWFtLWNyZWF0ZS5wYWdlXCI7XG5pbXBvcnQgeyB0YWtlIH0gZnJvbSBcInJ4anNcIjtcbmltcG9ydCB7IEhlbGZlclB1bmt0ZUNsdWJQYWdlIH0gZnJvbSBcIi4vcGFnZXMvaGVsZmVyL2hlbGZlci1wdW5rdGUtY2x1Yi9oZWxmZXItcHVua3RlLWNsdWIucGFnZVwiO1xuaW1wb3J0IHsgQ2x1YlN1YnNjcmlwdGlvblBhZ2UgfSBmcm9tIFwiLi9wYWdlcy9jbHViLXN1YnNjcmlwdGlvbi9jbHViLXN1YnNjcmlwdGlvbi5wYWdlXCI7XG5pbXBvcnQgeyBHYW1lUHJldmlld1BhZ2UgfSBmcm9tIFwiLi9wYWdlcy9jaGFtcGlvbnNoaXAvZ2FtZS1wcmV2aWV3L2dhbWUtcHJldmlldy5wYWdlXCI7XG5pbXBvcnQgeyBOb3RpZmljYXRpb25QYWdlIH0gZnJvbSBcIi4vcGFnZXMvbmV3cy9ub3RpZmljYXRpb24vbm90aWZpY2F0aW9uLnBhZ2VcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIEh0dHBMb2FkZXJGYWN0b3J5KGh0dHBDbGllbnQ6IEh0dHBDbGllbnQpIHtcbiAgcmV0dXJuIG5ldyBUcmFuc2xhdGVIdHRwTG9hZGVyKGh0dHBDbGllbnQsIFwiLi9hc3NldHMvbGFuZy9cIiwgXCIuanNvblwiKTtcbn1cbmV4cG9ydCBjbGFzcyBUcmFuc2xhdGVIYW5kbGVyIGltcGxlbWVudHMgTWlzc2luZ1RyYW5zbGF0aW9uSGFuZGxlciB7XG4gIGhhbmRsZShwYXJhbXM6IE1pc3NpbmdUcmFuc2xhdGlvbkhhbmRsZXJQYXJhbXMpIHtcbiAgICAvKiBzb21lIGxvZ2ljICovXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFwcEluaXRpYWxpemVyRmFjdG9yeSh0cmFuc2xhdGVTZXJ2aWNlOiBUcmFuc2xhdGVTZXJ2aWNlLCBpbmplY3RvcjogSW5qZWN0b3IpOiAoKSA9PiBQcm9taXNlPGFueT4ge1xuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tYW55XG4gIHJldHVybiAoKSA9PiBuZXcgUHJvbWlzZTxhbnk+KChyZXNvbHZlOiBhbnkpID0+IHtcbiAgICBjb25zdCBsb2NhdGlvbkluaXRpYWxpemVkID0gaW5qZWN0b3IuZ2V0KExPQ0FUSU9OX0lOSVRJQUxJWkVELCBQcm9taXNlLnJlc29sdmUobnVsbCkpO1xuICAgIGxvY2F0aW9uSW5pdGlhbGl6ZWQudGhlbigoKSA9PiB7XG4gICAgICB0cmFuc2xhdGVTZXJ2aWNlLnVzZShcImRlXCIpXG4gICAgICAgIC8vIGhlcmUgdSBjYW4gY2hhbmdlIGxhbmd1YWdlIGxvYWRlZCBiZWZvcmUgcmVhbmRlciBlbnl0aGluZ1xuICAgICAgICAucGlwZSh0YWtlKDEpKVxuICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHsgfSxcbiAgICAgICAgICBlcnIgPT4gY29uc29sZS5lcnJvcihlcnIpLCAoKSA9PiByZXNvbHZlKG51bGwpKTtcbiAgICB9KVxuXG4gIH0pO1xufVxuIGNvbnN0IGdldENvbmZpZyA9ICgpID0+IHtcbiAgbGV0IGNvbmZpZyA9IHsgfTtcbiAgaWYgKGlzUGxhdGZvcm0oJ2lwaG9uZScpKSB7XG4gICAvLyBjb25maWdbXCJiYWNrQnV0dG9uVGV4dFwiXSA9ICdQcmV2aW91cyc7XG4gIH1cbiAgcmV0dXJuIGNvbmZpZztcbn07XG5cbkBOZ01vZHVsZSh7XG4gIGRlY2xhcmF0aW9uczogW1xuICAgIEFwcENvbXBvbmVudCxcbiAgICBOZXdzRGV0YWlsUGFnZSxcbiAgICBOb3RpZmljYXRpb25QYWdlLFxuICAgIE1lbWJlclBhZ2UsXG4gICAgSGVsZmVyUHVua3RlUGFnZSxcbiAgICBIZWxmZXJQdW5rdGVDbHViUGFnZSxcbiAgICBIZWxmZXJEZXRhaWxQYWdlLFxuICAgIEhlbGZlckFkZFBhZ2UsXG4gICAgLy8gQ2hhbXBpb25zaGlwRGV0YWlsUGFnZSxcbiAgICBUcmFpbmluZ0V4ZXJjaXNlc1BhZ2UsXG4gICAgVHJhaW5pbmdEZXRhaWxQYWdlLFxuICAgIFRyYWluaW5nQ3JlYXRlUGFnZSxcbiAgICBHYW1lUHJldmlld1BhZ2UsXG4gICAgRXZlbnRBZGRQYWdlLFxuICAgIEV2ZW50RGV0YWlsUGFnZSxcbiAgICAvLyBPbmJvYXJkaW5nUGFnZSxcbiAgICBDbHViUGFnZSxcbiAgICBDbHViTWVtYmVyTGlzdFBhZ2UsXG4gICAgQ2x1YkFkbWluTGlzdFBhZ2UsXG4gICAgQ2x1YlRlYW1MaXN0UGFnZSxcbiAgICBDbHViUmVxdWVzdExpc3RQYWdlLFxuICAgIENsdWJTdWJzY3JpcHRpb25QYWdlLFxuICAgIFRlYW1QYWdlLFxuICAgIFRlYW1NZW1iZXJMaXN0UGFnZSxcbiAgICBUZWFtQWRtaW5MaXN0UGFnZSxcbiAgICBUZWFtRXhlcmNpc2VzUGFnZSxcbiAgICBUZWFtQ3JlYXRlUGFnZSxcbiAgXSxcbiAgYm9vdHN0cmFwOiBbQXBwQ29tcG9uZW50XSxcbiAgc2NoZW1hczogW0NVU1RPTV9FTEVNRU5UU19TQ0hFTUFdLFxuICBpbXBvcnRzOiBbXG4gICAgQnJvd3Nlck1vZHVsZSxcbiAgICBGb250QXdlc29tZU1vZHVsZSxcbiAgICBJb25pY01vZHVsZS5mb3JSb290KGdldENvbmZpZygpKSxcbiAgICBBcHBSb3V0aW5nTW9kdWxlLFxuICAgIEZvcm1zTW9kdWxlLFxuICAgIFNlcnZpY2VXb3JrZXJNb2R1bGUucmVnaXN0ZXIoXCJuZ3N3LXdvcmtlci5qc1wiLCB7XG4gICAgICBlbmFibGVkOiBlbnZpcm9ubWVudC5wcm9kdWN0aW9uLFxuICAgICAgLy8gUmVnaXN0ZXIgdGhlIFNlcnZpY2VXb3JrZXIgYXMgc29vbiBhcyB0aGUgYXBwIGlzIHN0YWJsZVxuICAgICAgLy8gb3IgYWZ0ZXIgMzAgc2Vjb25kcyAod2hpY2hldmVyIGNvbWVzIGZpcnN0KS5cbiAgICAgIHJlZ2lzdHJhdGlvblN0cmF0ZWd5OiBcInJlZ2lzdGVyV2hlblN0YWJsZTozMDAwMFwiLFxuICAgIH0pLFxuICAgIFRyYW5zbGF0ZU1vZHVsZS5mb3JSb290KHtcbiAgICAgIGxvYWRlcjoge1xuICAgICAgICBwcm92aWRlOiBUcmFuc2xhdGVMb2FkZXIsXG4gICAgICAgIHVzZUZhY3Rvcnk6IChIdHRwTG9hZGVyRmFjdG9yeSksXG4gICAgICAgIGRlcHM6IFtIdHRwQ2xpZW50XVxuICAgICAgfSxcbiAgICAgIGlzb2xhdGU6IGZhbHNlLFxuICAgICAgbWlzc2luZ1RyYW5zbGF0aW9uSGFuZGxlcjogW3sgcHJvdmlkZTogTWlzc2luZ1RyYW5zbGF0aW9uSGFuZGxlciwgdXNlQ2xhc3M6IFRyYW5zbGF0ZUhhbmRsZXIgfV1cbiAgICB9KSxcblxuXG4gIF0sXG4gIHByb3ZpZGVyczogW1xuICAgIHByb3ZpZGVGaXJlYmFzZUFwcCgoKSA9PiB7XG4gICAgICBjb25zdCBpbml0ID0gaW5pdGlhbGl6ZUFwcChlbnZpcm9ubWVudC5maXJlYmFzZSk7XG4gICAgICByZXR1cm4gaW5pdDtcbiAgICB9KSxcbiAgICBwcm92aWRlRmlyZXN0b3JlKCgpID0+IHtcbiAgICAgIGNvbnN0IGZpcmVzdG9yZSA9IGdldEZpcmVzdG9yZSgpO1xuICAgICAgcmV0dXJuIGZpcmVzdG9yZTtcbiAgICB9KSxcbiAgICBwcm92aWRlQXV0aCgoKSA9PiB7XG4gICAgICBpZiAoQ2FwYWNpdG9yLmlzTmF0aXZlUGxhdGZvcm0oKSkge1xuICAgICAgICByZXR1cm4gaW5pdGlhbGl6ZUF1dGgoZ2V0QXBwKCksIHtcbiAgICAgICAgICBwZXJzaXN0ZW5jZTogaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGdldEF1dGgoKTtcbiAgICAgIH1cbiAgICAgIC8vIGNvbnN0IGF1dGggPSBnZXRBdXRoKCk7XG4gICAgICAvLyBzZXRQZXJzaXN0ZW5jZShhdXRoLGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UpO1xuICAgICAgLy8gcmV0dXJuIGF1dGg7XG4gICAgfSksXG4gICAgcHJvdmlkZUFuYWx5dGljcygoKSA9PiBnZXRBbmFseXRpY3MoKSksXG4gICAgcHJvdmlkZVN0b3JhZ2UoKCkgPT4gZ2V0U3RvcmFnZSgpKSxcbiAgICBwcm92aWRlTWVzc2FnaW5nKCgpID0+IGdldE1lc3NhZ2luZygpKSxcblxuICAgIHsgcHJvdmlkZTogUm91dGVSZXVzZVN0cmF0ZWd5LCB1c2VDbGFzczogSW9uaWNSb3V0ZVN0cmF0ZWd5IH0sIHtcbiAgICAgIHByb3ZpZGU6IEFQUF9JTklUSUFMSVpFUixcbiAgICAgIHVzZUZhY3Rvcnk6IGFwcEluaXRpYWxpemVyRmFjdG9yeSxcbiAgICAgIGRlcHM6IFtUcmFuc2xhdGVTZXJ2aWNlLCBJbmplY3Rvcl0sXG4gICAgICBtdWx0aTogdHJ1ZVxuICAgIH0sIHByb3ZpZGVIdHRwQ2xpZW50KHdpdGhJbnRlcmNlcHRvcnNGcm9tRGkoKSldXG59KVxuZXhwb3J0IGNsYXNzIEFwcE1vZHVsZSB7IH1cblxuXG4iLCJpbXBvcnQgeyBwIGFzIHByb21pc2VSZXNvbHZlLCBiIGFzIGJvb3RzdHJhcExhenkgfSBmcm9tICcuL2luZGV4LTFjNWM0N2I0LmpzJztcbmV4cG9ydCB7IHMgYXMgc2V0Tm9uY2UgfSBmcm9tICcuL2luZGV4LTFjNWM0N2I0LmpzJztcblxuLypcbiBTdGVuY2lsIENsaWVudCBQYXRjaCBFc20gdjMuNC4wIHwgTUlUIExpY2Vuc2VkIHwgaHR0cHM6Ly9zdGVuY2lsanMuY29tXG4gKi9cbmNvbnN0IHBhdGNoRXNtID0gKCkgPT4ge1xuICByZXR1cm4gcHJvbWlzZVJlc29sdmUoKTtcbn07XG5jb25zdCBkZWZpbmVDdXN0b21FbGVtZW50cyA9ICh3aW4sIG9wdGlvbnMpID0+IHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIHJldHVybiBwYXRjaEVzbSgpLnRoZW4oKCkgPT4ge1xuICAgIHJldHVybiBib290c3RyYXBMYXp5KFtbXCJwd2EtY2FtZXJhLW1vZGFsXCIsIFtbMSwgXCJwd2EtY2FtZXJhLW1vZGFsXCIsIHtcbiAgICAgIFwiZmFjaW5nTW9kZVwiOiBbMSwgXCJmYWNpbmctbW9kZVwiXSxcbiAgICAgIFwiaGlkZVBpY2tlclwiOiBbNCwgXCJoaWRlLXBpY2tlclwiXSxcbiAgICAgIFwicHJlc2VudFwiOiBbNjRdLFxuICAgICAgXCJkaXNtaXNzXCI6IFs2NF1cbiAgICB9XV1dLCBbXCJwd2EtYWN0aW9uLXNoZWV0XCIsIFtbMSwgXCJwd2EtYWN0aW9uLXNoZWV0XCIsIHtcbiAgICAgIFwiaGVhZGVyXCI6IFsxXSxcbiAgICAgIFwiY2FuY2VsYWJsZVwiOiBbNF0sXG4gICAgICBcIm9wdGlvbnNcIjogWzE2XSxcbiAgICAgIFwib3BlblwiOiBbMzJdXG4gICAgfV1dXSwgW1wicHdhLXRvYXN0XCIsIFtbMSwgXCJwd2EtdG9hc3RcIiwge1xuICAgICAgXCJtZXNzYWdlXCI6IFsxXSxcbiAgICAgIFwiZHVyYXRpb25cIjogWzJdLFxuICAgICAgXCJjbG9zaW5nXCI6IFszMl1cbiAgICB9XV1dLCBbXCJwd2EtY2FtZXJhXCIsIFtbMSwgXCJwd2EtY2FtZXJhXCIsIHtcbiAgICAgIFwiZmFjaW5nTW9kZVwiOiBbMSwgXCJmYWNpbmctbW9kZVwiXSxcbiAgICAgIFwiaGFuZGxlUGhvdG9cIjogWzE2XSxcbiAgICAgIFwiaGlkZVBpY2tlclwiOiBbNCwgXCJoaWRlLXBpY2tlclwiXSxcbiAgICAgIFwiaGFuZGxlTm9EZXZpY2VFcnJvclwiOiBbMTZdLFxuICAgICAgXCJub0RldmljZXNUZXh0XCI6IFsxLCBcIm5vLWRldmljZXMtdGV4dFwiXSxcbiAgICAgIFwibm9EZXZpY2VzQnV0dG9uVGV4dFwiOiBbMSwgXCJuby1kZXZpY2VzLWJ1dHRvbi10ZXh0XCJdLFxuICAgICAgXCJwaG90b1wiOiBbMzJdLFxuICAgICAgXCJwaG90b1NyY1wiOiBbMzJdLFxuICAgICAgXCJzaG93U2h1dHRlck92ZXJsYXlcIjogWzMyXSxcbiAgICAgIFwiZmxhc2hJbmRleFwiOiBbMzJdLFxuICAgICAgXCJoYXNDYW1lcmFcIjogWzMyXSxcbiAgICAgIFwicm90YXRpb25cIjogWzMyXSxcbiAgICAgIFwiZGV2aWNlRXJyb3JcIjogWzMyXVxuICAgIH1dXV0sIFtcInB3YS1jYW1lcmEtbW9kYWwtaW5zdGFuY2VcIiwgW1sxLCBcInB3YS1jYW1lcmEtbW9kYWwtaW5zdGFuY2VcIiwge1xuICAgICAgXCJmYWNpbmdNb2RlXCI6IFsxLCBcImZhY2luZy1tb2RlXCJdLFxuICAgICAgXCJoaWRlUGlja2VyXCI6IFs0LCBcImhpZGUtcGlja2VyXCJdLFxuICAgICAgXCJub0RldmljZXNUZXh0XCI6IFsxLCBcIm5vLWRldmljZXMtdGV4dFwiXSxcbiAgICAgIFwibm9EZXZpY2VzQnV0dG9uVGV4dFwiOiBbMSwgXCJuby1kZXZpY2VzLWJ1dHRvbi10ZXh0XCJdXG4gICAgfSwgW1sxNiwgXCJrZXl1cFwiLCBcImhhbmRsZUJhY2tkcm9wS2V5VXBcIl1dXV1dXSwgb3B0aW9ucyk7XG4gIH0pO1xufTtcbmV4cG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnRzIH07IiwiaW1wb3J0IHsgcCBhcyBwcm9taXNlUmVzb2x2ZSwgYiBhcyBib290c3RyYXBMYXp5IH0gZnJvbSAnLi9pbmRleC1mOTM3ZWYxOC5qcyc7XG5cbi8qXG4gU3RlbmNpbCBDbGllbnQgUGF0Y2ggRXNtIHYyLjE3LjQgfCBNSVQgTGljZW5zZWQgfCBodHRwczovL3N0ZW5jaWxqcy5jb21cbiAqL1xuY29uc3QgcGF0Y2hFc20gPSAoKSA9PiB7XG4gIHJldHVybiBwcm9taXNlUmVzb2x2ZSgpO1xufTtcbmNvbnN0IGRlZmluZUN1c3RvbUVsZW1lbnRzID0gKHdpbiwgb3B0aW9ucykgPT4ge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgcmV0dXJuIHBhdGNoRXNtKCkudGhlbigoKSA9PiB7XG4gICAgcmV0dXJuIGJvb3RzdHJhcExhenkoW1tcIndlYi1zb2NpYWwtc2hhcmVcIiwgW1sxLCBcIndlYi1zb2NpYWwtc2hhcmVcIiwge1xuICAgICAgXCJzaG93XCI6IFsxMDI4XSxcbiAgICAgIFwic2hhcmVcIjogWzE2XVxuICAgIH1dXV1dLCBvcHRpb25zKTtcbiAgfSk7XG59O1xuZXhwb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudHMgfTsiLCJjb25zdCBnbG9iYWxTY3JpcHRzID0gKCkgPT4ge307XG5leHBvcnQgeyBnbG9iYWxTY3JpcHRzIGFzIGcgfTtcblxuIiwiaW1wb3J0IHsgYiBhcyBib290c3RyYXBMYXp5IH0gZnJvbSAnLi9pbmRleC1lMjk2NzQzMS5qcyc7XG5leHBvcnQgeyBzIGFzIHNldE5vbmNlIH0gZnJvbSAnLi9pbmRleC1lMjk2NzQzMS5qcyc7XG5pbXBvcnQgeyBnIGFzIGdsb2JhbFNjcmlwdHMgfSBmcm9tICcuL2FwcC1nbG9iYWxzLTBmOTkzY2U1LmpzJztcbmNvbnN0IGRlZmluZUN1c3RvbUVsZW1lbnRzID0gYXN5bmMgKHdpbiwgb3B0aW9ucykgPT4ge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB1bmRlZmluZWQ7XG4gIGF3YWl0IGdsb2JhbFNjcmlwdHMoKTtcbiAgcmV0dXJuIGJvb3RzdHJhcExhenkoW1tcImdhbWUtcHJldmlld1wiLCBbWzEsIFwiZ2FtZS1wcmV2aWV3XCIsIHtcbiAgICBcImNsdWJcIjogWzFdLFxuICAgIFwiZ2FtZVwiOiBbMV0sXG4gICAgXCJuYW1lXCI6IFszMl0sXG4gICAgXCJ0ZWFtQXdheVwiOiBbMzJdLFxuICAgIFwidGVhbUF3YXlMb2dvXCI6IFszMl0sXG4gICAgXCJ0ZWFtSG9tZVwiOiBbMzJdLFxuICAgIFwidGVhbUhvbWVMb2dvXCI6IFszMl0sXG4gICAgXCJjaXR5XCI6IFszMl0sXG4gICAgXCJsb2NhdGlvblwiOiBbMzJdLFxuICAgIFwiZGF0ZVRpbWVcIjogWzMyXSxcbiAgICBcImRhdGVcIjogWzMyXSxcbiAgICBcInRpbWVcIjogWzMyXSxcbiAgICBcImxpZ2FcIjogWzMyXVxuICB9XV1dXSwgb3B0aW9ucyk7XG59O1xuZXhwb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudHMgfTtcblxuIiwiKGZ1bmN0aW9uICgpIHtcbiAgaWYgKFwidW5kZWZpbmVkXCIgIT09IHR5cGVvZiB3aW5kb3cgJiYgdm9pZCAwICE9PSB3aW5kb3cuUmVmbGVjdCAmJiB2b2lkIDAgIT09IHdpbmRvdy5jdXN0b21FbGVtZW50cykge1xuICAgIHZhciBhID0gSFRNTEVsZW1lbnQ7XG4gICAgd2luZG93LkhUTUxFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIFJlZmxlY3QuY29uc3RydWN0KGEsIFtdLCB0aGlzLmNvbnN0cnVjdG9yKTtcbiAgICB9O1xuICAgIEhUTUxFbGVtZW50LnByb3RvdHlwZSA9IGEucHJvdG90eXBlO1xuICAgIEhUTUxFbGVtZW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEhUTUxFbGVtZW50O1xuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihIVE1MRWxlbWVudCwgYSk7XG4gIH1cbn0pKCk7XG5leHBvcnQgKiBmcm9tICcuLi9kaXN0L2VzbS9sb2FkZXIuanMnOyIsIi8vLyA8cmVmZXJlbmNlIHR5cGVzPVwiQGFuZ3VsYXIvbG9jYWxpemVcIiAvPlxuXG5pbXBvcnQgeyBlbmFibGVQcm9kTW9kZSB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljIH0gZnJvbSBcIkBhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXItZHluYW1pY1wiO1xuXG5pbXBvcnQgeyBBcHBNb2R1bGUgfSBmcm9tIFwiLi9hcHAvYXBwLm1vZHVsZVwiO1xuaW1wb3J0IHsgZW52aXJvbm1lbnQgfSBmcm9tIFwiLi9lbnZpcm9ubWVudHMvZW52aXJvbm1lbnRcIjtcblxuaW1wb3J0IHsgZGVmaW5lQ3VzdG9tRWxlbWVudHMgfSBmcm9tIFwiQGlvbmljL3B3YS1lbGVtZW50cy9sb2FkZXJcIjtcbi8vIGltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnRzIGFzIGRlZmluZUN1c3RvbUVsZW1lbnRzR29vZ2xlTWFwcyB9IGZyb20gJ3dlYi1nb29nbGUtbWFwcy9kaXN0L2xvYWRlcic7XG5pbXBvcnQgeyBkZWZpbmVDdXN0b21FbGVtZW50cyBhcyBkZWZpbmVDdXN0b21FbGVtZW50c1NvY2lhbFNoYXJlIH0gZnJvbSBcIndlYi1zb2NpYWwtc2hhcmUvZGlzdC9sb2FkZXJcIjtcbmltcG9ydCB7IGRlZmluZUN1c3RvbUVsZW1lbnRzIGFzIGRlZmluZUN1c3RvbUVsZW1lbnRzQ3JlYXRlR2FtZVByZXZpZXcgfSBmcm9tIFwibXljbHViLWdhbWUtcHJldmlldy9sb2FkZXJcIlxuXG5pZiAoZW52aXJvbm1lbnQucHJvZHVjdGlvbikge1xuICBlbmFibGVQcm9kTW9kZSgpO1xufVxuXG5wbGF0Zm9ybUJyb3dzZXJEeW5hbWljKClcbiAgLmJvb3RzdHJhcE1vZHVsZShBcHBNb2R1bGUpXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcblxuLy8gQ2FsbCB0aGUgZWxlbWVudCBsb2FkZXIgYWZ0ZXIgdGhlIHBsYXRmb3JtIGhhcyBiZWVuIGJvb3RzdHJhcHBlZFxuZGVmaW5lQ3VzdG9tRWxlbWVudHMod2luZG93KTtcbmRlZmluZUN1c3RvbUVsZW1lbnRzU29jaWFsU2hhcmUod2luZG93KTtcbmRlZmluZUN1c3RvbUVsZW1lbnRzQ3JlYXRlR2FtZVByZXZpZXcod2luZG93KTtcbi8vIGRlZmluZUN1c3RvbUVsZW1lbnRzR29vZ2xlTWFwcyh3aW5kb3cpO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDTyxJQUFJO0FBQUEsQ0FDVixTQUFVQSxRQUFPO0FBTWhCLEVBQUFBLE9BQU0sTUFBTSxJQUFJO0FBTWhCLEVBQUFBLE9BQU0sT0FB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QUM7QUFHbEMscUJBQXFCLE1BQU07QUFDM0JDLHNCQUFnQyxNQUFNO0FBQ3RDQSxzQkFBc0MsTUFBTTsiLCJuYW1lcyI6WyJTdHlsZSIsIkFuaW1hdGlvbiIsIk1lc3NhZ2VUeXBlIiwiZGIiLCJpc1N1cHBvcnRlZCIsImRlbGV0ZVRva2VuIiwiZ2V0VG9rZW4iLCJpc1N1cHBvcnRlZCIsIm9uTWVzc2FnZSIsImdldEFuYWx5dGljcyIsImdldEdvb2dsZUFuYWx5dGljc0NsaWVudElkIiwiaW5pdGlhbGl6ZUFuYWx5dGljcyIsImlzU3VwcG9ydGVkIiwibG9nRXZlbnQiLCJzZXRBbmFseXRpY3NDb2xsZWN0aW9uRW5hYmxlZCIsInNldENvbnNlbnQiLCJzZXRDdXJyZW50U2NyZWVuIiwic2V0RGVmYXVsdEV2ZW50UGFyYW1ldGVycyIsInNldFVzZXJJZCIsInNldFVzZXJQcm9wZXJ0aWVzIiwic2V0dGluZ3MiLCJfYSIsImdldEFwcCIsImdldEFuYWx5dGljcyIsInBhdGNoRXNtIiwicHJvbWlzZVJlc29sdmUiLCJkZWZpbmVDdXN0b21FbGVtZW50cyIsImJvb3RzdHJhcExhenkiLCJkZWZpbmVDdXN0b21FbGVtZW50cyIsImJvb3RzdHJhcExhenkiLCJkZWZpbmVDdXN0b21FbGVtZW50cyJdLCJ4X2dvb2dsZV9pZ25vcmVMaXN0IjpbMCwxLDIsMyw0LDUsNiwxMCwxMSwxMiwxMywxNywxOCwxOSwyMCwyMV19
