import "./chunk-LQ2EECYJ.js";

// node_modules/@googlemaps/js-api-loader/dist/index.mjs
function __awaiter(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
}
function getDefaultExportFromCjs(x) {
  return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, "default") ? x["default"] : x;
}
var fastDeepEqual = function equal(a, b) {
  if (a === b) return true;
  if (a && b && typeof a == "object" && typeof b == "object") {
    if (a.constructor !== b.constructor) return false;
    var length, i, keys;
    if (Array.isArray(a)) {
      length = a.length;
      if (length != b.length) return false;
      for (i = length; i-- !== 0; ) if (!equal(a[i], b[i])) return false;
      return true;
    }
    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;
    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();
    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();
    keys = Object.keys(a);
    length = keys.length;
    if (length !== Object.keys(b).length) return false;
    for (i = length; i-- !== 0; ) if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;
    for (i = length; i-- !== 0; ) {
      var key = keys[i];
      if (!equal(a[key], b[key])) return false;
    }
    return true;
  }
  return a !== a && b !== b;
};
var isEqual = /* @__PURE__ */ getDefaultExportFromCjs(fastDeepEqual);
var DEFAULT_ID = "__googleMapsScriptId";
var LoaderStatus;
(function(LoaderStatus2) {
  LoaderStatus2[LoaderStatus2["INITIALIZED"] = 0] = "INITIALIZED";
  LoaderStatus2[LoaderStatus2["LOADING"] = 1] = "LOADING";
  LoaderStatus2[LoaderStatus2["SUCCESS"] = 2] = "SUCCESS";
  LoaderStatus2[LoaderStatus2["FAILURE"] = 3] = "FAILURE";
})(LoaderStatus || (LoaderStatus = {}));
var Loader = class _Loader {
  /**
   * Creates an instance of Loader using [[LoaderOptions]]. No defaults are set
   * using this library, instead the defaults are set by the Google Maps
   * JavaScript API server.
   *
   * ```
   * const loader = Loader({apiKey, version: 'weekly', libraries: ['places']});
   * ```
   */
  constructor({
    apiKey,
    authReferrerPolicy,
    channel,
    client,
    id = DEFAULT_ID,
    language,
    libraries = [],
    mapIds,
    nonce,
    region,
    retries = 3,
    url = "https://maps.googleapis.com/maps/api/js",
    version
  }) {
    this.callbacks = [];
    this.done = false;
    this.loading = false;
    this.errors = [];
    this.apiKey = apiKey;
    this.authReferrerPolicy = authReferrerPolicy;
    this.channel = channel;
    this.client = client;
    this.id = id || DEFAULT_ID;
    this.language = language;
    this.libraries = libraries;
    this.mapIds = mapIds;
    this.nonce = nonce;
    this.region = region;
    this.retries = retries;
    this.url = url;
    this.version = version;
    if (_Loader.instance) {
      if (!isEqual(this.options, _Loader.instance.options)) {
        throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(_Loader.instance.options)}`);
      }
      return _Loader.instance;
    }
    _Loader.instance = this;
  }
  get options() {
    return {
      version: this.version,
      apiKey: this.apiKey,
      channel: this.channel,
      client: this.client,
      id: this.id,
      libraries: this.libraries,
      language: this.language,
      region: this.region,
      mapIds: this.mapIds,
      nonce: this.nonce,
      url: this.url,
      authReferrerPolicy: this.authReferrerPolicy
    };
  }
  get status() {
    if (this.errors.length) {
      return LoaderStatus.FAILURE;
    }
    if (this.done) {
      return LoaderStatus.SUCCESS;
    }
    if (this.loading) {
      return LoaderStatus.LOADING;
    }
    return LoaderStatus.INITIALIZED;
  }
  get failed() {
    return this.done && !this.loading && this.errors.length >= this.retries + 1;
  }
  /**
   * CreateUrl returns the Google Maps JavaScript API script url given the [[LoaderOptions]].
   *
   * @ignore
   * @deprecated
   */
  createUrl() {
    let url = this.url;
    url += `?callback=__googleMapsCallback&loading=async`;
    if (this.apiKey) {
      url += `&key=${this.apiKey}`;
    }
    if (this.channel) {
      url += `&channel=${this.channel}`;
    }
    if (this.client) {
      url += `&client=${this.client}`;
    }
    if (this.libraries.length > 0) {
      url += `&libraries=${this.libraries.join(",")}`;
    }
    if (this.language) {
      url += `&language=${this.language}`;
    }
    if (this.region) {
      url += `&region=${this.region}`;
    }
    if (this.version) {
      url += `&v=${this.version}`;
    }
    if (this.mapIds) {
      url += `&map_ids=${this.mapIds.join(",")}`;
    }
    if (this.authReferrerPolicy) {
      url += `&auth_referrer_policy=${this.authReferrerPolicy}`;
    }
    return url;
  }
  deleteScript() {
    const script = document.getElementById(this.id);
    if (script) {
      script.remove();
    }
  }
  /**
   * Load the Google Maps JavaScript API script and return a Promise.
   * @deprecated, use importLibrary() instead.
   */
  load() {
    return this.loadPromise();
  }
  /**
   * Load the Google Maps JavaScript API script and return a Promise.
   *
   * @ignore
   * @deprecated, use importLibrary() instead.
   */
  loadPromise() {
    return new Promise((resolve, reject) => {
      this.loadCallback((err) => {
        if (!err) {
          resolve(window.google);
        } else {
          reject(err.error);
        }
      });
    });
  }
  importLibrary(name) {
    this.execute();
    return google.maps.importLibrary(name);
  }
  /**
   * Load the Google Maps JavaScript API script with a callback.
   * @deprecated, use importLibrary() instead.
   */
  loadCallback(fn) {
    this.callbacks.push(fn);
    this.execute();
  }
  /**
   * Set the script on document.
   */
  setScript() {
    var _a, _b;
    if (document.getElementById(this.id)) {
      this.callback();
      return;
    }
    const params = {
      key: this.apiKey,
      channel: this.channel,
      client: this.client,
      libraries: this.libraries.length && this.libraries,
      v: this.version,
      mapIds: this.mapIds,
      language: this.language,
      region: this.region,
      authReferrerPolicy: this.authReferrerPolicy
    };
    Object.keys(params).forEach(
      // eslint-disable-next-line @typescript-eslint/no-explicit-any
      (key) => !params[key] && delete params[key]
    );
    if (!((_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.maps) === null || _b === void 0 ? void 0 : _b.importLibrary)) {
      ((g) => {
        let h, a, k, p = "The Google Maps JavaScript API", c = "google", l = "importLibrary", q = "__ib__", m = document, b = window;
        b = b[c] || (b[c] = {});
        const d = b.maps || (b.maps = {}), r = /* @__PURE__ */ new Set(), e = new URLSearchParams(), u = () => (
          // @ts-ignore
          h || (h = new Promise((f, n) => __awaiter(this, void 0, void 0, function* () {
            var _a2;
            yield a = m.createElement("script");
            a.id = this.id;
            e.set("libraries", [...r] + "");
            for (k in g) e.set(k.replace(/[A-Z]/g, (t) => "_" + t[0].toLowerCase()), g[k]);
            e.set("callback", c + ".maps." + q);
            a.src = this.url + `?` + e;
            d[q] = f;
            a.onerror = () => h = n(Error(p + " could not load."));
            a.nonce = this.nonce || ((_a2 = m.querySelector("script[nonce]")) === null || _a2 === void 0 ? void 0 : _a2.nonce) || "";
            m.head.append(a);
          })))
        );
        d[l] ? console.warn(p + " only loads once. Ignoring:", g) : d[l] = (f, ...n) => r.add(f) && u().then(() => d[l](f, ...n));
      })(params);
    }
    const libraryPromises = this.libraries.map((library) => this.importLibrary(library));
    if (!libraryPromises.length) {
      libraryPromises.push(this.importLibrary("core"));
    }
    Promise.all(libraryPromises).then(() => this.callback(), (error) => {
      const event = new ErrorEvent("error", {
        error
      });
      this.loadErrorCallback(event);
    });
  }
  /**
   * Reset the loader state.
   */
  reset() {
    this.deleteScript();
    this.done = false;
    this.loading = false;
    this.errors = [];
    this.onerrorEvent = null;
  }
  resetIfRetryingFailed() {
    if (this.failed) {
      this.reset();
    }
  }
  loadErrorCallback(e) {
    this.errors.push(e);
    if (this.errors.length <= this.retries) {
      const delay = this.errors.length * Math.pow(2, this.errors.length);
      console.error(`Failed to load Google Maps script, retrying in ${delay} ms.`);
      setTimeout(() => {
        this.deleteScript();
        this.setScript();
      }, delay);
    } else {
      this.onerrorEvent = e;
      this.callback();
    }
  }
  callback() {
    this.done = true;
    this.loading = false;
    this.callbacks.forEach((cb) => {
      cb(this.onerrorEvent);
    });
    this.callbacks = [];
  }
  execute() {
    this.resetIfRetryingFailed();
    if (this.loading) {
      return;
    }
    if (this.done) {
      this.callback();
    } else {
      if (window.google && window.google.maps && window.google.maps.version) {
        console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match.");
        this.callback();
        return;
      }
      this.loading = true;
      this.setScript();
    }
  }
};
export {
  DEFAULT_ID,
  Loader,
  LoaderStatus
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9AZ29vZ2xlbWFwcy9qcy1hcGktbG9hZGVyL2Rpc3QvaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UsIFN1cHByZXNzZWRFcnJvciwgU3ltYm9sICovXG5cbmZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkge1xuICAgICAgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7XG4gICAgfVxuICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgfSk7XG59XG50eXBlb2YgU3VwcHJlc3NlZEVycm9yID09PSBcImZ1bmN0aW9uXCIgPyBTdXBwcmVzc2VkRXJyb3IgOiBmdW5jdGlvbiAoZXJyb3IsIHN1cHByZXNzZWQsIG1lc3NhZ2UpIHtcbiAgdmFyIGUgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG4gIHJldHVybiBlLm5hbWUgPSBcIlN1cHByZXNzZWRFcnJvclwiLCBlLmVycm9yID0gZXJyb3IsIGUuc3VwcHJlc3NlZCA9IHN1cHByZXNzZWQsIGU7XG59O1xuZnVuY3Rpb24gZ2V0RGVmYXVsdEV4cG9ydEZyb21DanMoeCkge1xuICByZXR1cm4geCAmJiB4Ll9fZXNNb2R1bGUgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHgsICdkZWZhdWx0JykgPyB4WydkZWZhdWx0J10gOiB4O1xufVxuXG4vLyBkbyBub3QgZWRpdCAuanMgZmlsZXMgZGlyZWN0bHkgLSBlZGl0IHNyYy9pbmRleC5qc3RcblxudmFyIGZhc3REZWVwRXF1YWwgPSBmdW5jdGlvbiBlcXVhbChhLCBiKSB7XG4gIGlmIChhID09PSBiKSByZXR1cm4gdHJ1ZTtcbiAgaWYgKGEgJiYgYiAmJiB0eXBlb2YgYSA9PSAnb2JqZWN0JyAmJiB0eXBlb2YgYiA9PSAnb2JqZWN0Jykge1xuICAgIGlmIChhLmNvbnN0cnVjdG9yICE9PSBiLmNvbnN0cnVjdG9yKSByZXR1cm4gZmFsc2U7XG4gICAgdmFyIGxlbmd0aCwgaSwga2V5cztcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhKSkge1xuICAgICAgbGVuZ3RoID0gYS5sZW5ndGg7XG4gICAgICBpZiAobGVuZ3RoICE9IGIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSAhPT0gMDspIGlmICghZXF1YWwoYVtpXSwgYltpXSkpIHJldHVybiBmYWxzZTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoYS5jb25zdHJ1Y3RvciA9PT0gUmVnRXhwKSByZXR1cm4gYS5zb3VyY2UgPT09IGIuc291cmNlICYmIGEuZmxhZ3MgPT09IGIuZmxhZ3M7XG4gICAgaWYgKGEudmFsdWVPZiAhPT0gT2JqZWN0LnByb3RvdHlwZS52YWx1ZU9mKSByZXR1cm4gYS52YWx1ZU9mKCkgPT09IGIudmFsdWVPZigpO1xuICAgIGlmIChhLnRvU3RyaW5nICE9PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKSByZXR1cm4gYS50b1N0cmluZygpID09PSBiLnRvU3RyaW5nKCk7XG4gICAga2V5cyA9IE9iamVjdC5rZXlzKGEpO1xuICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgIGlmIChsZW5ndGggIT09IE9iamVjdC5rZXlzKGIpLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOykgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwga2V5c1tpXSkpIHJldHVybiBmYWxzZTtcbiAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSAhPT0gMDspIHtcbiAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgaWYgKCFlcXVhbChhW2tleV0sIGJba2V5XSkpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyB0cnVlIGlmIGJvdGggTmFOLCBmYWxzZSBvdGhlcndpc2VcbiAgcmV0dXJuIGEgIT09IGEgJiYgYiAhPT0gYjtcbn07XG52YXIgaXNFcXVhbCA9IC8qQF9fUFVSRV9fKi9nZXREZWZhdWx0RXhwb3J0RnJvbUNqcyhmYXN0RGVlcEVxdWFsKTtcblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQuXG4gKlxuICogICAgICBIdHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAuXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgREVGQVVMVF9JRCA9IFwiX19nb29nbGVNYXBzU2NyaXB0SWRcIjtcbi8qKlxuICogVGhlIHN0YXR1cyBvZiB0aGUgW1tMb2FkZXJdXS5cbiAqL1xudmFyIExvYWRlclN0YXR1cztcbihmdW5jdGlvbiAoTG9hZGVyU3RhdHVzKSB7XG4gIExvYWRlclN0YXR1c1tMb2FkZXJTdGF0dXNbXCJJTklUSUFMSVpFRFwiXSA9IDBdID0gXCJJTklUSUFMSVpFRFwiO1xuICBMb2FkZXJTdGF0dXNbTG9hZGVyU3RhdHVzW1wiTE9BRElOR1wiXSA9IDFdID0gXCJMT0FESU5HXCI7XG4gIExvYWRlclN0YXR1c1tMb2FkZXJTdGF0dXNbXCJTVUNDRVNTXCJdID0gMl0gPSBcIlNVQ0NFU1NcIjtcbiAgTG9hZGVyU3RhdHVzW0xvYWRlclN0YXR1c1tcIkZBSUxVUkVcIl0gPSAzXSA9IFwiRkFJTFVSRVwiO1xufSkoTG9hZGVyU3RhdHVzIHx8IChMb2FkZXJTdGF0dXMgPSB7fSkpO1xuLyoqXG4gKiBbW0xvYWRlcl1dIG1ha2VzIGl0IGVhc2llciB0byBhZGQgR29vZ2xlIE1hcHMgSmF2YVNjcmlwdCBBUEkgdG8geW91ciBhcHBsaWNhdGlvblxuICogZHluYW1pY2FsbHkgdXNpbmdcbiAqIFtQcm9taXNlc10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvUHJvbWlzZSkuXG4gKiBJdCB3b3JrcyBieSBkeW5hbWljYWxseSBjcmVhdGluZyBhbmQgYXBwZW5kaW5nIGEgc2NyaXB0IG5vZGUgdG8gdGhlIHRoZVxuICogZG9jdW1lbnQgaGVhZCBhbmQgd3JhcHBpbmcgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHNvIGFzIHRvIHJldHVybiBhIHByb21pc2UuXG4gKlxuICogYGBgXG4gKiBjb25zdCBsb2FkZXIgPSBuZXcgTG9hZGVyKHtcbiAqICAgYXBpS2V5OiBcIlwiLFxuICogICB2ZXJzaW9uOiBcIndlZWtseVwiLFxuICogICBsaWJyYXJpZXM6IFtcInBsYWNlc1wiXVxuICogfSk7XG4gKlxuICogbG9hZGVyLmxvYWQoKS50aGVuKChnb29nbGUpID0+IHtcbiAqICAgY29uc3QgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcCguLi4pXG4gKiB9KVxuICogYGBgXG4gKi9cbmNsYXNzIExvYWRlciB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIExvYWRlciB1c2luZyBbW0xvYWRlck9wdGlvbnNdXS4gTm8gZGVmYXVsdHMgYXJlIHNldFxuICAgKiB1c2luZyB0aGlzIGxpYnJhcnksIGluc3RlYWQgdGhlIGRlZmF1bHRzIGFyZSBzZXQgYnkgdGhlIEdvb2dsZSBNYXBzXG4gICAqIEphdmFTY3JpcHQgQVBJIHNlcnZlci5cbiAgICpcbiAgICogYGBgXG4gICAqIGNvbnN0IGxvYWRlciA9IExvYWRlcih7YXBpS2V5LCB2ZXJzaW9uOiAnd2Vla2x5JywgbGlicmFyaWVzOiBbJ3BsYWNlcyddfSk7XG4gICAqIGBgYFxuICAgKi9cbiAgY29uc3RydWN0b3Ioe1xuICAgIGFwaUtleSxcbiAgICBhdXRoUmVmZXJyZXJQb2xpY3ksXG4gICAgY2hhbm5lbCxcbiAgICBjbGllbnQsXG4gICAgaWQgPSBERUZBVUxUX0lELFxuICAgIGxhbmd1YWdlLFxuICAgIGxpYnJhcmllcyA9IFtdLFxuICAgIG1hcElkcyxcbiAgICBub25jZSxcbiAgICByZWdpb24sXG4gICAgcmV0cmllcyA9IDMsXG4gICAgdXJsID0gXCJodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvanNcIixcbiAgICB2ZXJzaW9uXG4gIH0pIHtcbiAgICB0aGlzLmNhbGxiYWNrcyA9IFtdO1xuICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgIHRoaXMuZXJyb3JzID0gW107XG4gICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XG4gICAgdGhpcy5hdXRoUmVmZXJyZXJQb2xpY3kgPSBhdXRoUmVmZXJyZXJQb2xpY3k7XG4gICAgdGhpcy5jaGFubmVsID0gY2hhbm5lbDtcbiAgICB0aGlzLmNsaWVudCA9IGNsaWVudDtcbiAgICB0aGlzLmlkID0gaWQgfHwgREVGQVVMVF9JRDsgLy8gRG8gbm90IGFsbG93IGVtcHR5IHN0cmluZ1xuICAgIHRoaXMubGFuZ3VhZ2UgPSBsYW5ndWFnZTtcbiAgICB0aGlzLmxpYnJhcmllcyA9IGxpYnJhcmllcztcbiAgICB0aGlzLm1hcElkcyA9IG1hcElkcztcbiAgICB0aGlzLm5vbmNlID0gbm9uY2U7XG4gICAgdGhpcy5yZWdpb24gPSByZWdpb247XG4gICAgdGhpcy5yZXRyaWVzID0gcmV0cmllcztcbiAgICB0aGlzLnVybCA9IHVybDtcbiAgICB0aGlzLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgIGlmIChMb2FkZXIuaW5zdGFuY2UpIHtcbiAgICAgIGlmICghaXNFcXVhbCh0aGlzLm9wdGlvbnMsIExvYWRlci5pbnN0YW5jZS5vcHRpb25zKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYExvYWRlciBtdXN0IG5vdCBiZSBjYWxsZWQgYWdhaW4gd2l0aCBkaWZmZXJlbnQgb3B0aW9ucy4gJHtKU09OLnN0cmluZ2lmeSh0aGlzLm9wdGlvbnMpfSAhPT0gJHtKU09OLnN0cmluZ2lmeShMb2FkZXIuaW5zdGFuY2Uub3B0aW9ucyl9YCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gTG9hZGVyLmluc3RhbmNlO1xuICAgIH1cbiAgICBMb2FkZXIuaW5zdGFuY2UgPSB0aGlzO1xuICB9XG4gIGdldCBvcHRpb25zKCkge1xuICAgIHJldHVybiB7XG4gICAgICB2ZXJzaW9uOiB0aGlzLnZlcnNpb24sXG4gICAgICBhcGlLZXk6IHRoaXMuYXBpS2V5LFxuICAgICAgY2hhbm5lbDogdGhpcy5jaGFubmVsLFxuICAgICAgY2xpZW50OiB0aGlzLmNsaWVudCxcbiAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgbGlicmFyaWVzOiB0aGlzLmxpYnJhcmllcyxcbiAgICAgIGxhbmd1YWdlOiB0aGlzLmxhbmd1YWdlLFxuICAgICAgcmVnaW9uOiB0aGlzLnJlZ2lvbixcbiAgICAgIG1hcElkczogdGhpcy5tYXBJZHMsXG4gICAgICBub25jZTogdGhpcy5ub25jZSxcbiAgICAgIHVybDogdGhpcy51cmwsXG4gICAgICBhdXRoUmVmZXJyZXJQb2xpY3k6IHRoaXMuYXV0aFJlZmVycmVyUG9saWN5XG4gICAgfTtcbiAgfVxuICBnZXQgc3RhdHVzKCkge1xuICAgIGlmICh0aGlzLmVycm9ycy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBMb2FkZXJTdGF0dXMuRkFJTFVSRTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZG9uZSkge1xuICAgICAgcmV0dXJuIExvYWRlclN0YXR1cy5TVUNDRVNTO1xuICAgIH1cbiAgICBpZiAodGhpcy5sb2FkaW5nKSB7XG4gICAgICByZXR1cm4gTG9hZGVyU3RhdHVzLkxPQURJTkc7XG4gICAgfVxuICAgIHJldHVybiBMb2FkZXJTdGF0dXMuSU5JVElBTElaRUQ7XG4gIH1cbiAgZ2V0IGZhaWxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5kb25lICYmICF0aGlzLmxvYWRpbmcgJiYgdGhpcy5lcnJvcnMubGVuZ3RoID49IHRoaXMucmV0cmllcyArIDE7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZVVybCByZXR1cm5zIHRoZSBHb29nbGUgTWFwcyBKYXZhU2NyaXB0IEFQSSBzY3JpcHQgdXJsIGdpdmVuIHRoZSBbW0xvYWRlck9wdGlvbnNdXS5cbiAgICpcbiAgICogQGlnbm9yZVxuICAgKiBAZGVwcmVjYXRlZFxuICAgKi9cbiAgY3JlYXRlVXJsKCkge1xuICAgIGxldCB1cmwgPSB0aGlzLnVybDtcbiAgICB1cmwgKz0gYD9jYWxsYmFjaz1fX2dvb2dsZU1hcHNDYWxsYmFjayZsb2FkaW5nPWFzeW5jYDtcbiAgICBpZiAodGhpcy5hcGlLZXkpIHtcbiAgICAgIHVybCArPSBgJmtleT0ke3RoaXMuYXBpS2V5fWA7XG4gICAgfVxuICAgIGlmICh0aGlzLmNoYW5uZWwpIHtcbiAgICAgIHVybCArPSBgJmNoYW5uZWw9JHt0aGlzLmNoYW5uZWx9YDtcbiAgICB9XG4gICAgaWYgKHRoaXMuY2xpZW50KSB7XG4gICAgICB1cmwgKz0gYCZjbGllbnQ9JHt0aGlzLmNsaWVudH1gO1xuICAgIH1cbiAgICBpZiAodGhpcy5saWJyYXJpZXMubGVuZ3RoID4gMCkge1xuICAgICAgdXJsICs9IGAmbGlicmFyaWVzPSR7dGhpcy5saWJyYXJpZXMuam9pbihcIixcIil9YDtcbiAgICB9XG4gICAgaWYgKHRoaXMubGFuZ3VhZ2UpIHtcbiAgICAgIHVybCArPSBgJmxhbmd1YWdlPSR7dGhpcy5sYW5ndWFnZX1gO1xuICAgIH1cbiAgICBpZiAodGhpcy5yZWdpb24pIHtcbiAgICAgIHVybCArPSBgJnJlZ2lvbj0ke3RoaXMucmVnaW9ufWA7XG4gICAgfVxuICAgIGlmICh0aGlzLnZlcnNpb24pIHtcbiAgICAgIHVybCArPSBgJnY9JHt0aGlzLnZlcnNpb259YDtcbiAgICB9XG4gICAgaWYgKHRoaXMubWFwSWRzKSB7XG4gICAgICB1cmwgKz0gYCZtYXBfaWRzPSR7dGhpcy5tYXBJZHMuam9pbihcIixcIil9YDtcbiAgICB9XG4gICAgaWYgKHRoaXMuYXV0aFJlZmVycmVyUG9saWN5KSB7XG4gICAgICB1cmwgKz0gYCZhdXRoX3JlZmVycmVyX3BvbGljeT0ke3RoaXMuYXV0aFJlZmVycmVyUG9saWN5fWA7XG4gICAgfVxuICAgIHJldHVybiB1cmw7XG4gIH1cbiAgZGVsZXRlU2NyaXB0KCkge1xuICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuaWQpO1xuICAgIGlmIChzY3JpcHQpIHtcbiAgICAgIHNjcmlwdC5yZW1vdmUoKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIExvYWQgdGhlIEdvb2dsZSBNYXBzIEphdmFTY3JpcHQgQVBJIHNjcmlwdCBhbmQgcmV0dXJuIGEgUHJvbWlzZS5cbiAgICogQGRlcHJlY2F0ZWQsIHVzZSBpbXBvcnRMaWJyYXJ5KCkgaW5zdGVhZC5cbiAgICovXG4gIGxvYWQoKSB7XG4gICAgcmV0dXJuIHRoaXMubG9hZFByb21pc2UoKTtcbiAgfVxuICAvKipcbiAgICogTG9hZCB0aGUgR29vZ2xlIE1hcHMgSmF2YVNjcmlwdCBBUEkgc2NyaXB0IGFuZCByZXR1cm4gYSBQcm9taXNlLlxuICAgKlxuICAgKiBAaWdub3JlXG4gICAqIEBkZXByZWNhdGVkLCB1c2UgaW1wb3J0TGlicmFyeSgpIGluc3RlYWQuXG4gICAqL1xuICBsb2FkUHJvbWlzZSgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5sb2FkQ2FsbGJhY2soZXJyID0+IHtcbiAgICAgICAgaWYgKCFlcnIpIHtcbiAgICAgICAgICByZXNvbHZlKHdpbmRvdy5nb29nbGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlamVjdChlcnIuZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICBpbXBvcnRMaWJyYXJ5KG5hbWUpIHtcbiAgICB0aGlzLmV4ZWN1dGUoKTtcbiAgICByZXR1cm4gZ29vZ2xlLm1hcHMuaW1wb3J0TGlicmFyeShuYW1lKTtcbiAgfVxuICAvKipcbiAgICogTG9hZCB0aGUgR29vZ2xlIE1hcHMgSmF2YVNjcmlwdCBBUEkgc2NyaXB0IHdpdGggYSBjYWxsYmFjay5cbiAgICogQGRlcHJlY2F0ZWQsIHVzZSBpbXBvcnRMaWJyYXJ5KCkgaW5zdGVhZC5cbiAgICovXG4gIGxvYWRDYWxsYmFjayhmbikge1xuICAgIHRoaXMuY2FsbGJhY2tzLnB1c2goZm4pO1xuICAgIHRoaXMuZXhlY3V0ZSgpO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHNjcmlwdCBvbiBkb2N1bWVudC5cbiAgICovXG4gIHNldFNjcmlwdCgpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmlkKSkge1xuICAgICAgLy8gVE9ETyB3cmFwIG9uZXJyb3IgY2FsbGJhY2sgZm9yIGNhc2VzIHdoZXJlIHRoZSBzY3JpcHQgd2FzIGxvYWRlZCBlbHNld2hlcmVcbiAgICAgIHRoaXMuY2FsbGJhY2soKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAga2V5OiB0aGlzLmFwaUtleSxcbiAgICAgIGNoYW5uZWw6IHRoaXMuY2hhbm5lbCxcbiAgICAgIGNsaWVudDogdGhpcy5jbGllbnQsXG4gICAgICBsaWJyYXJpZXM6IHRoaXMubGlicmFyaWVzLmxlbmd0aCAmJiB0aGlzLmxpYnJhcmllcyxcbiAgICAgIHY6IHRoaXMudmVyc2lvbixcbiAgICAgIG1hcElkczogdGhpcy5tYXBJZHMsXG4gICAgICBsYW5ndWFnZTogdGhpcy5sYW5ndWFnZSxcbiAgICAgIHJlZ2lvbjogdGhpcy5yZWdpb24sXG4gICAgICBhdXRoUmVmZXJyZXJQb2xpY3k6IHRoaXMuYXV0aFJlZmVycmVyUG9saWN5XG4gICAgfTtcbiAgICAvLyBrZWVwIHRoZSBVUkwgbWluaW1hbDpcbiAgICBPYmplY3Qua2V5cyhwYXJhbXMpLmZvckVhY2goXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBrZXkgPT4gIXBhcmFtc1trZXldICYmIGRlbGV0ZSBwYXJhbXNba2V5XSk7XG4gICAgaWYgKCEoKF9iID0gKF9hID0gd2luZG93ID09PSBudWxsIHx8IHdpbmRvdyA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2luZG93Lmdvb2dsZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1hcHMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5pbXBvcnRMaWJyYXJ5KSkge1xuICAgICAgLy8gdHdlYWtlZCBjb3B5IG9mIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL21hcHMvZG9jdW1lbnRhdGlvbi9qYXZhc2NyaXB0L2xvYWQtbWFwcy1qcy1hcGkjZHluYW1pYy1saWJyYXJ5LWltcG9ydFxuICAgICAgLy8gd2hpY2ggYWxzbyBzZXRzIHRoZSBiYXNlIHVybCwgdGhlIGlkLCBhbmQgdGhlIG5vbmNlXG4gICAgICAvKiBlc2xpbnQtZGlzYWJsZSAqL1xuICAgICAgKGcgPT4ge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGxldCBoLFxuICAgICAgICAgIGEsXG4gICAgICAgICAgayxcbiAgICAgICAgICBwID0gXCJUaGUgR29vZ2xlIE1hcHMgSmF2YVNjcmlwdCBBUElcIixcbiAgICAgICAgICBjID0gXCJnb29nbGVcIixcbiAgICAgICAgICBsID0gXCJpbXBvcnRMaWJyYXJ5XCIsXG4gICAgICAgICAgcSA9IFwiX19pYl9fXCIsXG4gICAgICAgICAgbSA9IGRvY3VtZW50LFxuICAgICAgICAgIGIgPSB3aW5kb3c7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgYiA9IGJbY10gfHwgKGJbY10gPSB7fSk7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgY29uc3QgZCA9IGIubWFwcyB8fCAoYi5tYXBzID0ge30pLFxuICAgICAgICAgIHIgPSBuZXcgU2V0KCksXG4gICAgICAgICAgZSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKSxcbiAgICAgICAgICB1ID0gKCkgPT5cbiAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgaCB8fCAoaCA9IG5ldyBQcm9taXNlKChmLCBuKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICB5aWVsZCBhID0gbS5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgICAgICAgYS5pZCA9IHRoaXMuaWQ7XG4gICAgICAgICAgICBlLnNldChcImxpYnJhcmllc1wiLCBbLi4ucl0gKyBcIlwiKTtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGZvciAoayBpbiBnKSBlLnNldChrLnJlcGxhY2UoL1tBLVpdL2csIHQgPT4gXCJfXCIgKyB0WzBdLnRvTG93ZXJDYXNlKCkpLCBnW2tdKTtcbiAgICAgICAgICAgIGUuc2V0KFwiY2FsbGJhY2tcIiwgYyArIFwiLm1hcHMuXCIgKyBxKTtcbiAgICAgICAgICAgIGEuc3JjID0gdGhpcy51cmwgKyBgP2AgKyBlO1xuICAgICAgICAgICAgZFtxXSA9IGY7XG4gICAgICAgICAgICBhLm9uZXJyb3IgPSAoKSA9PiBoID0gbihFcnJvcihwICsgXCIgY291bGQgbm90IGxvYWQuXCIpKTtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGEubm9uY2UgPSB0aGlzLm5vbmNlIHx8ICgoX2EgPSBtLnF1ZXJ5U2VsZWN0b3IoXCJzY3JpcHRbbm9uY2VdXCIpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eubm9uY2UpIHx8IFwiXCI7XG4gICAgICAgICAgICBtLmhlYWQuYXBwZW5kKGEpO1xuICAgICAgICAgIH0pKSk7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgZFtsXSA/IGNvbnNvbGUud2FybihwICsgXCIgb25seSBsb2FkcyBvbmNlLiBJZ25vcmluZzpcIiwgZykgOiBkW2xdID0gKGYsIC4uLm4pID0+IHIuYWRkKGYpICYmIHUoKS50aGVuKCgpID0+IGRbbF0oZiwgLi4ubikpO1xuICAgICAgfSkocGFyYW1zKTtcbiAgICAgIC8qIGVzbGludC1lbmFibGUgKi9cbiAgICB9XG4gICAgLy8gV2hpbGUgbW9zdCBsaWJyYXJpZXMgcG9wdWxhdGUgdGhlIGdsb2JhbCBuYW1lc3BhY2Ugd2hlbiBsb2FkZWQgdmlhIGJvb3RzdHJhcCBwYXJhbXMsXG4gICAgLy8gdGhpcyBpcyBub3QgdGhlIGNhc2UgZm9yIFwibWFya2VyXCIgd2hlbiB1c2VkIHdpdGggdGhlIGlubGluZSBib290c3RyYXAgbG9hZGVyXG4gICAgLy8gKGFuZCBtYXliZSBvdGhlcnMgaW4gdGhlIGZ1dHVyZSkuIFNvIGVuc3VyZSB0aGVyZSBpcyBhbiBpbXBvcnRMaWJyYXJ5IGZvciBlYWNoOlxuICAgIGNvbnN0IGxpYnJhcnlQcm9taXNlcyA9IHRoaXMubGlicmFyaWVzLm1hcChsaWJyYXJ5ID0+IHRoaXMuaW1wb3J0TGlicmFyeShsaWJyYXJ5KSk7XG4gICAgLy8gZW5zdXJlIGF0IGxlYXN0IG9uZSBsaWJyYXJ5LCB0byBraWNrIG9mZiBsb2FkaW5nLi4uXG4gICAgaWYgKCFsaWJyYXJ5UHJvbWlzZXMubGVuZ3RoKSB7XG4gICAgICBsaWJyYXJ5UHJvbWlzZXMucHVzaCh0aGlzLmltcG9ydExpYnJhcnkoXCJjb3JlXCIpKTtcbiAgICB9XG4gICAgUHJvbWlzZS5hbGwobGlicmFyeVByb21pc2VzKS50aGVuKCgpID0+IHRoaXMuY2FsbGJhY2soKSwgZXJyb3IgPT4ge1xuICAgICAgY29uc3QgZXZlbnQgPSBuZXcgRXJyb3JFdmVudChcImVycm9yXCIsIHtcbiAgICAgICAgZXJyb3JcbiAgICAgIH0pOyAvLyBmb3IgYmFja3dhcmRzIGNvbXBhdFxuICAgICAgdGhpcy5sb2FkRXJyb3JDYWxsYmFjayhldmVudCk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFJlc2V0IHRoZSBsb2FkZXIgc3RhdGUuXG4gICAqL1xuICByZXNldCgpIHtcbiAgICB0aGlzLmRlbGV0ZVNjcmlwdCgpO1xuICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgIHRoaXMuZXJyb3JzID0gW107XG4gICAgdGhpcy5vbmVycm9yRXZlbnQgPSBudWxsO1xuICB9XG4gIHJlc2V0SWZSZXRyeWluZ0ZhaWxlZCgpIHtcbiAgICBpZiAodGhpcy5mYWlsZWQpIHtcbiAgICAgIHRoaXMucmVzZXQoKTtcbiAgICB9XG4gIH1cbiAgbG9hZEVycm9yQ2FsbGJhY2soZSkge1xuICAgIHRoaXMuZXJyb3JzLnB1c2goZSk7XG4gICAgaWYgKHRoaXMuZXJyb3JzLmxlbmd0aCA8PSB0aGlzLnJldHJpZXMpIHtcbiAgICAgIGNvbnN0IGRlbGF5ID0gdGhpcy5lcnJvcnMubGVuZ3RoICogTWF0aC5wb3coMiwgdGhpcy5lcnJvcnMubGVuZ3RoKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBsb2FkIEdvb2dsZSBNYXBzIHNjcmlwdCwgcmV0cnlpbmcgaW4gJHtkZWxheX0gbXMuYCk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5kZWxldGVTY3JpcHQoKTtcbiAgICAgICAgdGhpcy5zZXRTY3JpcHQoKTtcbiAgICAgIH0sIGRlbGF5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vbmVycm9yRXZlbnQgPSBlO1xuICAgICAgdGhpcy5jYWxsYmFjaygpO1xuICAgIH1cbiAgfVxuICBjYWxsYmFjaygpIHtcbiAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgIHRoaXMuY2FsbGJhY2tzLmZvckVhY2goY2IgPT4ge1xuICAgICAgY2IodGhpcy5vbmVycm9yRXZlbnQpO1xuICAgIH0pO1xuICAgIHRoaXMuY2FsbGJhY2tzID0gW107XG4gIH1cbiAgZXhlY3V0ZSgpIHtcbiAgICB0aGlzLnJlc2V0SWZSZXRyeWluZ0ZhaWxlZCgpO1xuICAgIGlmICh0aGlzLmxvYWRpbmcpIHtcbiAgICAgIC8vIGRvIG5vdGhpbmcgYnV0IHdhaXRcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuZG9uZSkge1xuICAgICAgdGhpcy5jYWxsYmFjaygpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBzaG9ydCBjaXJjdWl0IGFuZCB3YXJuIGlmIGdvb2dsZS5tYXBzIGlzIGFscmVhZHkgbG9hZGVkXG4gICAgICBpZiAod2luZG93Lmdvb2dsZSAmJiB3aW5kb3cuZ29vZ2xlLm1hcHMgJiYgd2luZG93Lmdvb2dsZS5tYXBzLnZlcnNpb24pIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiR29vZ2xlIE1hcHMgYWxyZWFkeSBsb2FkZWQgb3V0c2lkZSBAZ29vZ2xlbWFwcy9qcy1hcGktbG9hZGVyLiBcIiArIFwiVGhpcyBtYXkgcmVzdWx0IGluIHVuZGVzaXJhYmxlIGJlaGF2aW9yIGFzIG9wdGlvbnMgYW5kIHNjcmlwdCBwYXJhbWV0ZXJzIG1heSBub3QgbWF0Y2guXCIpO1xuICAgICAgICB0aGlzLmNhbGxiYWNrKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7XG4gICAgICB0aGlzLnNldFNjcmlwdCgpO1xuICAgIH1cbiAgfVxufVxuZXhwb3J0IHsgREVGQVVMVF9JRCwgTG9hZGVyLCBMb2FkZXJTdGF0dXMgfTtcbiJdLCJtYXBwaW5ncyI6Ijs7O0FBZ0JBLFNBQVMsVUFBVSxTQUFTLFlBQVksR0FBRyxXQUFXO0FBQ3BELFdBQVMsTUFBTSxPQUFPO0FBQ3BCLFdBQU8saUJBQWlCLElBQUksUUFBUSxJQUFJLEVBQUUsU0FBVSxTQUFTO0FBQzNELGNBQVEsS0FBSztBQUFBLElBQ2Ys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
