import {
  GESTURE_CONTROLLER
} from "./chunk-F4BDZKIT.js";

// node_modules/@ionic/core/dist/esm/index-39782642.js
var addEventListener = (el, eventName, callback, opts) => {
  const listenerOpts = supportsPassive(el) ? {
    capture: !!opts.capture,
    passive: !!opts.passive
  } : !!opts.capture;
  let add;
  let remove;
  if (el["__zone_symbol__addEventListener"]) {
    add = "__zone_symbol__addEventListener";
    remove = "__zone_symbol__removeEventListener";
  } else {
    add = "addEventListener";
    remove = "removeEventListener";
  }
  el[add](eventName, callback, listenerOpts);
  return () => {
    el[remove](eventName, callback, listenerOpts);
  };
};
var supportsPassive = (node) => {
  if (_sPassive === void 0) {
    try {
      const opts = Object.defineProperty({}, "passive", {
        get: () => {
          _sPassive = true;
        }
      });
      node.addEventListener("optsTest", () => {
        return;
      }, opts);
    } catch (e) {
      _sPassive = false;
    }
  }
  return !!_sPassive;
};
var _sPassive;
var MOUSE_WAIT = 2e3;
var createPointerEvents = (el, pointerDown, pointerMove, pointerUp, options) => {
  let rmTouchStart;
  let rmTouchMove;
  let rmTouchEnd;
  let rmTouchCancel;
  let rmMouseStart;
  let rmMouseMove;
  let rmMouseUp;
  let lastTouchEvent = 0;
  const handleTouchStart = (ev) => {
    lastTouchEvent = Date.now() + MOUSE_WAIT;
    if (!pointerDown(ev)) {
      return;
    }
    if (!rmTouchMove && pointerMove) {
      rmTouchMove = addEventListener(el, "touchmove", pointerMove, options);
    }
    if (!rmTouchEnd) {
      rmTouchEnd = addEventListener(ev.target, "touchend", handleTouchEnd, options);
    }
    if (!rmTouchCancel) {
      rmTouchCancel = addEventListener(ev.target, "touchcancel", handleTouchEnd, options);
    }
  };
  const handleMouseDown = (ev) => {
    if (lastTouchEvent > Date.now()) {
      return;
    }
    if (!pointerDown(ev)) {
      return;
    }
    if (!rmMouseMove && pointerMove) {
      rmMouseMove = addEventListener(getDocument(el), "mousemove", pointerMove, options);
    }
    if (!rmMouseUp) {
      rmMouseUp = addEventListener(getDocument(el), "mouseup", handleMouseUp, options);
    }
  };
  const handleTouchEnd = (ev) => {
    stopTouch();
    if (pointerUp) {
      pointerUp(ev);
    }
  };
  const handleMouseUp = (ev) => {
    stopMouse();
    if (pointerUp) {
      pointerUp(ev);
    }
  };
  const stopTouch = () => {
    if (rmTouchMove) {
      rmTouchMove();
    }
    if (rmTouchEnd) {
      rmTouchEnd();
    }
    if (rmTouchCancel) {
      rmTouchCancel();
    }
    rmTouchMove = rmTouchEnd = rmTouchCancel = void 0;
  };
  const stopMouse = () => {
    if (rmMouseMove) {
      rmMouseMove();
    }
    if (rmMouseUp) {
      rmMouseUp();
    }
    rmMouseMove = rmMouseUp = void 0;
  };
  const stop = () => {
    stopTouch();
    stopMouse();
  };
  const enable = (isEnabled = true) => {
    if (!isEnabled) {
      if (rmTouchStart) {
        rmTouchStart();
      }
      if (rmMouseStart) {
        rmMouseStart();
      }
      rmTouchStart = rmMouseStart = void 0;
      stop();
    } else {
      if (!rmTouchStart) {
        rmTouchStart = addEventListener(el, "touchstart", handleTouchStart, options);
      }
      if (!rmMouseStart) {
        rmMouseStart = addEventListener(el, "mousedown", handleMouseDown, options);
      }
    }
  };
  const destroy = () => {
    enable(false);
    pointerUp = pointerMove = pointerDown = void 0;
  };
  return {
    enable,
    stop,
    destroy
  };
};
var getDocument = (node) => {
  return node instanceof Document ? node : node.ownerDocument;
};
var createPanRecognizer = (direction, thresh, maxAngle) => {
  const radians = maxAngle * (Math.PI / 180);
  const isDirX = direction === "x";
  const maxCosine = Math.cos(radians);
  const threshold = thresh * thresh;
  let startX = 0;
  let startY = 0;
  let dirty = false;
  let isPan = 0;
  return {
    start(x, y) {
      startX = x;
      startY = y;
      isPan = 0;
      dirty = true;
    },
    detect(x, y) {
      if (!dirty) {
        return false;
      }
      const deltaX = x - startX;
      const deltaY = y - startY;
      const distance = deltaX * deltaX + deltaY * deltaY;
      if (distance < threshold) {
        return false;
      }
      const hypotenuse = Math.sqrt(distance);
      const cosine = (isDirX ? deltaX : deltaY) / hypotenuse;
      if (cosine > maxCosine) {
        isPan = 1;
      } else if (cosine < -maxCosine) {
        isPan = -1;
      } else {
        isPan = 0;
      }
      dirty = false;
      return true;
    },
    isGesture() {
      return isPan !== 0;
    },
    getDirection() {
      return isPan;
    }
  };
};
var createGesture = (config) => {
  let hasCapturedPan = false;
  let hasStartedPan = false;
  let hasFiredStart = true;
  let isMoveQueued = false;
  const finalConfig = Object.assign({
    disableScroll: false,
    direction: "x",
    gesturePriority: 0,
    passive: true,
    maxAngle: 40,
    threshold: 10
  }, config);
  const canStart = finalConfig.canStart;
  const onWillStart = finalConfig.onWillStart;
  const onStart = finalConfig.onStart;
  const onEnd = finalConfig.onEnd;
  const notCaptured = finalConfig.notCaptured;
  const onMove = finalConfig.onMove;
  const threshold = finalConfig.threshold;
  const passive = finalConfig.passive;
  const blurOnStart = finalConfig.blurOnStart;
  const detail = {
    type: "pan",
    startX: 0,
    startY: 0,
    startTime: 0,
    currentX: 0,
    currentY: 0,
    velocityX: 0,
    velocityY: 0,
    deltaX: 0,
    deltaY: 0,
    currentTime: 0,
    event: void 0,
    data: void 0
  };
  const pan = createPanRecognizer(finalConfig.direction, finalConfig.threshold, finalConfig.maxAngle);
  const gesture = GESTURE_CONTROLLER.createGesture({
    name: config.gestureName,
    priority: config.gesturePriority,
    disableScroll: config.disableScroll
  });
  const pointerDown = (ev) => {
    const timeStamp = now(ev);
    if (hasStartedPan || !hasFiredStart) {
      return false;
    }
    updateDetail(ev, detail);
    detail.startX = detail.currentX;
    detail.startY = detail.currentY;
    detail.startTime = detail.currentTime = timeStamp;
    detail.velocityX = detail.velocityY = detail.deltaX = detail.deltaY = 0;
    detail.event = ev;
    if (canStart && canStart(detail) === false) {
      return false;
    }
    gesture.release();
    if (!gesture.start()) {
      return false;
    }
    hasStartedPan = true;
    if (threshold === 0) {
      return tryToCapturePan();
    }
    pan.start(detail.startX, detail.startY);
    return true;
  };
  const pointerMove = (ev) => {
    if (hasCapturedPan) {
      if (!isMoveQueued && hasFiredStart) {
        isMoveQueued = true;
        calcGestureData(detail, ev);
        requestAnimationFrame(fireOnMove);
      }
      return;
    }
    calcGestureData(detail, ev);
    if (pan.detect(detail.currentX, detail.currentY)) {
      if (!pan.isGesture() || !tryToCapturePan()) {
        abortGesture();
      }
    }
  };
  const fireOnMove = () => {
    if (!hasCapturedPan) {
      return;
    }
    isMoveQueued = false;
    if (onMove) {
      onMove(detail);
    }
  };
  const tryToCapturePan = () => {
    if (!gesture.capture()) {
      return false;
    }
    hasCapturedPan = true;
    hasFiredStart = false;
    detail.startX = detail.currentX;
    detail.startY = detail.currentY;
    detail.startTime = detail.currentTime;
    if (onWillStart) {
      onWillStart(detail).then(fireOnStart);
    } else {
      fireOnStart();
    }
    return true;
  };
  const blurActiveElement = () => {
    if (typeof document !== "undefined") {
      const activeElement = document.activeElement;
      if (activeElement === null || activeElement === void 0 ? void 0 : activeElement.blur) {
        activeElement.blur();
      }
    }
  };
  const fireOnStart = () => {
    if (blurOnStart) {
      blurActiveElement();
    }
    if (onStart) {
      onStart(detail);
    }
    hasFiredStart = true;
  };
  const reset = () => {
    hasCapturedPan = false;
    hasStartedPan = false;
    isMoveQueued = false;
    hasFiredStart = true;
    gesture.release();
  };
  const pointerUp = (ev) => {
    const tmpHasCaptured = hasCapturedPan;
    const tmpHasFiredStart = hasFiredStart;
    reset();
    if (!tmpHasFiredStart) {
      return;
    }
    calcGestureData(detail, ev);
    if (tmpHasCaptured) {
      if (onEnd) {
        onEnd(detail);
      }
      return;
    }
    if (notCaptured) {
      notCaptured(detail);
    }
  };
  const pointerEvents = createPointerEvents(finalConfig.el, pointerDown, pointerMove, pointerUp, {
    capture: false,
    passive
  });
  const abortGesture = () => {
    reset();
    pointerEvents.stop();
    if (notCaptured) {
      notCaptured(detail);
    }
  };
  return {
    enable(enable = true) {
      if (!enable) {
        if (hasCapturedPan) {
          pointerUp(void 0);
        }
        reset();
      }
      pointerEvents.enable(enable);
    },
    destroy() {
      gesture.destroy();
      pointerEvents.destroy();
    }
  };
};
var calcGestureData = (detail, ev) => {
  if (!ev) {
    return;
  }
  const prevX = detail.currentX;
  const prevY = detail.currentY;
  const prevT = detail.currentTime;
  updateDetail(ev, detail);
  const currentX = detail.currentX;
  const currentY = detail.currentY;
  const timestamp = detail.currentTime = now(ev);
  const timeDelta = timestamp - prevT;
  if (timeDelta > 0 && timeDelta < 100) {
    const velocityX = (currentX - prevX) / timeDelta;
    const velocityY = (currentY - prevY) / timeDelta;
    detail.velocityX = velocityX * 0.7 + detail.velocityX * 0.3;
    detail.velocityY = velocityY * 0.7 + detail.velocityY * 0.3;
  }
  detail.deltaX = currentX - detail.startX;
  detail.deltaY = currentY - detail.startY;
  detail.event = ev;
};
var updateDetail = (ev, detail) => {
  let x = 0;
  let y = 0;
  if (ev) {
    const changedTouches = ev.changedTouches;
    if (changedTouches && changedTouches.length > 0) {
      const touch = changedTouches[0];
      x = touch.clientX;
      y = touch.clientY;
    } else if (ev.pageX !== void 0) {
      x = ev.pageX;
      y = ev.pageY;
    }
  }
  detail.currentX = x;
  detail.currentY = y;
};
var now = (ev) => {
  return ev.timeStamp || Date.now();
};

export {
  createGesture
};
/*! Bundled license information:

@ionic/core/dist/esm/index-39782642.js:
  (*!
   * (C) Ionic http://ionicframework.com - MIT License
   *)
*/
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9AaW9uaWMvY29yZS9kaXN0L2VzbS9pbmRleC0zOTc4MjY0Mi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIChDKSBJb25pYyBodHRwOi8vaW9uaWNmcmFtZXdvcmsuY29tIC0gTUlUIExpY2Vuc2VcbiAqL1xuaW1wb3J0IHsgRyBhcyBHRVNUVVJFX0NPTlRST0xMRVIgfSBmcm9tICcuL2dlc3R1cmUtY29udHJvbGxlci0zMTRhNTRmNi5qcyc7XG5leHBvcnQgeyBHIGFzIEdFU1RVUkVfQ09OVFJPTExFUiB9IGZyb20gJy4vZ2VzdHVyZS1jb250cm9sbGVyLTMxNGE1NGY2LmpzJztcbmNvbnN0IGFkZEV2ZW50TGlzdGVuZXIgPSAoZWwsXG4vLyBUT0RPKEZXLTI4MzIpOiB0eXBlXG5ldmVudE5hbWUsIGNhbGxiYWNrLCBvcHRzKSA9PiB7XG4gIC8vIHVzZSBldmVudCBsaXN0ZW5lciBvcHRpb25zIHdoZW4gc3VwcG9ydGVkXG4gIC8vIG90aGVyd2lzZSBpdCdzIGp1c3QgYSBib29sZWFuIGZvciB0aGUgXCJjYXB0dXJlXCIgYXJnXG4gIGNvbnN0IGxpc3RlbmVyT3B0cyA9IHN1cHBvcnRzUGFzc2l2ZShlbCkgPyB7XG4gICAgY2FwdHVyZTogISFvcHRzLmNhcHR1cmUsXG4gICAgcGFzc2l2ZTogISFvcHRzLnBhc3NpdmVcbiAgfSA6ICEhb3B0cy5jYXB0dXJlO1xuICBsZXQgYWRkO1xuICBsZXQgcmVtb3ZlO1xuICBpZiAoZWxbJ19fem9uZV9zeW1ib2xfX2FkZEV2ZW50TGlzdGVuZXInXSkge1xuICAgIGFkZCA9ICdfX3pvbmVfc3ltYm9sX19hZGRFdmVudExpc3RlbmVyJztcbiAgICByZW1vdmUgPSAnX196b25lX3N5bWJvbF9fcmVtb3ZlRXZlbnRMaXN0ZW5lcic7XG4gIH0gZWxzZSB7XG4gICAgYWRkID0gJ2FkZEV2ZW50TGlzdGVuZXInO1xuICAgIHJlbW92ZSA9ICdyZW1vdmVFdmVudExpc3RlbmVyJztcbiAgfVxuICBlbFthZGRdKGV2ZW50TmFtZSwgY2FsbGJhY2ssIGxpc3RlbmVyT3B0cyk7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgZWxbcmVtb3ZlXShldmVudE5hbWUsIGNhbGxiYWNrLCBsaXN0ZW5lck9wdHMpO1xuICB9O1xufTtcbmNvbnN0IHN1cHBvcnRzUGFzc2l2ZSA9IG5vZGUgPT4ge1xuICBpZiAoX3NQYXNzaXZlID09PSB1bmRlZmluZWQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgb3B0cyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ3Bhc3NpdmUnLCB7XG4gICAgICAgIGdldDogKCkgPT4ge1xuICAgICAgICAgIF9zUGFzc2l2ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKCdvcHRzVGVzdCcsICgpID0+IHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSwgb3B0cyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgX3NQYXNzaXZlID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiAhIV9zUGFzc2l2ZTtcbn07XG5sZXQgX3NQYXNzaXZlO1xuY29uc3QgTU9VU0VfV0FJVCA9IDIwMDA7XG4vLyBUT0RPKEZXLTI4MzIpOiB0eXBlc1xuY29uc3QgY3JlYXRlUG9pbnRlckV2ZW50cyA9IChlbCwgcG9pbnRlckRvd24sIHBvaW50ZXJNb3ZlLCBwb2ludGVyVXAsIG9wdGlvbnMpID0+IHtcbiAgbGV0IHJtVG91Y2hTdGFydDtcbiAgbGV0IHJtVG91Y2hNb3ZlO1xuICBsZXQgcm1Ub3VjaEVuZDtcbiAgbGV0IHJtVG91Y2hDYW5jZWw7XG4gIGxldCBybU1vdXNlU3RhcnQ7XG4gIGxldCBybU1vdXNlTW92ZTtcbiAgbGV0IHJtTW91c2VVcDtcbiAgbGV0IGxhc3RUb3VjaEV2ZW50ID0gMDtcbiAgY29uc3QgaGFuZGxlVG91Y2hTdGFydCA9IGV2ID0+IHtcbiAgICBsYXN0VG91Y2hFdmVudCA9IERhdGUubm93KCkgKyBNT1VTRV9XQUlUO1xuICAgIGlmICghcG9pbnRlckRvd24oZXYpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghcm1Ub3VjaE1vdmUgJiYgcG9pbnRlck1vdmUpIHtcbiAgICAgIHJtVG91Y2hNb3ZlID0gYWRkRXZlbnRMaXN0ZW5lcihlbCwgJ3RvdWNobW92ZScsIHBvaW50ZXJNb3ZlLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXZlbnRzIGFyZSBkaXNwYXRjaGVkIG9uIHRoZSBlbGVtZW50IHRoYXQgaXMgdGFwcGVkIGFuZCBidWJibGUgdXAgdG9cbiAgICAgKiB0aGUgcmVmZXJlbmNlIGVsZW1lbnQgaW4gdGhlIGdlc3R1cmUuIEluIHRoZSBldmVudCB0aGF0IHRoZSBlbGVtZW50IHRoaXNcbiAgICAgKiBldmVudCB3YXMgZmlyc3QgZGlzcGF0Y2hlZCBvbiBpcyByZW1vdmVkIGZyb20gdGhlIERPTSwgdGhlIGV2ZW50IHdpbGwgbm9cbiAgICAgKiBsb25nZXIgYnViYmxlIHVwIHRvIG91ciByZWZlcmVuY2UgZWxlbWVudC4gVGhpcyBsZWF2ZXMgdGhlIGdlc3R1cmUgaW4gYW5cbiAgICAgKiB1bnVzYWJsZSBzdGF0ZS4gVG8gYWNjb3VudCBmb3IgdGhpcywgdGhlIHRvdWNoZW5kIGFuZCB0b3VjaGNhbmNlbCBsaXN0ZW5lcnNcbiAgICAgKiBzaG91bGQgYmUgYWRkZWQgdG8gdGhlIGV2ZW50IHRhcmdldCBzbyB0aGF0IHRoZXkgc3RpbGwgZmlyZSBldmVuIGlmIHRoZSB0YXJnZXRcbiAgICAgKiBpcyByZW1vdmVkIGZyb20gdGhlIERPTS5cbiAgICAgKi9cbiAgICBpZiAoIXJtVG91Y2hFbmQpIHtcbiAgICAgIHJtVG91Y2hFbmQgPSBhZGRFdmVudExpc3RlbmVyKGV2LnRhcmdldCwgJ3RvdWNoZW5kJywgaGFuZGxlVG91Y2hFbmQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBpZiAoIXJtVG91Y2hDYW5jZWwpIHtcbiAgICAgIHJtVG91Y2hDYW5jZWwgPSBhZGRFdmVudExpc3RlbmVyKGV2LnRhcmdldCwgJ3RvdWNoY2FuY2VsJywgaGFuZGxlVG91Y2hFbmQsIG9wdGlvbnMpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgaGFuZGxlTW91c2VEb3duID0gZXYgPT4ge1xuICAgIGlmIChsYXN0VG91Y2hFdmVudCA+IERhdGUubm93KCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFwb2ludGVyRG93bihldikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFybU1vdXNlTW92ZSAmJiBwb2ludGVyTW92ZSkge1xuICAgICAgcm1Nb3VzZU1vdmUgPSBhZGRFdmVudExpc3RlbmVyKGdldERvY3VtZW50KGVsKSwgJ21vdXNlbW92ZScsIHBvaW50ZXJNb3ZlLCBvcHRpb25zKTtcbiAgICB9XG4gICAgaWYgKCFybU1vdXNlVXApIHtcbiAgICAgIHJtTW91c2VVcCA9IGFkZEV2ZW50TGlzdGVuZXIoZ2V0RG9jdW1lbnQoZWwpLCAnbW91c2V1cCcsIGhhbmRsZU1vdXNlVXAsIG9wdGlvbnMpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgaGFuZGxlVG91Y2hFbmQgPSBldiA9PiB7XG4gICAgc3RvcFRvdWNoKCk7XG4gICAgaWYgKHBvaW50ZXJVcCkge1xuICAgICAgcG9pbnRlclVwKGV2KTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGhhbmRsZU1vdXNlVXAgPSBldiA9PiB7XG4gICAgc3RvcE1vdXNlKCk7XG4gICAgaWYgKHBvaW50ZXJVcCkge1xuICAgICAgcG9pbnRlclVwKGV2KTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHN0b3BUb3VjaCA9ICgpID0+IHtcbiAgICBpZiAocm1Ub3VjaE1vdmUpIHtcbiAgICAgIHJtVG91Y2hNb3ZlKCk7XG4gICAgfVxuICAgIGlmIChybVRvdWNoRW5kKSB7XG4gICAgICBybVRvdWNoRW5kKCk7XG4gICAgfVxuICAgIGlmIChybVRvdWNoQ2FuY2VsKSB7XG4gICAgICBybVRvdWNoQ2FuY2VsKCk7XG4gICAgfVxuICAgIHJtVG91Y2hNb3ZlID0gcm1Ub3VjaEVuZCA9IHJtVG91Y2hDYW5jZWwgPSB1bmRlZmluZWQ7XG4gIH07XG4gIGNvbnN0IHN0b3BNb3VzZSA9ICgpID0+IHtcbiAgICBpZiAocm1Nb3VzZU1vdmUpIHtcbiAgICAgIHJtTW91c2VNb3ZlKCk7XG4gICAgfVxuICAgIGlmIChybU1vdXNlVXApIHtcbiAgICAgIHJtTW91c2VVcCgpO1xuICAgIH1cbiAgICBybU1vdXNlTW92ZSA9IHJtTW91c2VVcCA9IHVuZGVmaW5lZDtcbiAgfTtcbiAgY29uc3Qgc3RvcCA9ICgpID0+IHtcbiAgICBzdG9wVG91Y2goKTtcbiAgICBzdG9wTW91c2UoKTtcbiAgfTtcbiAgY29uc3QgZW5hYmxlID0gKGlzRW5hYmxlZCA9IHRydWUpID0+IHtcbiAgICBpZiAoIWlzRW5hYmxlZCkge1xuICAgICAgaWYgKHJtVG91Y2hTdGFydCkge1xuICAgICAgICBybVRvdWNoU3RhcnQoKTtcbiAgICAgIH1cbiAgICAgIGlmIChybU1vdXNlU3RhcnQpIHtcbiAgICAgICAgcm1Nb3VzZVN0YXJ0KCk7XG4gICAgICB9XG4gICAgICBybVRvdWNoU3RhcnQgPSBybU1vdXNlU3RhcnQgPSB1bmRlZmluZWQ7XG4gICAgICBzdG9wKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghcm1Ub3VjaFN0YXJ0KSB7XG4gICAgICAgIHJtVG91Y2hTdGFydCA9IGFkZEV2ZW50TGlzdGVuZXIoZWwsICd0b3VjaHN0YXJ0JywgaGFuZGxlVG91Y2hTdGFydCwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgICBpZiAoIXJtTW91c2VTdGFydCkge1xuICAgICAgICBybU1vdXNlU3RhcnQgPSBhZGRFdmVudExpc3RlbmVyKGVsLCAnbW91c2Vkb3duJywgaGFuZGxlTW91c2VEb3duLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IGRlc3Ryb3kgPSAoKSA9PiB7XG4gICAgZW5hYmxlKGZhbHNlKTtcbiAgICBwb2ludGVyVXAgPSBwb2ludGVyTW92ZSA9IHBvaW50ZXJEb3duID0gdW5kZWZpbmVkO1xuICB9O1xuICByZXR1cm4ge1xuICAgIGVuYWJsZSxcbiAgICBzdG9wLFxuICAgIGRlc3Ryb3lcbiAgfTtcbn07XG5jb25zdCBnZXREb2N1bWVudCA9IG5vZGUgPT4ge1xuICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIERvY3VtZW50ID8gbm9kZSA6IG5vZGUub3duZXJEb2N1bWVudDtcbn07XG5jb25zdCBjcmVhdGVQYW5SZWNvZ25pemVyID0gKGRpcmVjdGlvbiwgdGhyZXNoLCBtYXhBbmdsZSkgPT4ge1xuICBjb25zdCByYWRpYW5zID0gbWF4QW5nbGUgKiAoTWF0aC5QSSAvIDE4MCk7XG4gIGNvbnN0IGlzRGlyWCA9IGRpcmVjdGlvbiA9PT0gJ3gnO1xuICBjb25zdCBtYXhDb3NpbmUgPSBNYXRoLmNvcyhyYWRpYW5zKTtcbiAgY29uc3QgdGhyZXNob2xkID0gdGhyZXNoICogdGhyZXNoO1xuICBsZXQgc3RhcnRYID0gMDtcbiAgbGV0IHN0YXJ0WSA9IDA7XG4gIGxldCBkaXJ0eSA9IGZhbHNlO1xuICBsZXQgaXNQYW4gPSAwO1xuICByZXR1cm4ge1xuICAgIHN0YXJ0KHgsIHkpIHtcbiAgICAgIHN0YXJ0WCA9IHg7XG4gICAgICBzdGFydFkgPSB5O1xuICAgICAgaXNQYW4gPSAwO1xuICAgICAgZGlydHkgPSB0cnVlO1xuICAgIH0sXG4gICAgZGV0ZWN0KHgsIHkpIHtcbiAgICAgIGlmICghZGlydHkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgY29uc3QgZGVsdGFYID0geCAtIHN0YXJ0WDtcbiAgICAgIGNvbnN0IGRlbHRhWSA9IHkgLSBzdGFydFk7XG4gICAgICBjb25zdCBkaXN0YW5jZSA9IGRlbHRhWCAqIGRlbHRhWCArIGRlbHRhWSAqIGRlbHRhWTtcbiAgICAgIGlmIChkaXN0YW5jZSA8IHRocmVzaG9sZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBjb25zdCBoeXBvdGVudXNlID0gTWF0aC5zcXJ0KGRpc3RhbmNlKTtcbiAgICAgIGNvbnN0IGNvc2luZSA9IChpc0RpclggPyBkZWx0YVggOiBkZWx0YVkpIC8gaHlwb3RlbnVzZTtcbiAgICAgIGlmIChjb3NpbmUgPiBtYXhDb3NpbmUpIHtcbiAgICAgICAgaXNQYW4gPSAxO1xuICAgICAgfSBlbHNlIGlmIChjb3NpbmUgPCAtbWF4Q29zaW5lKSB7XG4gICAgICAgIGlzUGFuID0gLTE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpc1BhbiA9IDA7XG4gICAgICB9XG4gICAgICBkaXJ0eSA9IGZhbHNlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBpc0dlc3R1cmUoKSB7XG4gICAgICByZXR1cm4gaXNQYW4gIT09IDA7XG4gICAgfSxcbiAgICBnZXREaXJlY3Rpb24oKSB7XG4gICAgICByZXR1cm4gaXNQYW47XG4gICAgfVxuICB9O1xufTtcblxuLy8gVE9ETyhGVy0yODMyKTogdHlwZXNcbmNvbnN0IGNyZWF0ZUdlc3R1cmUgPSBjb25maWcgPT4ge1xuICBsZXQgaGFzQ2FwdHVyZWRQYW4gPSBmYWxzZTtcbiAgbGV0IGhhc1N0YXJ0ZWRQYW4gPSBmYWxzZTtcbiAgbGV0IGhhc0ZpcmVkU3RhcnQgPSB0cnVlO1xuICBsZXQgaXNNb3ZlUXVldWVkID0gZmFsc2U7XG4gIGNvbnN0IGZpbmFsQ29uZmlnID0gT2JqZWN0LmFzc2lnbih7XG4gICAgZGlzYWJsZVNjcm9sbDogZmFsc2UsXG4gICAgZGlyZWN0aW9uOiAneCcsXG4gICAgZ2VzdHVyZVByaW9yaXR5OiAwLFxuICAgIHBhc3NpdmU6IHRydWUsXG4gICAgbWF4QW5nbGU6IDQwLFxuICAgIHRocmVzaG9sZDogMTBcbiAgfSwgY29uZmlnKTtcbiAgY29uc3QgY2FuU3RhcnQgPSBmaW5hbENvbmZpZy5jYW5TdGFydDtcbiAgY29uc3Qgb25XaWxsU3RhcnQgPSBmaW5hbENvbmZpZy5vbldpbGxTdGFydDtcbiAgY29uc3Qgb25TdGFydCA9IGZpbmFsQ29uZmlnLm9uU3RhcnQ7XG4gIGNvbnN0IG9uRW5kID0gZmluYWxDb25maWcub25FbmQ7XG4gIGNvbnN0IG5vdENhcHR1cmVkID0gZmluYWxDb25maWcubm90Q2FwdHVyZWQ7XG4gIGNvbnN0IG9uTW92ZSA9IGZpbmFsQ29uZmlnLm9uTW92ZTtcbiAgY29uc3QgdGhyZXNob2xkID0gZmluYWxDb25maWcudGhyZXNob2xkO1xuICBjb25zdCBwYXNzaXZlID0gZmluYWxDb25maWcucGFzc2l2ZTtcbiAgY29uc3QgYmx1ck9uU3RhcnQgPSBmaW5hbENvbmZpZy5ibHVyT25TdGFydDtcbiAgY29uc3QgZGV0YWlsID0ge1xuICAgIHR5cGU6ICdwYW4nLFxuICAgIHN0YXJ0WDogMCxcbiAgICBzdGFydFk6IDAsXG4gICAgc3RhcnRUaW1lOiAwLFxuICAgIGN1cnJlbnRYOiAwLFxuICAgIGN1cnJlbnRZOiAwLFxuICAgIHZlbG9jaXR5WDogMCxcbiAgICB2ZWxvY2l0eVk6IDAsXG4gICAgZGVsdGFYOiAwLFxuICAgIGRlbHRhWTogMCxcbiAgICBjdXJyZW50VGltZTogMCxcbiAgICBldmVudDogdW5kZWZpbmVkLFxuICAgIGRhdGE6IHVuZGVmaW5lZFxuICB9O1xuICBjb25zdCBwYW4gPSBjcmVhdGVQYW5SZWNvZ25pemVyKGZpbmFsQ29uZmlnLmRpcmVjdGlvbiwgZmluYWxDb25maWcudGhyZXNob2xkLCBmaW5hbENvbmZpZy5tYXhBbmdsZSk7XG4gIGNvbnN0IGdlc3R1cmUgPSBHRVNUVVJFX0NPTlRST0xMRVIuY3JlYXRlR2VzdHVyZSh7XG4gICAgbmFtZTogY29uZmlnLmdlc3R1cmVOYW1lLFxuICAgIHByaW9yaXR5OiBjb25maWcuZ2VzdHVyZVByaW9yaXR5LFxuICAgIGRpc2FibGVTY3JvbGw6IGNvbmZpZy5kaXNhYmxlU2Nyb2xsXG4gIH0pO1xuICBjb25zdCBwb2ludGVyRG93biA9IGV2ID0+IHtcbiAgICBjb25zdCB0aW1lU3RhbXAgPSBub3coZXYpO1xuICAgIGlmIChoYXNTdGFydGVkUGFuIHx8ICFoYXNGaXJlZFN0YXJ0KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHVwZGF0ZURldGFpbChldiwgZGV0YWlsKTtcbiAgICBkZXRhaWwuc3RhcnRYID0gZGV0YWlsLmN1cnJlbnRYO1xuICAgIGRldGFpbC5zdGFydFkgPSBkZXRhaWwuY3VycmVudFk7XG4gICAgZGV0YWlsLnN0YXJ0VGltZSA9IGRldGFpbC5jdXJyZW50VGltZSA9IHRpbWVTdGFtcDtcbiAgICBkZXRhaWwudmVsb2NpdHlYID0gZGV0YWlsLnZlbG9jaXR5WSA9IGRldGFpbC5kZWx0YVggPSBkZXRhaWwuZGVsdGFZID0gMDtcbiAgICBkZXRhaWwuZXZlbnQgPSBldjtcbiAgICAvLyBDaGVjayBpZiBnZXN0dXJlIGNhbiBzdGFydFxuICAgIGlmIChjYW5TdGFydCAmJiBjYW5TdGFydChkZXRhaWwpID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBSZWxlYXNlIGZhbGxiYWNrXG4gICAgZ2VzdHVyZS5yZWxlYXNlKCk7XG4gICAgLy8gU3RhcnQgZ2VzdHVyZVxuICAgIGlmICghZ2VzdHVyZS5zdGFydCgpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGhhc1N0YXJ0ZWRQYW4gPSB0cnVlO1xuICAgIGlmICh0aHJlc2hvbGQgPT09IDApIHtcbiAgICAgIHJldHVybiB0cnlUb0NhcHR1cmVQYW4oKTtcbiAgICB9XG4gICAgcGFuLnN0YXJ0KGRldGFpbC5zdGFydFgsIGRldGFpbC5zdGFydFkpO1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xuICBjb25zdCBwb2ludGVyTW92ZSA9IGV2ID0+IHtcbiAgICAvLyBmYXN0IHBhdGgsIGlmIGdlc3R1cmUgaXMgY3VycmVudGx5IGNhcHR1cmVkXG4gICAgLy8gZG8gbWluaW11bSBqb2IgdG8gZ2V0IHVzZXItbGFuZCBldmVuIGRpc3BhdGNoZWRcbiAgICBpZiAoaGFzQ2FwdHVyZWRQYW4pIHtcbiAgICAgIGlmICghaXNNb3ZlUXVldWVkICYmIGhhc0ZpcmVkU3RhcnQpIHtcbiAgICAgICAgaXNNb3ZlUXVldWVkID0gdHJ1ZTtcbiAgICAgICAgY2FsY0dlc3R1cmVEYXRhKGRldGFpbCwgZXYpO1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZmlyZU9uTW92ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGdlc3R1cmUgaXMgY3VycmVudGx5IGJlaW5nIGRldGVjdGVkXG4gICAgY2FsY0dlc3R1cmVEYXRhKGRldGFpbCwgZXYpO1xuICAgIGlmIChwYW4uZGV0ZWN0KGRldGFpbC5jdXJyZW50WCwgZGV0YWlsLmN1cnJlbnRZKSkge1xuICAgICAgaWYgKCFwYW4uaXNHZXN0dXJlKCkgfHwgIXRyeVRvQ2FwdHVyZVBhbigpKSB7XG4gICAgICAgIGFib3J0R2VzdHVyZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3QgZmlyZU9uTW92ZSA9ICgpID0+IHtcbiAgICAvLyBTaW5jZSBmaXJlT25Nb3ZlIGlzIGNhbGxlZCBpbnNpZGUgYSBSQUYsIG9uRW5kKCkgbWlnaHQgYmUgY2FsbGVkLFxuICAgIC8vIHdlIG11c3QgZG91YmxlIGNoZWNrIGhhc0NhcHR1cmVkUGFuXG4gICAgaWYgKCFoYXNDYXB0dXJlZFBhbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpc01vdmVRdWV1ZWQgPSBmYWxzZTtcbiAgICBpZiAob25Nb3ZlKSB7XG4gICAgICBvbk1vdmUoZGV0YWlsKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHRyeVRvQ2FwdHVyZVBhbiA9ICgpID0+IHtcbiAgICBpZiAoIWdlc3R1cmUuY2FwdHVyZSgpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGhhc0NhcHR1cmVkUGFuID0gdHJ1ZTtcbiAgICBoYXNGaXJlZFN0YXJ0ID0gZmFsc2U7XG4gICAgLy8gcmVzZXQgc3RhcnQgcG9zaXRpb24gc2luY2UgdGhlIHJlYWwgdXNlci1sYW5kIGV2ZW50IHN0YXJ0cyBoZXJlXG4gICAgLy8gSWYgdGhlIHBhbiBkZXRlY3RvciB0aHJlc2hvbGQgaXMgYmlnLCBub3QgcmVzZXR0aW5nIHRoZSBzdGFydCBwb3NpdGlvblxuICAgIC8vIHdpbGwgY2F1c2UgYSBqdW1wIGluIHRoZSBhbmltYXRpb24gZXF1YWwgdG8gdGhlIGRldGVjdG9yIHRocmVzaG9sZC5cbiAgICAvLyB0aGUgYXJyYXkgb2YgcG9zaXRpb25zIHVzZWQgdG8gY2FsY3VsYXRlIHRoZSBnZXN0dXJlIHZlbG9jaXR5IGRvZXMgbm90XG4gICAgLy8gbmVlZCB0byBiZSBjbGVhbmVkLCBtb3JlIHBvaW50cyBpbiB0aGUgcG9zaXRpb25zIGFycmF5IGFsd2F5cyByZXN1bHRzIGluIGFcbiAgICAvLyBtb3JlIGFjY3VyYXRlIHZhbHVlIG9mIHRoZSB2ZWxvY2l0eS5cbiAgICBkZXRhaWwuc3RhcnRYID0gZGV0YWlsLmN1cnJlbnRYO1xuICAgIGRldGFpbC5zdGFydFkgPSBkZXRhaWwuY3VycmVudFk7XG4gICAgZGV0YWlsLnN0YXJ0VGltZSA9IGRldGFpbC5jdXJyZW50VGltZTtcbiAgICBpZiAob25XaWxsU3RhcnQpIHtcbiAgICAgIG9uV2lsbFN0YXJ0KGRldGFpbCkudGhlbihmaXJlT25TdGFydCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpcmVPblN0YXJ0KCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuICBjb25zdCBibHVyQWN0aXZlRWxlbWVudCA9ICgpID0+IHtcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3QgYWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICBpZiAoYWN0aXZlRWxlbWVudCA9PT0gbnVsbCB8fCBhY3RpdmVFbGVtZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhY3RpdmVFbGVtZW50LmJsdXIpIHtcbiAgICAgICAgYWN0aXZlRWxlbWVudC5ibHVyKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBjb25zdCBmaXJlT25TdGFydCA9ICgpID0+IHtcbiAgICBpZiAoYmx1ck9uU3RhcnQpIHtcbiAgICAgIGJsdXJBY3RpdmVFbGVtZW50KCk7XG4gICAgfVxuICAgIGlmIChvblN0YXJ0KSB7XG4gICAgICBvblN0YXJ0KGRldGFpbCk7XG4gICAgfVxuICAgIGhhc0ZpcmVkU3RhcnQgPSB0cnVlO1xuICB9O1xuICBjb25zdCByZXNldCA9ICgpID0+IHtcbiAgICBoYXNDYXB0dXJlZFBhbiA9IGZhbHNlO1xuICAgIGhhc1N0YXJ0ZWRQYW4gPSBmYWxzZTtcbiAgICBpc01vdmVRdWV1ZWQgPSBmYWxzZTtcbiAgICBoYXNGaXJlZFN0YXJ0ID0gdHJ1ZTtcbiAgICBnZXN0dXJlLnJlbGVhc2UoKTtcbiAgfTtcbiAgLy8gRU5EICoqKioqKioqKioqKioqKioqKioqKioqKipcbiAgY29uc3QgcG9pbnRlclVwID0gZXYgPT4ge1xuICAgIGNvbnN0IHRtcEhhc0NhcHR1cmVkID0gaGFzQ2FwdHVyZWRQYW47XG4gICAgY29uc3QgdG1wSGFzRmlyZWRTdGFydCA9IGhhc0ZpcmVkU3RhcnQ7XG4gICAgcmVzZXQoKTtcbiAgICBpZiAoIXRtcEhhc0ZpcmVkU3RhcnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2FsY0dlc3R1cmVEYXRhKGRldGFpbCwgZXYpO1xuICAgIC8vIFRyeSB0byBjYXB0dXJlIHByZXNzXG4gICAgaWYgKHRtcEhhc0NhcHR1cmVkKSB7XG4gICAgICBpZiAob25FbmQpIHtcbiAgICAgICAgb25FbmQoZGV0YWlsKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gTm90IGNhcHR1cmVkIGFueSBldmVudFxuICAgIGlmIChub3RDYXB0dXJlZCkge1xuICAgICAgbm90Q2FwdHVyZWQoZGV0YWlsKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHBvaW50ZXJFdmVudHMgPSBjcmVhdGVQb2ludGVyRXZlbnRzKGZpbmFsQ29uZmlnLmVsLCBwb2ludGVyRG93biwgcG9pbnRlck1vdmUsIHBvaW50ZXJVcCwge1xuICAgIGNhcHR1cmU6IGZhbHNlLFxuICAgIHBhc3NpdmVcbiAgfSk7XG4gIGNvbnN0IGFib3J0R2VzdHVyZSA9ICgpID0+IHtcbiAgICByZXNldCgpO1xuICAgIHBvaW50ZXJFdmVudHMuc3RvcCgpO1xuICAgIGlmIChub3RDYXB0dXJlZCkge1xuICAgICAgbm90Q2FwdHVyZWQoZGV0YWlsKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiB7XG4gICAgZW5hYmxlKGVuYWJsZSA9IHRydWUpIHtcbiAgICAgIGlmICghZW5hYmxlKSB7XG4gICAgICAgIGlmIChoYXNDYXB0dXJlZFBhbikge1xuICAgICAgICAgIHBvaW50ZXJVcCh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJlc2V0KCk7XG4gICAgICB9XG4gICAgICBwb2ludGVyRXZlbnRzLmVuYWJsZShlbmFibGUpO1xuICAgIH0sXG4gICAgZGVzdHJveSgpIHtcbiAgICAgIGdlc3R1cmUuZGVzdHJveSgpO1xuICAgICAgcG9pbnRlckV2ZW50cy5kZXN0cm95KCk7XG4gICAgfVxuICB9O1xufTtcbmNvbnN0IGNhbGNHZXN0dXJlRGF0YSA9IChkZXRhaWwsIGV2KSA9PiB7XG4gIGlmICghZXYpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgcHJldlggPSBkZXRhaWwuY3VycmVudFg7XG4gIGNvbnN0IHByZXZZID0gZGV0YWlsLmN1cnJlbnRZO1xuICBjb25zdCBwcmV2VCA9IGRldGFpbC5jdXJyZW50VGltZTtcbiAgdXBkYXRlRGV0YWlsKGV2LCBkZXRhaWwpO1xuICBjb25zdCBjdXJyZW50WCA9IGRldGFpbC5jdXJyZW50WDtcbiAgY29uc3QgY3VycmVudFkgPSBkZXRhaWwuY3VycmVudFk7XG4gIGNvbnN0IHRpbWVzdGFtcCA9IGRldGFpbC5jdXJyZW50VGltZSA9IG5vdyhldik7XG4gIGNvbnN0IHRpbWVEZWx0YSA9IHRpbWVzdGFtcCAtIHByZXZUO1xuICBpZiAodGltZURlbHRhID4gMCAmJiB0aW1lRGVsdGEgPCAxMDApIHtcbiAgICBjb25zdCB2ZWxvY2l0eVggPSAoY3VycmVudFggLSBwcmV2WCkgLyB0aW1lRGVsdGE7XG4gICAgY29uc3QgdmVsb2NpdHlZID0gKGN1cnJlbnRZIC0gcHJldlkpIC8gdGltZURlbHRhO1xuICAgIGRldGFpbC52ZWxvY2l0eVggPSB2ZWxvY2l0eVggKiAwLjcgKyBkZXRhaWwudmVsb2NpdHlYICogMC4zO1xuICAgIGRldGFpbC52ZWxvY2l0eVkgPSB2ZWxvY2l0eVkgKiAwLjcgKyBkZXRhaWwudmVsb2NpdHlZICogMC4zO1xuICB9XG4gIGRldGFpbC5kZWx0YVggPSBjdXJyZW50WCAtIGRldGFpbC5zdGFydFg7XG4gIGRldGFpbC5kZWx0YVkgPSBjdXJyZW50WSAtIGRldGFpbC5zdGFydFk7XG4gIGRldGFpbC5ldmVudCA9IGV2O1xufTtcbmNvbnN0IHVwZGF0ZURldGFpbCA9IChldiwgZGV0YWlsKSA9PiB7XG4gIC8vIGdldCBYIGNvb3JkaW5hdGVzIGZvciBlaXRoZXIgYSBtb3VzZSBjbGlja1xuICAvLyBvciBhIHRvdWNoIGRlcGVuZGluZyBvbiB0aGUgZ2l2ZW4gZXZlbnRcbiAgbGV0IHggPSAwO1xuICBsZXQgeSA9IDA7XG4gIGlmIChldikge1xuICAgIGNvbnN0IGNoYW5nZWRUb3VjaGVzID0gZXYuY2hhbmdlZFRvdWNoZXM7XG4gICAgaWYgKGNoYW5nZWRUb3VjaGVzICYmIGNoYW5nZWRUb3VjaGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHRvdWNoID0gY2hhbmdlZFRvdWNoZXNbMF07XG4gICAgICB4ID0gdG91Y2guY2xpZW50WDtcbiAgICAgIHkgPSB0b3VjaC5jbGllbnRZO1xuICAgIH0gZWxzZSBpZiAoZXYucGFnZVggIT09IHVuZGVmaW5lZCkge1xuICAgICAgeCA9IGV2LnBhZ2VYO1xuICAgICAgeSA9IGV2LnBhZ2VZO1xuICAgIH1cbiAgfVxuICBkZXRhaWwuY3VycmVudFggPSB4O1xuICBkZXRhaWwuY3VycmVudFkgPSB5O1xufTtcbmNvbnN0IG5vdyA9IGV2ID0+IHtcbiAgcmV0dXJuIGV2LnRpbWVTdGFtcCB8fCBEYXRlLm5vdygpO1xufTtcbmV4cG9ydCB7IGNyZWF0ZUdlc3R1cmUgfTsiXSwibWFwcGluZ3MiOiI7Ozs7O0FBS0EsSUFBTSxtQkFBbUIsQ0FBQyxJQUUxQixXQUFXLFVBQVUsU0FBUztBQUc1QixRQUFNLGVBQWUsZ0JBQWdCLEVBQUUsSUFBSTtBQUFBLElBQ3pDLFNBQVMsQ0FBQyxDQUFDLEtBQUs7QUFBQSxJQUNoQixTQUFTLENBQUMsQ0FBQyxLQUFLO0FBQUEsRUFDbEIsSUFBSSxDQUFDLENBQUMsS0FBSztBQUNYLE1BQUk7QUFDSixNQUFJO0FBQ0osTUFBSSxHQUFHLGlDQUFpQyxHQUFHO0FBQ3pDLFVBQU07QUFDTixhQUFTO0FBQUEsRUFDWCxPQUFPO0FBQ0wsVUFBTTtBQUNOLGFBQVM7QUFBQSxFQUNYO0FBQ0EsS0FBRyxHQUFHLEVBQUUsV0FBVyxVQUFVLFlBQVk7QUFDekMsU0FBTyxNQUFNO0FBQ1gsT0FBRyxNQUFNLEVBQUUsV0FBVyxVQUFVLFlBQVk7QUFBQSxFQUM5QztBQUNGO0FBQ0EsSUFBTSxrQkFBa0IsVUFBUTtBQUM5QixNQUFJLGNBQWMsUUFBVztBQUMzQixRQUFJO0FBQ0YsWUFBTSxPQUFPLE9BQU8sZUFBZSxDQUFDLEdBQUcsV0FBVztBQUFBLFFBQ2hELEtBQUssTUFBTTtBQUNULHNCQUFZO0FBQUEsUUFDZDtBQUFBLE1BQ0YsQ0FBQztBQUNELFdBQUssaUJBQWlCLFlBQVksTUFBTTtBQUN0QztBQUFBLE1BQ0YsR0FBRyxJQUFJO0FBQUEsSUFDVCxTQUFTLEdBQUc7QUFDVixrQkFBWTtBQUFBLElBQ2Q7QUFBQSxFQUNGO0FBQ0EsU0FBTyxDQUFDLENBQUM7QUFDWDtBQUNBLElBQUk7QUFDSixJQUFNLGFBQWE7QUFFbkIsSUFBTSxzQkFBc0IsQ0FBQyxJQUFJLGFBQWEsYUFBYSxXQUFXLFlBQVk7QUFDaEYsTUFBSTtBQUNKLE1BQUk7QUFDSixNQUFJO0FBQ0osTUFBSTtBQUNKLE1B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
